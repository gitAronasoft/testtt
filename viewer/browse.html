<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Browse Videos - VideoHub</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="../assets/css/styles.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container-fluid">
            <a class="navbar-brand" href="dashboard.html">
                <i class="fas fa-play-circle me-2"></i>VideoHub Viewer
            </a>
            
            <div class="navbar-nav ms-auto">
                <div class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                        <i class="fas fa-user-circle me-2"></i>Viewer
                    </a>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="profile.html"><i class="fas fa-user me-2"></i>Profile</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="../auth/login.html"><i class="fas fa-sign-out-alt me-2"></i>Logout</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar -->
            <nav class="col-md-3 col-lg-2 d-md-block bg-light sidebar">
                <div class="position-sticky pt-3">
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link" href="dashboard.html">
                                <i class="fas fa-tachometer-alt me-2"></i>Dashboard
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="browse.html">
                                <i class="fas fa-search me-2"></i>Browse Videos
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="purchases.html">
                                <i class="fas fa-shopping-cart me-2"></i>My Purchases
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="video-player.html">
                                <i class="fas fa-play me-2"></i>Watch Videos
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="profile.html">
                                <i class="fas fa-cog me-2"></i>Settings
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>

            <!-- Main Content -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4 py-4">
        <!-- Hero Section -->
        <div class="hero-section bg-gradient text-white rounded mb-5 p-5">
            <div class="container">
                <h1 class="display-4 fw-bold mb-3">Discover Amazing Video Content</h1>
                <p class="lead mb-4">Explore our curated collection of educational and entertaining videos from top creators.</p>

                <!-- Search Bar -->
                <div class="row justify-content-center">
                    <div class="col-md-8">
                        <div class="input-group input-group-lg">
                            <input type="text" class="form-control" placeholder="Search for videos..." id="searchInput">
                            <button class="btn btn-light" type="button" id="searchBtn">
                                <i class="fas fa-search"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Filters and Categories -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-body">
                        <div class="row align-items-center">
                            <div class="col-md-3">
                                <select class="form-select" id="categoryFilter">
                                    <option value="">All Categories</option>
                                    <option value="education">Education</option>
                                    <option value="technology">Technology</option>
                                    <option value="business">Business</option>
                                    <option value="design">Design</option>
                                    <option value="entertainment">Entertainment</option>
                                </select>
                            </div>
                            <div class="col-md-2">
                                <select class="form-select" id="priceFilter">
                                    <option value="">Any Price</option>
                                    <option value="0-10">$0 - $10</option>
                                    <option value="10-25">$10 - $25</option>
                                    <option value="25-50">$25 - $50</option>
                                    <option value="50+">$50+</option>
                                </select>
                            </div>
                            <div class="col-md-2">
                                <select class="form-select" id="durationFilter">
                                    <option value="">Any Duration</option>
                                    <option value="0-30">Under 30 min</option>
                                    <option value="30-60">30-60 min</option>
                                    <option value="60+">Over 60 min</option>
                                </select>
                            </div>
                            <div class="col-md-2">
                                <select class="form-select" id="sortBy">
                                    <option value="newest">Newest First</option>
                                    <option value="popular">Most Popular</option>
                                    <option value="price-low">Price: Low to High</option>
                                    <option value="price-high">Price: High to Low</option>
                                    <option value="rating">Highest Rated</option>
                                </select>
                            </div>
                            <div class="col-md-2">
                                <button class="btn btn-primary w-100" id="applyFilters">
                                    <i class="fas fa-filter"></i> Apply
                                </button>
                            </div>
                            <div class="col-md-1">
                                <button class="btn btn-outline-secondary w-100" id="viewToggle" title="Grid/List View">
                                    <i class="fas fa-th"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Featured Videos Section -->
        <div class="row mb-5">
            <div class="col-12">
                <h3 class="mb-3">Featured Videos</h3>
                <div class="row" id="featuredVideos">
                    <!-- Featured videos will be populated by JavaScript -->
                </div>
            </div>
        </div>

        <!-- All Videos Section -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h3>All Videos</h3>
                    <span class="text-muted" id="videoCount">Loading...</span>
                </div>
                <div class="row" id="videosGrid">
                    <!-- Videos will be populated by JavaScript -->
                </div>
            </div>
        </div>

        <!-- Load More Button -->
        <div class="row">
            <div class="col-12 text-center">
                <button class="btn btn-outline-primary btn-lg" id="loadMore" style="display: none;">
                    <i class="fas fa-plus me-2"></i>Load More Videos
                </button>
            </div>
        </div>

        <!-- Pagination -->
        <nav aria-label="Video pagination" class="mt-5">
            <ul class="pagination justify-content-center">
                <li class="page-item disabled">
                    <a class="page-link" href="#" tabindex="-1">Previous</a>
                </li>
                <li class="page-item active">
                    <a class="page-link" href="#">1</a>
                </li>
                <li class="page-item">
                    <a class="page-link" href="#">2</a>
                </li>
                <li class="page-item">
                    <a class="page-link" href="#">3</a>
                </li>
                <li class="page-item">
                    <a class="page-link" href="#">Next</a>
                </li>
            </ul>
        </nav>
    </main>
        </div>
    </div>

    <!-- Video Preview Modal -->
    <div class="modal fade" id="videoPreviewModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="previewTitle">Video Preview</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="video-thumbnail-large mb-3">
                                <img id="previewThumbnail" src="" class="img-fluid rounded" alt="Video Thumbnail">
                                <div class="video-overlay">
                                    <i class="fas fa-play fa-3x"></i>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <h5 id="previewVideoTitle"></h5>
                            <p><strong>Creator:</strong> <span id="previewCreator"></span></p>
                            <p><strong>Duration:</strong> <span id="previewDuration"></span></p>
                            <p><strong>Category:</strong> <span id="previewCategory"></span></p>
                            <p><strong>Rating:</strong> <span id="previewRating"></span></p>
                            <p class="text-success h4"><strong>Price: $<span id="previewPrice"></span></strong></p>
                            <p><strong>Description:</strong></p>
                            <p id="previewDescription"></p>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-success" id="purchaseFromPreview">
                        <i class="fas fa-shopping-cart me-2"></i>Purchase Now
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Purchase Confirmation Modal -->
    <div class="modal fade" id="purchaseModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Purchase Video</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="text-center mb-3">
                        <i class="fas fa-video fa-3x text-primary mb-3"></i>
                        <h5 id="purchaseVideoTitle"></h5>
                        <p>By <strong id="purchaseCreator"></strong></p>
                    </div>

                    <div class="card bg-light">
                        <div class="card-body">
                            <div class="d-flex justify-content-between">
                                <span>Video Price:</span>
                                <strong>$<span id="purchasePrice"></span></strong>
                            </div>
                            <div class="d-flex justify-content-between">
                                <span>Processing Fee:</span>
                                <strong>$0.99</strong>
                            </div>
                            <hr>
                            <div class="d-flex justify-content-between h5">
                                <span>Total:</span>
                                <strong class="text-success">$<span id="totalPrice"></span></strong>
                            </div>
                        </div>
                    </div>

                    <div class="alert alert-info mt-3">
                        <i class="fas fa-info-circle me-2"></i>
                        <strong>Demo Mode:</strong> This is a simulated purchase. No actual payment will be processed.
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-success" id="confirmPurchase">
                        <i class="fas fa-credit-card me-2"></i>Complete Purchase
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Video Player Modal -->
    <div class="modal fade" id="videoPlayerModal" tabindex="-1">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalVideoTitle">Video Player</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body p-0">
                    <div class="row g-0">
                        <div class="col-lg-8">
                            <!-- Video Player Container -->
                            <div class="video-wrapper bg-dark">
                                <video id="modalVideo" class="video-player" controls preload="metadata" poster="">
                                    <source src="" type="video/mp4">
                                    <track kind="subtitles" src="" srclang="en" label="English" default>
                                    Your browser does not support the video tag.
                                </video>
                                
                                <!-- Video Loading Overlay -->
                                <div id="modalVideoLoader" class="video-loading-overlay">
                                    <div class="spinner-border text-light" role="status">
                                        <span class="visually-hidden">Loading...</span>
                                    </div>
                                    <p class="text-light mt-2">Loading video...</p>
                                </div>
                            </div>
                            
                            <!-- Video Info -->
                            <div class="p-3">
                                <h5 id="modalVideoTitleInfo">Video Title</h5>
                                <p class="text-muted mb-2">
                                    By <strong id="modalVideoCreator">Creator</strong> •
                                    <span id="modalVideoViews">0</span> views •
                                    <span id="modalVideoDate">Date</span>
                                </p>
                                <div class="video-actions mb-3">
                                    <button class="btn btn-outline-primary btn-sm" id="modalLikeBtn">
                                        <i class="fas fa-thumbs-up me-1"></i>Like (<span id="modalLikeCount">0</span>)
                                    </button>
                                    <button class="btn btn-outline-secondary btn-sm ms-2" id="modalShareBtn">
                                        <i class="fas fa-share me-1"></i>Share
                                    </button>
                                    <button class="btn btn-outline-warning btn-sm ms-2" id="modalFavoriteBtn">
                                        <i class="fas fa-heart me-1"></i>Favorite
                                    </button>
                                </div>
                                <div class="video-description">
                                    <p id="modalVideoDescription">Video description will appear here...</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4 border-start bg-light">
                            <!-- Video Progress -->
                            <div class="p-4 border-bottom bg-white">
                                <div class="d-flex align-items-center justify-content-between mb-3">
                                    <h6 class="mb-0 fw-bold">
                                        <i class="fas fa-chart-line me-2 text-primary"></i>Your Progress
                                    </h6>
                                    <span class="badge bg-primary" id="modalProgressPercent">0%</span>
                                </div>
                                <div class="progress mb-3" style="height: 8px;">
                                    <div class="progress-bar bg-primary" id="modalWatchProgress" style="width: 0%"></div>
                                </div>
                                <div class="d-flex justify-content-between small">
                                    <span class="text-muted">
                                        <i class="fas fa-clock me-1"></i>
                                        <span id="modalWatchedTime">0:00</span>
                                    </span>
                                    <span class="text-muted">
                                        <i class="fas fa-video me-1"></i>
                                        <span id="modalTotalTime">0:00</span>
                                    </span>
                                </div>
                            </div>
                            
                            <!-- Video Notes -->
                            <div class="p-4 border-bottom bg-white">
                                <div class="d-flex align-items-center justify-content-between mb-3">
                                    <h6 class="mb-0 fw-bold">
                                        <i class="fas fa-sticky-note me-2 text-warning"></i>Notes
                                    </h6>
                                    <small class="text-muted">Auto-saved</small>
                                </div>
                                <textarea class="form-control border-0 bg-light" id="modalVideoNotes" rows="6" placeholder="Take notes while watching this video..."></textarea>
                                <div class="d-flex justify-content-between align-items-center mt-3">
                                    <small class="text-muted">
                                        <i class="fas fa-info-circle me-1"></i>
                                        Notes are saved automatically
                                    </small>
                                    <button class="btn btn-outline-primary btn-sm" id="modalSaveNotes">
                                        <i class="fas fa-save me-1"></i>Save
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Related Videos -->
                            <div class="p-4 bg-white">
                                <h6 class="mb-3 fw-bold">
                                    <i class="fas fa-video me-2 text-success"></i>Related Videos
                                    <span class="badge bg-light text-dark ms-2" id="relatedVideosCount">4</span>
                                </h6>
                                <div id="modalRelatedVideos" class="related-videos-container">
                                    <!-- Related videos will be populated here -->
                                </div>
                                <div class="text-center mt-3">
                                    <button class="btn btn-outline-secondary btn-sm" onclick="window.location.href='browse.html'">
                                        <i class="fas fa-search me-1"></i>Browse More Videos
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../assets/js/common.js"></script>
    <script src="../assets/js/payment.js"></script>
    <script src="../assets/js/viewer.js"></script>
</body>
</html>