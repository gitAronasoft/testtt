<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - YouTube Video Manager</title>
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
    <div id="header"></div>

    <div class="container">
        <div class="dashboard-header">
            <h2>üìä Dashboard</h2>
            <div class="dashboard-actions">
                <button class="btn btn-primary" onclick="showModal('uploadModal')" data-role="admin,editor">
                    <span>üì§</span> Upload Video
                </button>
                <a href="analytics.html" class="btn btn-secondary">
                    <span>üìà</span> Analytics
                </a>
            </div>
        </div>

        <!-- Enhanced Search and Filter Bar -->
        <div class="search-filter-bar">
            <input type="text" class="search-input" placeholder="üîç Search videos, titles, descriptions..." />
            <select class="filter-select" id="statusFilter">
                <option value="">All Status</option>
                <option value="published">Published</option>
                <option value="draft">Draft</option>
                <option value="scheduled">Scheduled</option>
            </select>
            <select class="filter-select" id="sortFilter">
                <option value="newest">Newest First</option>
                <option value="oldest">Oldest First</option>
                <option value="most-viewed">Most Viewed</option>
                <option value="alphabetical">A-Z</option>
            </select>
            <button class="btn btn-secondary" onclick="clearFilters()">Clear</button>
        </div>    

        <!-- Stats Grid - Only for Admin/Editor -->
        <div class="stats-grid admin-only editor-only">
            <div class="stat-card">
                <div class="stat-number" id="totalUsers">0</div>
                <div class="stat-label">Total Users</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="totalVideos">0</div>
                <div class="stat-label">Total Videos</div>
            </div>
            <div class="stat-card admin-only">
                <div class="stat-number" id="totalRevenue">$0</div>
                <div class="stat-label">Revenue</div>
            </div>
            <div class="stat-card admin-only">
                <div class="stat-number" id="engagementRate">0%</div>
                <div class="stat-label">Engagement</div>
            </div>
        </div>

        <!-- YouTube Sync Section -->
        <div class="card admin-only editor-only" style="background: white; border: 1px solid #e0e0e0; border-radius: 4px; padding: 20px; margin-bottom: 20px;">
            <h3>YouTube Channel Sync</h3>
            <div class="form-group">
                <label for="channelId">YouTube Channel ID or URL</label>
                <input type="text" id="channelId" placeholder="Enter channel ID (e.g., UC_x5XG1OV2P6uZZ5FSM9Ttw)">
            </div>
            <button class="btn btn-primary" onclick="syncChannel()">Sync Channel</button>
            <div id="syncStatus" style="margin-top: 10px;"></div>
        </div>

        <!-- Videos Section -->
        <div style="background: white; border: 1px solid #e0e0e0; border-radius: 4px; padding: 20px;">
            <h3>Videos</h3>
            <div class="video-grid" id="videoGrid">
                <!-- Videos will be loaded here -->
            </div>
        </div>

        <!-- User Management - Admin Only -->
        <div class="admin-only" style="background: white; border: 1px solid #e0e0e0; border-radius: 4px; padding: 20px; margin-top: 20px;">
            <h3>User Management</h3>
            <div class="user-list" id="userList">
                <!-- Users will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Upload Modal -->
    <div id="uploadModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Upload Video</h3>
                <span class="close" onclick="closeModal('uploadModal')">&times;</span>
            </div>
            <div class="modal-body">
                <div class="upload-area" onclick="document.getElementById('videoFile').click()">
                    <p>üìÅ Click to upload video file</p>
                    <small>MP4, MOV, AVI up to 500MB</small>
                    <input type="file" id="videoFile" accept="video/*" style="display: none;">
                </div>
                <div class="form-group">
                    <label for="videoTitle">Video Title</label>
                    <input type="text" id="videoTitle" placeholder="Enter video title">
                </div>
                <div class="form-group">
                    <label for="videoDescription">Description</label>
                    <textarea id="videoDescription" placeholder="Enter video description" rows="4"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('uploadModal')">Cancel</button>
                <button class="btn btn-primary" onclick="uploadVideo()">Upload</button>
            </div>
        </div>
    </div>

    <script src="assets/js/common.js"></script>
    <script src="assets/js/dashboard.js"></script>
    <script src="assets/js/header.js"></script>
    <script src="assets/js/visual-enhancements.js"></script>
    <script>
        // Check authentication on dashboard load
        document.addEventListener('DOMContentLoaded', function() {
            const currentUser = localStorage.getItem('currentUser');
            const isLoggedIn = localStorage.getItem('isLoggedIn');

            // If no user data, redirect to login
            if (!currentUser && !isLoggedIn) {
                window.location.replace('/login.html');
                return;
            }

            // Set default user if none exists
            if (!currentUser) {
                localStorage.setItem('currentUser', JSON.stringify({
                    name: 'Demo User',
                    email: 'demo@example.com',
                    role: 'admin'
                }));
            }
        });
    </script>
</body>
</html>