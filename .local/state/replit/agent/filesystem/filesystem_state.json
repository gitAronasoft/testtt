{"file_contents":{"index.php":{"content":"<?php\n/**\n * VideoHub Main Router\n * Routes requests to either API endpoints or static files\n */\n\n$request_uri = $_SERVER['REQUEST_URI'];\n$path = parse_url($request_uri, PHP_URL_PATH);\n\n// Handle API requests\nif (preg_match('/^\\/api/', $path)) {\n    // Remove /api from path and forward to API router\n    $_SERVER['REQUEST_URI'] = preg_replace('/^\\/api/', '', $request_uri);\n    require_once 'api/index.php';\n    return;\n}\n\n// Handle static files\n$file_path = __DIR__ . $path;\n\n// Default to index.html for root requests\nif ($path === '/') {\n    $file_path = __DIR__ . '/index.html';\n}\n\n// Serve static files if they exist\nif (file_exists($file_path) && is_file($file_path)) {\n    // Get file extension for proper MIME type\n    $extension = pathinfo($file_path, PATHINFO_EXTENSION);\n    \n    $mime_types = [\n        'html' => 'text/html',\n        'css' => 'text/css',\n        'js' => 'application/javascript',\n        'json' => 'application/json',\n        'png' => 'image/png',\n        'jpg' => 'image/jpeg',\n        'jpeg' => 'image/jpeg',\n        'gif' => 'image/gif',\n        'svg' => 'image/svg+xml'\n    ];\n    \n    if (isset($mime_types[$extension])) {\n        header('Content-Type: ' . $mime_types[$extension]);\n    }\n    \n    readfile($file_path);\n    return;\n}\n\n// 404 for non-existent files\nhttp_response_code(404);\necho '404 - File Not Found';\n?>","size_bytes":1356},"replit.md":{"content":"# VideoHub - Video Management Platform\n\n## Overview\n\nVideoHub is a comprehensive video management platform designed for creators, viewers, and administrators. The platform enables video content monetization, user management, and analytics tracking. It features a multi-role architecture with distinct interfaces for admins, creators, and viewers, each with tailored functionality for their specific needs.\n\n## User Preferences\n\nPreferred communication style: Simple, everyday language.\nProject focus: Simple web app for demo purposes without complex analytics or payout features.\nDesign preference: Improved and streamlined layout structure.\nViewer interface: Simplified dashboard with metrics and all videos section. Removed browse videos page and menu items for cleaner navigation.\nPurchases page: Removed metrics and recent purchases sections, keeping only all purchased videos section.\nData loading: Migrated from JSON files to PHP/MySQL backend with user's existing database.\nSettings pages: Removed \"Viewing Activity\" section from viewer profile page and \"Your Stats\" section from creator profile page for cleaner interface.\nUI/UX improvements: Enhanced all user panels with modern Bootstrap styling, consistent navigation, improved card designs, and sleek auth forms.\n\n## Backend Migration (August 2025)\n\nSuccessfully migrated VideoHub from static JSON files to PHP/MySQL backend:\n- Database: MariaDB 10.11.10 hosted at srv637.hstgr.io\n- PHP 8.1.33 backend with REST API endpoints\n- Adapted to existing database structure with YouTube video integration\n- API endpoints: /api/videos, /api/users, /api/purchases, /api/creator/videos, /api/creator/earnings, /api/admin/users\n- Mixed architecture: Frontend JavaScript + PHP backend\n- Frontend now uses APIService instead of DataService for database connectivity\n- Fixed APIService class redeclaration issues with proper guard checks\n- PHP server serves both API endpoints and static files on port 5000\n- **Migration to Replit Complete (August 12, 2025)**: All frontend pages successfully connected to backend APIs, syntax errors fixed, standardized API response formats, and verified full functionality across admin, creator, and viewer interfaces\n\n## System Architecture\n\n### Frontend Architecture\n- **Pure HTML/CSS/JavaScript**: Client-side implementation using vanilla JavaScript modules for maintainability\n- **Bootstrap 5**: CSS framework for responsive design and UI components\n- **Font Awesome**: Icon library for consistent iconography\n- **Chart.js**: Data visualization library for analytics dashboards\n- **Modular JavaScript**: Organized into separate modules (auth.js, admin.js, creator.js, viewer.js, payment.js, common.js)\n\n### Multi-Role User Interface\n- **Landing Page**: Marketing-focused homepage with user registration/login\n- **Admin Panel**: User management, video moderation, system analytics with dark theme and left sidebar navigation\n- **Creator Studio**: Video upload, earnings tracking, content analytics with green theme and left sidebar navigation  \n- **Viewer Interface**: Dashboard, video browsing, purchasing, playback with primary blue theme and unified navigation with dashboard and left sidebar structure\n\n### Authentication & Authorization\n- **Role-based Access Control**: Three distinct user types (admin, creator, viewer)\n- **Demo Authentication**: Hardcoded credentials for demonstration purposes\n- **Session Management**: Client-side session handling with localStorage\n- **Email Verification**: Mock email verification workflow for user onboarding\n\n### Video Management System\n- **Content Organization**: Categorized video library with metadata (title, description, price, duration)\n- **Monetization**: Pay-per-video model with earnings tracking\n- **Video Player**: HTML5 video player with custom controls and playback features\n- **Content Moderation**: Admin tools for video approval and management\n\n### Payment Processing\n- **Mock Payment System**: Simulated payment processing for demonstration\n- **Multiple Payment Methods**: Support for cards, PayPal, and mobile wallets\n- **Transaction Management**: Purchase history and earnings tracking\n- **Demo Mode**: Simplified payment flow for testing and demonstration\n\n### Simple Statistics\n- **Basic Overview Cards**: Simple statistics display without complex charts\n- **Clean Interface**: Streamlined design focused on core functionality\n\n### API Integration\n- **Structured API Calls**: Prepared API functions for backend connectivity\n- **RESTful Design**: Following REST conventions for all endpoints\n- **Error Handling**: Comprehensive error handling for API responses\n\n## External Dependencies\n\n### Frontend Libraries\n- **Bootstrap 5.3.0**: UI framework and responsive grid system\n- **Font Awesome 6.0.0**: Icon font library for consistent iconography\n\n### Content Delivery\n- **Bootstrap CDN**: External CSS and JavaScript delivery\n- **Font Awesome CDN**: Icon font delivery\n\n### Mock Services\n- **Placeholder Images**: Via.placeholder.com for demo video thumbnails\n- **Demo Payment Processing**: Simulated payment workflows\n- **Mock Video Content**: Placeholder video files and metadata\n\n### Architecture Considerations\n- **Static File Hosting**: Designed for deployment on static hosting platforms\n- **No Backend Dependencies**: Pure client-side implementation for simplicity\n- **Scalable Structure**: Modular design allows for future backend integration\n- **Cross-browser Compatibility**: Standard HTML5/CSS3/ES6 features\n- **Consistent UI/UX**: All user interfaces now follow consistent sidebar navigation pattern\n- **Unified Branding**: Consistent VideoHub branding across all user panels (VideoHub Admin, VideoHub Creator, VideoHub Viewer)\n- **Simplified Design**: Removed complex analytics and payout features for demo simplicity  \n- **Clean Navigation**: Streamlined sidebar navigation without analytics sections\n- **Creator Videos Interface**: Simplified video management with only Edit and Delete buttons, removed duplicate and stats functionality\n- **Modern Bootstrap 5**: Latest Bootstrap features for responsive design\n- **API-Ready**: Structured for easy backend integration","size_bytes":6133},"api/index.php":{"content":"<?php\n/**\n * VideoHub API Router\n * Routes API requests to appropriate endpoints\n */\n\nrequire_once 'config/cors.php';\n\n// Get request path and method\n$request_uri = $_SERVER['REQUEST_URI'];\n$path = parse_url($request_uri, PHP_URL_PATH);\n$method = $_SERVER['REQUEST_METHOD'];\n\n// Remove base path if present\n$path = preg_replace('/^\\/api/', '', $path);\n\n// Route requests\nswitch (true) {\n    // Users endpoints\n    case preg_match('/^\\/users/', $path):\n        require_once 'endpoints/users.php';\n        break;\n        \n    // Videos endpoints\n    case preg_match('/^\\/videos/', $path):\n        require_once 'endpoints/videos.php';\n        break;\n        \n    // Purchases endpoints\n    case preg_match('/^\\/purchases/', $path):\n        require_once 'endpoints/purchases.php';\n        break;\n        \n    // Creator endpoints\n    case preg_match('/^\\/creator/', $path):\n        require_once 'endpoints/creator.php';\n        break;\n        \n    // Admin endpoints\n    case preg_match('/^\\/admin/', $path):\n        require_once 'endpoints/admin.php';\n        break;\n        \n    // Health check\n    case $path === '/' || $path === '/health':\n        http_response_code(200);\n        echo json_encode([\n            'success' => true,\n            'message' => 'VideoHub API is running',\n            'version' => '1.0.0',\n            'timestamp' => date('c')\n        ]);\n        break;\n        \n    // Default - not found\n    default:\n        http_response_code(404);\n        echo json_encode([\n            'success' => false,\n            'message' => 'Endpoint not found',\n            'path' => $path\n        ]);\n        break;\n}\n?>","size_bytes":1628},"api/config/cors.php":{"content":"<?php\n/**\n * CORS Configuration for VideoHub API\n */\n\n// Allow cross-origin requests\nheader(\"Access-Control-Allow-Origin: *\");\nheader(\"Access-Control-Allow-Methods: GET, POST, PUT, DELETE, OPTIONS\");\nheader(\"Access-Control-Allow-Headers: Content-Type, Authorization, X-Requested-With\");\n\n// Handle preflight OPTIONS requests\nif ($_SERVER['REQUEST_METHOD'] == 'OPTIONS') {\n    http_response_code(200);\n    exit();\n}\n\n// Set content type to JSON\nheader(\"Content-Type: application/json; charset=UTF-8\");\n?>","size_bytes":503},"api/config/database.php":{"content":"<?php\n/**\n * Database Configuration for VideoHub\n */\n\nclass Database {\n    private $host;\n    private $db_name;\n    private $username;\n    private $password;\n    public $conn;\n    \n    public function __construct() {\n        // Use environment variables if available, fallback to original values\n        $this->host = getenv('DB_HOST') ?: 'srv637.hstgr.io';\n        $this->db_name = getenv('DB_NAME') ?: 'u742355347_youtube';\n        $this->username = getenv('DB_USERNAME') ?: 'u742355347_youtube';\n        $this->password = getenv('DB_PASSWORD') ?: 'Arona1@1@1@1';\n    }\n\n    public function getConnection() {\n        $this->conn = null;\n\n        try {\n            $this->conn = new PDO(\n                \"mysql:host=\" . $this->host . \";dbname=\" . $this->db_name . \";charset=utf8\",\n                $this->username,\n                $this->password\n            );\n            \n            // Set PDO error mode to exception\n            $this->conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);\n            \n            // Set default fetch mode to associative array\n            $this->conn->setAttribute(PDO::ATTR_DEFAULT_FETCH_MODE, PDO::FETCH_ASSOC);\n            \n        } catch(PDOException $exception) {\n            error_log(\"Connection error: \" . $exception->getMessage());\n            throw new Exception(\"Database connection failed\");\n        }\n\n        return $this->conn;\n    }\n}\n?>","size_bytes":1403},"api/debug/check_db_structure.php":{"content":"<?php\nrequire_once __DIR__ . '/../config/database.php';\n\n$database = new Database();\n$pdo = $database->getConnection();\n\necho \"=== Database Structure Check ===\\n\\n\";\n\n// Check users table\necho \"USERS TABLE:\\n\";\ntry {\n    $stmt = $pdo->query(\"DESCRIBE users\");\n    while ($row = $stmt->fetch(PDO::FETCH_ASSOC)) {\n        echo \"  \" . $row['Field'] . \" (\" . $row['Type'] . \")\\n\";\n    }\n} catch (Exception $e) {\n    echo \"Error: \" . $e->getMessage() . \"\\n\";\n}\n\necho \"\\nVIDEOS TABLE:\\n\";\ntry {\n    $stmt = $pdo->query(\"DESCRIBE videos\");\n    while ($row = $stmt->fetch(PDO::FETCH_ASSOC)) {\n        echo \"  \" . $row['Field'] . \" (\" . $row['Type'] . \")\\n\";\n    }\n} catch (Exception $e) {\n    echo \"Error: \" . $e->getMessage() . \"\\n\";\n}\n\necho \"\\nPURCHASES TABLE:\\n\";\ntry {\n    $stmt = $pdo->query(\"DESCRIBE purchases\");\n    while ($row = $stmt->fetch(PDO::FETCH_ASSOC)) {\n        echo \"  \" . $row['Field'] . \" (\" . $row['Type'] . \")\\n\";\n    }\n} catch (Exception $e) {\n    echo \"Error: \" . $e->getMessage() . \"\\n\";\n}\n\necho \"\\n=== Sample Data ===\\n\\n\";\n\necho \"USERS SAMPLE:\\n\";\ntry {\n    $stmt = $pdo->query(\"SELECT * FROM users LIMIT 2\");\n    while ($row = $stmt->fetch(PDO::FETCH_ASSOC)) {\n        echo \"  ID: \" . $row['id'] . \", Columns: \" . implode(', ', array_keys($row)) . \"\\n\";\n    }\n} catch (Exception $e) {\n    echo \"Error: \" . $e->getMessage() . \"\\n\";\n}\n?>","size_bytes":1356},"api/endpoints/admin.php":{"content":"<?php\nrequire_once __DIR__ . '/../config/database.php';\nrequire_once __DIR__ . '/../config/cors.php';\n\nheader('Content-Type: application/json');\n\n// Get database connection\n$database = new Database();\n$pdo = $database->getConnection();\n\ntry {\n    $method = $_SERVER['REQUEST_METHOD'];\n    $uri = $_SERVER['REQUEST_URI'];\n    \n    // Parse the URI to get the endpoint\n    $path = parse_url($uri, PHP_URL_PATH);\n    $pathSegments = explode('/', trim($path, '/'));\n    \n    switch ($method) {\n        case 'GET':\n            if (end($pathSegments) === 'users') {\n                // Get all users for admin panel\n                $stmt = $pdo->query(\"\n                    SELECT \n                        id,\n                        name,\n                        email,\n                        role as user_type,\n                        created_at,\n                        'active' as status\n                    FROM users \n                    ORDER BY created_at DESC\n                \");\n                \n                $users = $stmt->fetchAll(PDO::FETCH_ASSOC);\n                \n                // Format dates and add additional fields for admin display\n                foreach ($users as &$user) {\n                    $user['joinDate'] = date('M d, Y', strtotime($user['created_at']));\n                    $user['username'] = $user['name']; // Use name as username\n                    $user['role'] = $user['user_type'];\n                    $user['lastActive'] = 'Recently'; // Placeholder since we don't track this\n                }\n                \n                echo json_encode([\n                    'success' => true,\n                    'data' => $users\n                ]);\n                \n            } else {\n                http_response_code(404);\n                echo json_encode(['error' => 'Endpoint not found']);\n            }\n            break;\n            \n        default:\n            http_response_code(405);\n            echo json_encode(['error' => 'Method not allowed']);\n            break;\n    }\n    \n} catch (Exception $e) {\n    http_response_code(500);\n    echo json_encode(['error' => 'Database error: ' . $e->getMessage()]);\n}\n?>","size_bytes":2157},"api/endpoints/creator.php":{"content":"<?php\n/**\n * Creator API Endpoints for VideoHub\n */\n\nrequire_once __DIR__ . '/../config/cors.php';\nrequire_once __DIR__ . '/../config/database.php';\nrequire_once __DIR__ . '/../models/Video.php';\nrequire_once __DIR__ . '/../models/User.php';\n\n// Get database connection\n$database = new Database();\n$db = $database->getConnection();\n\n// Get request method and path\n$method = $_SERVER['REQUEST_METHOD'];\n$path = parse_url($_SERVER['REQUEST_URI'], PHP_URL_PATH);\n$path_parts = explode('/', trim($path, '/'));\n\ntry {\n    switch ($method) {\n        case 'GET':\n            if (isset($path_parts[2]) && $path_parts[2] === 'stats') {\n                // Get creator stats\n                $video = new Video($db);\n                $stats = $video->getCreatorStats();\n                \n                http_response_code(200);\n                echo json_encode([\n                    'success' => true,\n                    'data' => $stats\n                ]);\n            } elseif (isset($path_parts[2]) && $path_parts[2] === 'videos') {\n                // Get creator videos\n                $video = new Video($db);\n                \n                $filters = [];\n                if (isset($_GET['uploader_id'])) {\n                    $filters['uploader_id'] = $_GET['uploader_id'];\n                }\n                \n                $videos = $video->readAll($filters);\n                \n                http_response_code(200);\n                echo json_encode([\n                    'success' => true,\n                    'data' => ['videos' => $videos]\n                ]);\n            } elseif (isset($path_parts[2]) && $path_parts[2] === 'earnings') {\n                // Get creator earnings\n                $video = new Video($db);\n                $earnings = $video->getCreatorEarnings();\n                \n                http_response_code(200);\n                echo json_encode([\n                    'success' => true,\n                    'data' => ['earnings' => $earnings]\n                ]);\n            } else {\n                http_response_code(404);\n                echo json_encode([\n                    'success' => false,\n                    'message' => 'Creator endpoint not found'\n                ]);\n            }\n            break;\n            \n        default:\n            http_response_code(405);\n            echo json_encode([\n                'success' => false,\n                'message' => 'Method not allowed'\n            ]);\n            break;\n    }\n} catch (Exception $e) {\n    http_response_code(500);\n    echo json_encode([\n        'success' => false,\n        'message' => 'Server error: ' . $e->getMessage()\n    ]);\n}\n?>","size_bytes":2640},"api/endpoints/purchases.php":{"content":"<?php\n/**\n * Purchases API Endpoints for VideoHub\n */\n\nrequire_once __DIR__ . '/../config/cors.php';\nrequire_once __DIR__ . '/../config/database.php';\nrequire_once __DIR__ . '/../models/Purchase.php';\n\n// Get database connection\n$database = new Database();\n$db = $database->getConnection();\n\n// Initialize purchase object\n$purchase = new Purchase($db);\n\n// Get request method and path\n$method = $_SERVER['REQUEST_METHOD'];\n$path = parse_url($_SERVER['REQUEST_URI'], PHP_URL_PATH);\n$path_parts = explode('/', trim($path, '/'));\n\ntry {\n    switch ($method) {\n        case 'GET':\n            if (isset($path_parts[2]) && is_numeric($path_parts[2])) {\n                // Get specific purchase\n                $purchase->id = $path_parts[2];\n                if ($purchase->readOne()) {\n                    http_response_code(200);\n                    echo json_encode([\n                        'success' => true,\n                        'data' => [\n                            'id' => $purchase->id,\n                            'viewer_id' => $purchase->viewer_id,\n                            'video_id' => $purchase->video_id,\n                            'amount' => $purchase->amount,\n                            'payment_method' => $purchase->payment_method,\n                            'transaction_id' => $purchase->transaction_id,\n                            'status' => $purchase->status,\n                            'purchase_date' => $purchase->purchase_date\n                        ]\n                    ]);\n                } else {\n                    http_response_code(404);\n                    echo json_encode([\n                        'success' => false,\n                        'message' => 'Purchase not found'\n                    ]);\n                }\n            } else {\n                // Get all purchases with filters\n                $filters = [];\n                \n                if (isset($_GET['viewer_id'])) {\n                    $filters['user_id'] = $_GET['viewer_id'];\n                }\n                \n                if (isset($_GET['video_id'])) {\n                    $filters['video_id'] = $_GET['video_id'];\n                }\n                \n                if (isset($_GET['status'])) {\n                    $filters['status'] = $_GET['status'];\n                }\n                \n                if (isset($_GET['limit'])) {\n                    $filters['limit'] = (int)$_GET['limit'];\n                }\n                \n                if (isset($_GET['offset'])) {\n                    $filters['offset'] = (int)$_GET['offset'];\n                }\n\n                // For demo purposes, return sample purchase data until database table is set up\n                $purchases = [\n                    [\n                        'id' => 1,\n                        'viewerId' => 2,\n                        'videoId' => 1,\n                        'amount' => 0,\n                        'status' => 'completed',\n                        'purchaseDate' => '2025-08-12',\n                        'paymentMethod' => 'card'\n                    ],\n                    [\n                        'id' => 2,\n                        'viewerId' => 2,\n                        'videoId' => 3,\n                        'amount' => 60,\n                        'status' => 'completed',\n                        'purchaseDate' => '2025-08-11',\n                        'paymentMethod' => 'paypal'\n                    ]\n                ];\n                \n                http_response_code(200);\n                echo json_encode([\n                    'success' => true,\n                    'data' => ['purchases' => $purchases]\n                ]);\n            }\n            break;\n\n        case 'POST':\n            // Create new purchase\n            $data = json_decode(file_get_contents(\"php://input\"), true);\n            \n            if (!empty($data['viewer_id']) && !empty($data['video_id']) && !empty($data['amount'])) {\n                $purchase->viewer_id = $data['viewer_id'];\n                $purchase->video_id = $data['video_id'];\n                $purchase->amount = $data['amount'];\n                $purchase->payment_method = $data['payment_method'] ?? 'card';\n                $purchase->transaction_id = $data['transaction_id'] ?? uniqid('txn_');\n                $purchase->status = $data['status'] ?? 'completed';\n                \n                if ($purchase->create()) {\n                    http_response_code(201);\n                    echo json_encode([\n                        'success' => true,\n                        'message' => 'Purchase created successfully',\n                        'data' => [\n                            'id' => $purchase->id,\n                            'transaction_id' => $purchase->transaction_id\n                        ]\n                    ]);\n                } else {\n                    http_response_code(400);\n                    echo json_encode([\n                        'success' => false,\n                        'message' => 'Unable to create purchase'\n                    ]);\n                }\n            } else {\n                http_response_code(400);\n                echo json_encode([\n                    'success' => false,\n                    'message' => 'Missing required fields: viewer_id, video_id, amount'\n                ]);\n            }\n            break;\n\n        default:\n            http_response_code(405);\n            echo json_encode([\n                'success' => false,\n                'message' => 'Method not allowed'\n            ]);\n            break;\n    }\n} catch (Exception $e) {\n    http_response_code(500);\n    echo json_encode([\n        'success' => false,\n        'message' => 'Server error: ' . $e->getMessage()\n    ]);\n}\n?>","size_bytes":5727},"api/endpoints/users.php":{"content":"<?php\n/**\n * Users API Endpoints for VideoHub\n */\n\nrequire_once __DIR__ . '/../config/cors.php';\nrequire_once __DIR__ . '/../config/database.php';\nrequire_once __DIR__ . '/../models/User.php';\n\n// Get database connection\n$database = new Database();\n$db = $database->getConnection();\n\n// Initialize user object\n$user = new User($db);\n\n// Get request method and path\n$method = $_SERVER['REQUEST_METHOD'];\n$path = parse_url($_SERVER['REQUEST_URI'], PHP_URL_PATH);\n$path_parts = explode('/', trim($path, '/'));\n\ntry {\n    switch ($method) {\n        case 'GET':\n            if (isset($path_parts[2]) && $path_parts[2] === 'profile') {\n                // Get user profile (demo endpoint)\n                http_response_code(200);\n                echo json_encode([\n                    'success' => true,\n                    'data' => [\n                        'id' => 1,\n                        'firstName' => 'John',\n                        'lastName' => 'Doe',\n                        'email' => 'john@example.com',\n                        'role' => 'viewer',\n                        'status' => 'active'\n                    ]\n                ]);\n            } elseif (isset($path_parts[2]) && is_numeric($path_parts[2])) {\n                // Get specific user\n                $user->id = $path_parts[2];\n                if ($user->readOne()) {\n                    http_response_code(200);\n                    echo json_encode([\n                        'success' => true,\n                        'data' => [\n                            'id' => $user->id,\n                            'name' => $user->name,\n                            'email' => $user->email,\n                            'role' => $user->role,\n                            'status' => $user->status,\n                            'created_at' => $user->created_at,\n                            'updated_at' => $user->updated_at\n                        ]\n                    ]);\n                } else {\n                    http_response_code(404);\n                    echo json_encode([\n                        'success' => false,\n                        'message' => 'User not found'\n                    ]);\n                }\n            } else {\n                // Get all users with filters\n                $filters = [];\n                \n                if (isset($_GET['role'])) {\n                    $filters['role'] = $_GET['role'];\n                }\n                \n                if (isset($_GET['status'])) {\n                    $filters['status'] = $_GET['status'];\n                }\n                \n                if (isset($_GET['search'])) {\n                    $filters['search'] = $_GET['search'];\n                }\n                \n                if (isset($_GET['limit'])) {\n                    $filters['limit'] = (int)$_GET['limit'];\n                }\n                \n                if (isset($_GET['offset'])) {\n                    $filters['offset'] = (int)$_GET['offset'];\n                }\n\n                // Get all users from database directly\n                try {\n                    $query = \"SELECT * FROM users ORDER BY id ASC\";\n                    $stmt = $db->prepare($query);\n                    $stmt->execute();\n                    $users = $stmt->fetchAll(PDO::FETCH_ASSOC);\n                    \n                    // Format users data to match frontend expectations\n                    $formattedUsers = [];\n                    foreach ($users as $userData) {\n                        $formattedUsers[] = [\n                            'id' => (int)$userData['id'],\n                            'firstName' => $userData['name'] ?? 'Unknown',\n                            'lastName' => '', // Not available in current schema\n                            'email' => $userData['email'] ?? 'unknown@example.com',\n                            'role' => $userData['role'] ?? 'viewer',\n                            'status' => $userData['email_verified'] ? 'active' : 'pending',\n                            'joinDate' => date('Y-m-d', strtotime($userData['created_at'] ?? 'now')),\n                            'profileImage' => 'https://via.placeholder.com/40x40/6c757d/ffffff?text=U'\n                        ];\n                    }\n\n                    http_response_code(200);\n                    echo json_encode([\n                        'success' => true,\n                        'users' => $formattedUsers\n                    ]);\n                } catch (Exception $e) {\n                    http_response_code(500);\n                    echo json_encode([\n                        'success' => false,\n                        'message' => 'Server error: ' . $e->getMessage()\n                    ]);\n                }\n            }\n            break;\n\n        case 'POST':\n            // Create new user\n            $data = json_decode(file_get_contents(\"php://input\"), true);\n            \n            if (!empty($data['name']) && !empty($data['email']) && !empty($data['role'])) {\n                $user->name = $data['name'];\n                $user->email = $data['email'];\n                $user->role = $data['role'];\n                $user->status = isset($data['status']) ? $data['status'] : 'active';\n                \n                if ($user->create()) {\n                    http_response_code(201);\n                    echo json_encode([\n                        'success' => true,\n                        'message' => 'User created successfully',\n                        'data' => [\n                            'id' => $user->id,\n                            'name' => $user->name,\n                            'email' => $user->email,\n                            'role' => $user->role,\n                            'status' => $user->status\n                        ]\n                    ]);\n                } else {\n                    http_response_code(400);\n                    echo json_encode([\n                        'success' => false,\n                        'message' => 'Unable to create user'\n                    ]);\n                }\n            } else {\n                http_response_code(400);\n                echo json_encode([\n                    'success' => false,\n                    'message' => 'Missing required fields: name, email, role'\n                ]);\n            }\n            break;\n\n        case 'PUT':\n            // Update user\n            if (isset($path_parts[2]) && is_numeric($path_parts[2])) {\n                $data = json_decode(file_get_contents(\"php://input\"), true);\n                \n                $user->id = $path_parts[2];\n                \n                if (!empty($data['name']) && !empty($data['email']) && !empty($data['role'])) {\n                    $user->name = $data['name'];\n                    $user->email = $data['email'];\n                    $user->role = $data['role'];\n                    $user->status = isset($data['status']) ? $data['status'] : 'active';\n                    \n                    if ($user->update()) {\n                        http_response_code(200);\n                        echo json_encode([\n                            'success' => true,\n                            'message' => 'User updated successfully'\n                        ]);\n                    } else {\n                        http_response_code(400);\n                        echo json_encode([\n                            'success' => false,\n                            'message' => 'Unable to update user'\n                        ]);\n                    }\n                } else {\n                    http_response_code(400);\n                    echo json_encode([\n                        'success' => false,\n                        'message' => 'Missing required fields: name, email, role'\n                    ]);\n                }\n            } else {\n                http_response_code(400);\n                echo json_encode([\n                    'success' => false,\n                    'message' => 'User ID is required'\n                ]);\n            }\n            break;\n\n        case 'DELETE':\n            // Delete user\n            if (isset($path_parts[2]) && is_numeric($path_parts[2])) {\n                $user->id = $path_parts[2];\n                \n                if ($user->delete()) {\n                    http_response_code(200);\n                    echo json_encode([\n                        'success' => true,\n                        'message' => 'User deleted successfully'\n                    ]);\n                } else {\n                    http_response_code(400);\n                    echo json_encode([\n                        'success' => false,\n                        'message' => 'Unable to delete user'\n                    ]);\n                }\n            } else {\n                http_response_code(400);\n                echo json_encode([\n                    'success' => false,\n                    'message' => 'User ID is required'\n                ]);\n            }\n            break;\n\n        default:\n            http_response_code(405);\n            echo json_encode([\n                'success' => false,\n                'message' => 'Method not allowed'\n            ]);\n            break;\n    }\n} catch (Exception $e) {\n    http_response_code(500);\n    echo json_encode([\n        'success' => false,\n        'message' => 'Server error: ' . $e->getMessage()\n    ]);\n}\n?>","size_bytes":9351},"api/endpoints/videos.php":{"content":"<?php\n/**\n * Videos API Endpoints for VideoHub\n */\n\nrequire_once __DIR__ . '/../config/cors.php';\nrequire_once __DIR__ . '/../config/database.php';\nrequire_once __DIR__ . '/../models/Video.php';\n\n// Get database connection\n$database = new Database();\n$db = $database->getConnection();\n\n// Initialize video object\n$video = new Video($db);\n\n// Get request method and path\n$method = $_SERVER['REQUEST_METHOD'];\n$path = parse_url($_SERVER['REQUEST_URI'], PHP_URL_PATH);\n$path_parts = explode('/', trim($path, '/'));\n\ntry {\n    switch ($method) {\n        case 'GET':\n            if (isset($path_parts[2]) && is_numeric($path_parts[2])) {\n                // Get specific video\n                $video->id = $path_parts[2];\n                if ($video->readOne()) {\n                    http_response_code(200);\n                    echo json_encode([\n                        'success' => true,\n                        'data' => [\n                            'id' => $video->id,\n                            'title' => $video->title,\n                            'description' => $video->description,\n                            'creator_id' => $video->creator_id,\n                            'creator_name' => $video->creator_name,\n                            'price' => $video->price,\n                            'category' => $video->category,\n                            'duration' => $video->duration,\n                            'upload_date' => $video->upload_date,\n                            'views' => $video->views,\n                            'likes' => $video->likes,\n                            'status' => $video->status,\n                            'thumbnail' => $video->thumbnail,\n                            'earnings' => $video->earnings,\n                            'tags' => $video->tags,\n                            'file_size' => $video->file_size,\n                            'quality' => $video->quality\n                        ]\n                    ]);\n                } else {\n                    http_response_code(404);\n                    echo json_encode([\n                        'success' => false,\n                        'message' => 'Video not found'\n                    ]);\n                }\n            } else {\n                // Get all videos with filters\n                $filters = [];\n                \n                if (isset($_GET['uploader_id'])) {\n                    $filters['uploader_id'] = $_GET['uploader_id'];\n                }\n                \n                if (isset($_GET['category'])) {\n                    $filters['category'] = $_GET['category'];\n                }\n                \n\n                \n                if (isset($_GET['search'])) {\n                    $filters['search'] = $_GET['search'];\n                }\n                \n                if (isset($_GET['limit'])) {\n                    $filters['limit'] = (int)$_GET['limit'];\n                }\n                \n                if (isset($_GET['offset'])) {\n                    $filters['offset'] = (int)$_GET['offset'];\n                }\n\n                $stmt = $video->read($filters);\n                $videos = $stmt->fetchAll(PDO::FETCH_ASSOC);\n                \n                // Format videos data to match existing database structure\n                $formattedVideos = [];\n                foreach ($videos as $videoData) {\n                    $formattedVideos[] = [\n                        'id' => (int)$videoData['id'],\n                        'title' => $videoData['title'],\n                        'description' => $videoData['description'],\n                        'creatorId' => (int)($videoData['uploader_id'] ?? 0),\n                        'creatorName' => $videoData['youtube_channel_title'] ?? 'Unknown Creator',\n                        'price' => (float)$videoData['price'],\n                        'category' => $videoData['category'],\n                        'duration' => '00:00', // Not available in current DB\n                        'uploadDate' => date('Y-m-d', strtotime($videoData['created_at'])),\n                        'views' => (int)$videoData['views'],\n                        'likes' => (int)($videoData['youtube_likes'] ?? 0),\n                        'status' => 'published', // Default status\n                        'thumbnail' => $videoData['youtube_thumbnail'] ?? 'https://via.placeholder.com/300x169/4f46e5/ffffff?text=Video',\n                        'earnings' => 0, // Calculate separately if needed\n                        'tags' => [], // Not available in current DB structure\n                        'fileSize' => 'N/A',\n                        'quality' => '720p'\n                    ];\n                }\n\n                http_response_code(200);\n                echo json_encode([\n                    'success' => true,\n                    'data' => ['videos' => $formattedVideos]\n                ]);\n            }\n            break;\n\n        case 'POST':\n            if (isset($path_parts[2]) && $path_parts[2] === 'view' && isset($path_parts[3])) {\n                // Increment view count\n                $video->id = $path_parts[3];\n                if ($video->incrementViews()) {\n                    http_response_code(200);\n                    echo json_encode([\n                        'success' => true,\n                        'message' => 'View count updated'\n                    ]);\n                } else {\n                    http_response_code(400);\n                    echo json_encode([\n                        'success' => false,\n                        'message' => 'Unable to update view count'\n                    ]);\n                }\n            } elseif (isset($path_parts[2]) && $path_parts[2] === 'like' && isset($path_parts[3])) {\n                // Increment like count\n                $video->id = $path_parts[3];\n                if ($video->incrementLikes()) {\n                    http_response_code(200);\n                    echo json_encode([\n                        'success' => true,\n                        'message' => 'Like count updated'\n                    ]);\n                } else {\n                    http_response_code(400);\n                    echo json_encode([\n                        'success' => false,\n                        'message' => 'Unable to update like count'\n                    ]);\n                }\n            } else {\n                // Create new video\n                $data = json_decode(file_get_contents(\"php://input\"), true);\n                \n                if (!empty($data['title']) && !empty($data['creator_id'])) {\n                    $video->title = $data['title'];\n                    $video->description = $data['description'] ?? '';\n                    $video->creator_id = $data['creator_id'];\n                    $video->price = $data['price'] ?? 0;\n                    $video->category = $data['category'] ?? '';\n                    $video->duration = $data['duration'] ?? '00:00';\n                    $video->thumbnail = $data['thumbnail'] ?? '';\n                    $video->tags = is_array($data['tags']) ? json_encode($data['tags']) : $data['tags'];\n                    $video->file_size = $data['file_size'] ?? '';\n                    $video->quality = $data['quality'] ?? '720p';\n                    $video->status = $data['status'] ?? 'pending';\n                    \n                    if ($video->create()) {\n                        http_response_code(201);\n                        echo json_encode([\n                            'success' => true,\n                            'message' => 'Video created successfully',\n                            'data' => [\n                                'id' => $video->id\n                            ]\n                        ]);\n                    } else {\n                        http_response_code(400);\n                        echo json_encode([\n                            'success' => false,\n                            'message' => 'Unable to create video'\n                        ]);\n                    }\n                } else {\n                    http_response_code(400);\n                    echo json_encode([\n                        'success' => false,\n                        'message' => 'Missing required fields: title, creator_id'\n                    ]);\n                }\n            }\n            break;\n\n        case 'PUT':\n            // Update video\n            if (isset($path_parts[2]) && is_numeric($path_parts[2])) {\n                $data = json_decode(file_get_contents(\"php://input\"), true);\n                \n                $video->id = $path_parts[2];\n                \n                if (!empty($data['title'])) {\n                    $video->title = $data['title'];\n                    $video->description = $data['description'] ?? '';\n                    $video->price = $data['price'] ?? 0;\n                    $video->category = $data['category'] ?? '';\n                    $video->duration = $data['duration'] ?? '00:00';\n                    $video->thumbnail = $data['thumbnail'] ?? '';\n                    $video->tags = is_array($data['tags']) ? json_encode($data['tags']) : $data['tags'];\n                    $video->file_size = $data['file_size'] ?? '';\n                    $video->quality = $data['quality'] ?? '720p';\n                    $video->status = $data['status'] ?? 'pending';\n                    \n                    if ($video->update()) {\n                        http_response_code(200);\n                        echo json_encode([\n                            'success' => true,\n                            'message' => 'Video updated successfully'\n                        ]);\n                    } else {\n                        http_response_code(400);\n                        echo json_encode([\n                            'success' => false,\n                            'message' => 'Unable to update video'\n                        ]);\n                    }\n                } else {\n                    http_response_code(400);\n                    echo json_encode([\n                        'success' => false,\n                        'message' => 'Missing required field: title'\n                    ]);\n                }\n            } else {\n                http_response_code(400);\n                echo json_encode([\n                    'success' => false,\n                    'message' => 'Video ID is required'\n                ]);\n            }\n            break;\n\n        case 'DELETE':\n            // Delete video\n            if (isset($path_parts[2]) && is_numeric($path_parts[2])) {\n                $video->id = $path_parts[2];\n                \n                if ($video->delete()) {\n                    http_response_code(200);\n                    echo json_encode([\n                        'success' => true,\n                        'message' => 'Video deleted successfully'\n                    ]);\n                } else {\n                    http_response_code(400);\n                    echo json_encode([\n                        'success' => false,\n                        'message' => 'Unable to delete video'\n                    ]);\n                }\n            } else {\n                http_response_code(400);\n                echo json_encode([\n                    'success' => false,\n                    'message' => 'Video ID is required'\n                ]);\n            }\n            break;\n\n        default:\n            http_response_code(405);\n            echo json_encode([\n                'success' => false,\n                'message' => 'Method not allowed'\n            ]);\n            break;\n    }\n} catch (Exception $e) {\n    http_response_code(500);\n    echo json_encode([\n        'success' => false,\n        'message' => 'Server error: ' . $e->getMessage()\n    ]);\n}\n?>","size_bytes":11748},"api/models/Purchase.php":{"content":"<?php\n/**\n * Purchase Model for VideoHub\n */\n\nclass Purchase {\n    private $conn;\n    private $table_name = \"purchases\";\n\n    public $id;\n    public $viewer_id;\n    public $video_id;\n    public $amount;\n    public $payment_method;\n    public $transaction_id;\n    public $status;\n    public $purchase_date;\n    public $created_at;\n    public $updated_at;\n\n    public function __construct($db) {\n        $this->conn = $db;\n    }\n\n    // Get all purchases with optional filters\n    public function read($filters = []) {\n        $query = \"SELECT p.*, v.title as video_title, v.youtube_thumbnail as thumbnail, u.name as viewer_name\n                  FROM \" . $this->table_name . \" p\n                  LEFT JOIN videos v ON p.video_id = v.id\n                  LEFT JOIN users u ON p.user_id = u.id\";\n        \n        $conditions = [];\n        $params = [];\n\n        if (isset($filters['user_id']) && !empty($filters['user_id'])) {\n            $conditions[] = \"p.user_id = :user_id\";\n            $params[':user_id'] = $filters['user_id'];\n        }\n\n        if (isset($filters['video_id']) && !empty($filters['video_id'])) {\n            $conditions[] = \"p.video_id = :video_id\";\n            $params[':video_id'] = $filters['video_id'];\n        }\n\n        if (isset($filters['status']) && !empty($filters['status'])) {\n            $conditions[] = \"p.status = :status\";\n            $params[':status'] = $filters['status'];\n        }\n\n        if (!empty($conditions)) {\n            $query .= \" WHERE \" . implode(\" AND \", $conditions);\n        }\n\n        $query .= \" ORDER BY p.purchase_date DESC\";\n\n        // Add pagination\n        if (isset($filters['limit'])) {\n            $offset = isset($filters['offset']) ? $filters['offset'] : 0;\n            $query .= \" LIMIT :offset, :limit\";\n            $params[':offset'] = $offset;\n            $params[':limit'] = $filters['limit'];\n        }\n\n        $stmt = $this->conn->prepare($query);\n        \n        foreach ($params as $key => $value) {\n            $stmt->bindValue($key, $value, is_int($value) ? PDO::PARAM_INT : PDO::PARAM_STR);\n        }\n        \n        $stmt->execute();\n        return $stmt;\n    }\n\n    // Get single purchase by ID\n    public function readOne() {\n        $query = \"SELECT p.*, v.title as video_title, v.youtube_thumbnail as thumbnail, u.name as viewer_name\n                  FROM \" . $this->table_name . \" p\n                  LEFT JOIN videos v ON p.video_id = v.id\n                  LEFT JOIN users u ON p.user_id = u.id\n                  WHERE p.id = ? LIMIT 0,1\";\n        \n        $stmt = $this->conn->prepare($query);\n        $stmt->bindParam(1, $this->id);\n        $stmt->execute();\n\n        $row = $stmt->fetch(PDO::FETCH_ASSOC);\n\n        if ($row) {\n            $this->viewer_id = $row['viewer_id'];\n            $this->video_id = $row['video_id'];\n            $this->amount = $row['amount'];\n            $this->payment_method = $row['payment_method'];\n            $this->transaction_id = $row['transaction_id'];\n            $this->status = $row['status'];\n            $this->purchase_date = $row['purchase_date'];\n            $this->created_at = $row['created_at'];\n            $this->updated_at = $row['updated_at'];\n            return true;\n        }\n\n        return false;\n    }\n\n    // Create purchase\n    public function create() {\n        $query = \"INSERT INTO \" . $this->table_name . \" \n                  SET viewer_id=:viewer_id, video_id=:video_id, amount=:amount, \n                      payment_method=:payment_method, transaction_id=:transaction_id, \n                      status=:status, purchase_date=NOW(), created_at=NOW(), updated_at=NOW()\";\n\n        $stmt = $this->conn->prepare($query);\n\n        // Sanitize\n        $this->viewer_id = htmlspecialchars(strip_tags($this->viewer_id));\n        $this->video_id = htmlspecialchars(strip_tags($this->video_id));\n        $this->amount = htmlspecialchars(strip_tags($this->amount));\n        $this->payment_method = htmlspecialchars(strip_tags($this->payment_method));\n        $this->transaction_id = htmlspecialchars(strip_tags($this->transaction_id));\n        $this->status = htmlspecialchars(strip_tags($this->status));\n\n        // Bind values\n        $stmt->bindParam(\":viewer_id\", $this->viewer_id);\n        $stmt->bindParam(\":video_id\", $this->video_id);\n        $stmt->bindParam(\":amount\", $this->amount);\n        $stmt->bindParam(\":payment_method\", $this->payment_method);\n        $stmt->bindParam(\":transaction_id\", $this->transaction_id);\n        $stmt->bindParam(\":status\", $this->status);\n\n        if ($stmt->execute()) {\n            $this->id = $this->conn->lastInsertId();\n            return true;\n        }\n\n        return false;\n    }\n\n    // Check if user has purchased a video\n    public function hasPurchased($viewer_id, $video_id) {\n        $query = \"SELECT id FROM \" . $this->table_name . \" \n                  WHERE viewer_id = :viewer_id AND video_id = :video_id AND status = 'completed' \n                  LIMIT 1\";\n        \n        $stmt = $this->conn->prepare($query);\n        $stmt->bindParam(\":viewer_id\", $viewer_id);\n        $stmt->bindParam(\":video_id\", $video_id);\n        $stmt->execute();\n\n        return $stmt->fetch(PDO::FETCH_ASSOC) !== false;\n    }\n\n    // Get total earnings for a creator\n    public function getCreatorEarnings($creator_id) {\n        $query = \"SELECT COALESCE(SUM(p.amount), 0) as total_earnings\n                  FROM \" . $this->table_name . \" p\n                  JOIN videos v ON p.video_id = v.id\n                  WHERE v.creator_id = :creator_id AND p.status = 'completed'\";\n        \n        $stmt = $this->conn->prepare($query);\n        $stmt->bindParam(\":creator_id\", $creator_id);\n        $stmt->execute();\n\n        $row = $stmt->fetch(PDO::FETCH_ASSOC);\n        return $row['total_earnings'];\n    }\n}\n?>","size_bytes":5801},"api/models/User.php":{"content":"<?php\n/**\n * User Model for VideoHub\n */\n\nclass User {\n    private $conn;\n    private $table_name = \"users\";\n\n    public $id;\n    public $name;\n    public $email;\n    public $role;\n    public $status;\n    public $created_at;\n    public $updated_at;\n\n    public function __construct($db) {\n        $this->conn = $db;\n    }\n\n    // Get all users with optional filters\n    public function read($filters = []) {\n        $query = \"SELECT id, name, email, role, status, created_at, updated_at FROM \" . $this->table_name;\n        $conditions = [];\n        $params = [];\n\n        if (isset($filters['role']) && !empty($filters['role'])) {\n            $conditions[] = \"role = :role\";\n            $params[':role'] = $filters['role'];\n        }\n\n        if (isset($filters['status']) && !empty($filters['status'])) {\n            $conditions[] = \"status = :status\";\n            $params[':status'] = $filters['status'];\n        }\n\n        if (isset($filters['search']) && !empty($filters['search'])) {\n            $conditions[] = \"(name LIKE :search OR email LIKE :search)\";\n            $params[':search'] = '%' . $filters['search'] . '%';\n        }\n\n        if (!empty($conditions)) {\n            $query .= \" WHERE \" . implode(\" AND \", $conditions);\n        }\n\n        $query .= \" ORDER BY created_at DESC\";\n\n        // Add pagination\n        if (isset($filters['limit'])) {\n            $offset = isset($filters['offset']) ? $filters['offset'] : 0;\n            $query .= \" LIMIT :offset, :limit\";\n            $params[':offset'] = $offset;\n            $params[':limit'] = $filters['limit'];\n        }\n\n        $stmt = $this->conn->prepare($query);\n        \n        foreach ($params as $key => $value) {\n            $stmt->bindValue($key, $value, is_int($value) ? PDO::PARAM_INT : PDO::PARAM_STR);\n        }\n        \n        $stmt->execute();\n        return $stmt;\n    }\n\n    // Get single user by ID\n    public function readOne() {\n        $query = \"SELECT id, name, email, role, status, created_at, updated_at FROM \" . $this->table_name . \" WHERE id = ? LIMIT 0,1\";\n        $stmt = $this->conn->prepare($query);\n        $stmt->bindParam(1, $this->id);\n        $stmt->execute();\n\n        $row = $stmt->fetch(PDO::FETCH_ASSOC);\n\n        if ($row) {\n            $this->name = $row['name'];\n            $this->email = $row['email'];\n            $this->role = $row['role'];\n            $this->status = $row['status'];\n            $this->created_at = $row['created_at'];\n            $this->updated_at = $row['updated_at'];\n            return true;\n        }\n\n        return false;\n    }\n\n    // Create user\n    public function create() {\n        $query = \"INSERT INTO \" . $this->table_name . \" SET name=:name, email=:email, role=:role, status=:status, created_at=NOW(), updated_at=NOW()\";\n\n        $stmt = $this->conn->prepare($query);\n\n        // Sanitize\n        $this->name = htmlspecialchars(strip_tags($this->name));\n        $this->email = htmlspecialchars(strip_tags($this->email));\n        $this->role = htmlspecialchars(strip_tags($this->role));\n        $this->status = htmlspecialchars(strip_tags($this->status));\n\n        // Bind values\n        $stmt->bindParam(\":name\", $this->name);\n        $stmt->bindParam(\":email\", $this->email);\n        $stmt->bindParam(\":role\", $this->role);\n        $stmt->bindParam(\":status\", $this->status);\n\n        if ($stmt->execute()) {\n            $this->id = $this->conn->lastInsertId();\n            return true;\n        }\n\n        return false;\n    }\n\n    // Update user\n    public function update() {\n        $query = \"UPDATE \" . $this->table_name . \" SET name=:name, email=:email, role=:role, status=:status, updated_at=NOW() WHERE id=:id\";\n\n        $stmt = $this->conn->prepare($query);\n\n        // Sanitize\n        $this->name = htmlspecialchars(strip_tags($this->name));\n        $this->email = htmlspecialchars(strip_tags($this->email));\n        $this->role = htmlspecialchars(strip_tags($this->role));\n        $this->status = htmlspecialchars(strip_tags($this->status));\n        $this->id = htmlspecialchars(strip_tags($this->id));\n\n        // Bind values\n        $stmt->bindParam(\":name\", $this->name);\n        $stmt->bindParam(\":email\", $this->email);\n        $stmt->bindParam(\":role\", $this->role);\n        $stmt->bindParam(\":status\", $this->status);\n        $stmt->bindParam(\":id\", $this->id);\n\n        if ($stmt->execute()) {\n            return true;\n        }\n\n        return false;\n    }\n\n    // Delete user\n    public function delete() {\n        $query = \"DELETE FROM \" . $this->table_name . \" WHERE id = ?\";\n        $stmt = $this->conn->prepare($query);\n        $stmt->bindParam(1, $this->id);\n\n        if ($stmt->execute()) {\n            return true;\n        }\n\n        return false;\n    }\n\n    // Get total count for pagination\n    public function count($filters = []) {\n        $query = \"SELECT COUNT(*) as total FROM \" . $this->table_name;\n        $conditions = [];\n        $params = [];\n\n        if (isset($filters['role']) && !empty($filters['role'])) {\n            $conditions[] = \"role = :role\";\n            $params[':role'] = $filters['role'];\n        }\n\n        if (isset($filters['status']) && !empty($filters['status'])) {\n            $conditions[] = \"status = :status\";\n            $params[':status'] = $filters['status'];\n        }\n\n        if (isset($filters['search']) && !empty($filters['search'])) {\n            $conditions[] = \"(name LIKE :search OR email LIKE :search)\";\n            $params[':search'] = '%' . $filters['search'] . '%';\n        }\n\n        if (!empty($conditions)) {\n            $query .= \" WHERE \" . implode(\" AND \", $conditions);\n        }\n\n        $stmt = $this->conn->prepare($query);\n        \n        foreach ($params as $key => $value) {\n            $stmt->bindValue($key, $value);\n        }\n        \n        $stmt->execute();\n        $row = $stmt->fetch(PDO::FETCH_ASSOC);\n        \n        return $row['total'];\n    }\n}\n?>","size_bytes":5905},"api/models/Video.php":{"content":"<?php\n/**\n * Video Model for VideoHub\n */\n\nclass Video {\n    private $conn;\n    private $table_name = \"videos\";\n\n    public $id;\n    public $title;\n    public $description;\n    public $uploader_id;\n    public $uploader_name;\n    public $price;\n    public $category;\n    public $file_path;\n    public $youtube_id;\n    public $youtube_thumbnail;\n    public $is_youtube_synced;\n    public $youtube_channel_id;\n    public $youtube_channel_title;\n    public $youtube_views;\n    public $youtube_likes;\n    public $youtube_comments;\n    public $views;\n    public $likes;\n    public $status;\n    public $thumbnail;\n    public $earnings;\n    public $tags;\n    public $file_size;\n    public $quality;\n    public $created_at;\n    public $updated_at;\n\n    public function __construct($db) {\n        $this->conn = $db;\n    }\n\n    // Get all videos with optional filters\n    public function read($filters = []) {\n        $query = \"SELECT * FROM \" . $this->table_name;\n        \n        $conditions = [];\n        $params = [];\n\n        if (isset($filters['uploader_id']) && !empty($filters['uploader_id'])) {\n            $conditions[] = \"uploader_id = :uploader_id\";\n            $params[':uploader_id'] = $filters['uploader_id'];\n        }\n\n        if (isset($filters['category']) && !empty($filters['category'])) {\n            $conditions[] = \"category = :category\";\n            $params[':category'] = $filters['category'];\n        }\n\n        if (isset($filters['search']) && !empty($filters['search'])) {\n            $conditions[] = \"(title LIKE :search OR description LIKE :search)\";\n            $params[':search'] = '%' . $filters['search'] . '%';\n        }\n\n        if (!empty($conditions)) {\n            $query .= \" WHERE \" . implode(\" AND \", $conditions);\n        }\n\n        $query .= \" ORDER BY created_at DESC\";\n\n        // Add pagination\n        if (isset($filters['limit'])) {\n            $offset = isset($filters['offset']) ? $filters['offset'] : 0;\n            $query .= \" LIMIT :offset, :limit\";\n            $params[':offset'] = $offset;\n            $params[':limit'] = $filters['limit'];\n        }\n\n        $stmt = $this->conn->prepare($query);\n        \n        foreach ($params as $key => $value) {\n            $stmt->bindValue($key, $value, is_int($value) ? PDO::PARAM_INT : PDO::PARAM_STR);\n        }\n        \n        $stmt->execute();\n        return $stmt;\n    }\n\n    // Get single video by ID\n    public function readOne() {\n        $query = \"SELECT * FROM \" . $this->table_name . \" WHERE id = ? LIMIT 0,1\";\n        \n        $stmt = $this->conn->prepare($query);\n        $stmt->bindParam(1, $this->id);\n        $stmt->execute();\n\n        $row = $stmt->fetch(PDO::FETCH_ASSOC);\n\n        if ($row) {\n            $this->title = $row['title'];\n            $this->description = $row['description'];\n            $this->creator_id = $row['creator_id'];\n            $this->creator_name = $row['creator_name'];\n            $this->price = $row['price'];\n            $this->category = $row['category'];\n            $this->duration = $row['duration'];\n            $this->upload_date = $row['upload_date'];\n            $this->views = $row['views'];\n            $this->likes = $row['likes'];\n            $this->status = $row['status'];\n            $this->thumbnail = $row['thumbnail'];\n            $this->earnings = $row['earnings'];\n            $this->tags = $row['tags'];\n            $this->file_size = $row['file_size'];\n            $this->quality = $row['quality'];\n            $this->created_at = $row['created_at'];\n            $this->updated_at = $row['updated_at'];\n            return true;\n        }\n\n        return false;\n    }\n\n    // Create video\n    public function create() {\n        $query = \"INSERT INTO \" . $this->table_name . \" \n                  SET title=:title, description=:description, creator_id=:creator_id, \n                      price=:price, category=:category, duration=:duration, \n                      thumbnail=:thumbnail, tags=:tags, file_size=:file_size, \n                      quality=:quality, status=:status, upload_date=NOW(), \n                      created_at=NOW(), updated_at=NOW()\";\n\n        $stmt = $this->conn->prepare($query);\n\n        // Sanitize\n        $this->title = htmlspecialchars(strip_tags($this->title));\n        $this->description = htmlspecialchars(strip_tags($this->description));\n        $this->creator_id = htmlspecialchars(strip_tags($this->creator_id));\n        $this->price = htmlspecialchars(strip_tags($this->price));\n        $this->category = htmlspecialchars(strip_tags($this->category));\n        $this->duration = htmlspecialchars(strip_tags($this->duration));\n        $this->thumbnail = htmlspecialchars(strip_tags($this->thumbnail));\n        $this->tags = htmlspecialchars(strip_tags($this->tags));\n        $this->file_size = htmlspecialchars(strip_tags($this->file_size));\n        $this->quality = htmlspecialchars(strip_tags($this->quality));\n        $this->status = htmlspecialchars(strip_tags($this->status));\n\n        // Bind values\n        $stmt->bindParam(\":title\", $this->title);\n        $stmt->bindParam(\":description\", $this->description);\n        $stmt->bindParam(\":creator_id\", $this->creator_id);\n        $stmt->bindParam(\":price\", $this->price);\n        $stmt->bindParam(\":category\", $this->category);\n        $stmt->bindParam(\":duration\", $this->duration);\n        $stmt->bindParam(\":thumbnail\", $this->thumbnail);\n        $stmt->bindParam(\":tags\", $this->tags);\n        $stmt->bindParam(\":file_size\", $this->file_size);\n        $stmt->bindParam(\":quality\", $this->quality);\n        $stmt->bindParam(\":status\", $this->status);\n\n        if ($stmt->execute()) {\n            $this->id = $this->conn->lastInsertId();\n            return true;\n        }\n\n        return false;\n    }\n\n    // Update video\n    public function update() {\n        $query = \"UPDATE \" . $this->table_name . \" \n                  SET title=:title, description=:description, price=:price, \n                      category=:category, duration=:duration, thumbnail=:thumbnail, \n                      tags=:tags, file_size=:file_size, quality=:quality, \n                      status=:status, updated_at=NOW() \n                  WHERE id=:id\";\n\n        $stmt = $this->conn->prepare($query);\n\n        // Sanitize\n        $this->title = htmlspecialchars(strip_tags($this->title));\n        $this->description = htmlspecialchars(strip_tags($this->description));\n        $this->price = htmlspecialchars(strip_tags($this->price));\n        $this->category = htmlspecialchars(strip_tags($this->category));\n        $this->duration = htmlspecialchars(strip_tags($this->duration));\n        $this->thumbnail = htmlspecialchars(strip_tags($this->thumbnail));\n        $this->tags = htmlspecialchars(strip_tags($this->tags));\n        $this->file_size = htmlspecialchars(strip_tags($this->file_size));\n        $this->quality = htmlspecialchars(strip_tags($this->quality));\n        $this->status = htmlspecialchars(strip_tags($this->status));\n        $this->id = htmlspecialchars(strip_tags($this->id));\n\n        // Bind values\n        $stmt->bindParam(\":title\", $this->title);\n        $stmt->bindParam(\":description\", $this->description);\n        $stmt->bindParam(\":price\", $this->price);\n        $stmt->bindParam(\":category\", $this->category);\n        $stmt->bindParam(\":duration\", $this->duration);\n        $stmt->bindParam(\":thumbnail\", $this->thumbnail);\n        $stmt->bindParam(\":tags\", $this->tags);\n        $stmt->bindParam(\":file_size\", $this->file_size);\n        $stmt->bindParam(\":quality\", $this->quality);\n        $stmt->bindParam(\":status\", $this->status);\n        $stmt->bindParam(\":id\", $this->id);\n\n        if ($stmt->execute()) {\n            return true;\n        }\n\n        return false;\n    }\n\n    // Delete video\n    public function delete() {\n        $query = \"DELETE FROM \" . $this->table_name . \" WHERE id = ?\";\n        $stmt = $this->conn->prepare($query);\n        $stmt->bindParam(1, $this->id);\n\n        if ($stmt->execute()) {\n            return true;\n        }\n\n        return false;\n    }\n\n    // Get all videos with optional filters (alias for read method)\n    public function readAll($filters = []) {\n        $stmt = $this->read($filters);\n        $videos = [];\n        \n        while ($row = $stmt->fetch(PDO::FETCH_ASSOC)) {\n            $videos[] = $row;\n        }\n        \n        return $videos;\n    }\n    \n    // Get creator statistics\n    public function getCreatorStats($creatorId = null) {\n        if (!$creatorId) {\n            $creatorId = 1; // Default creator for demo\n        }\n        \n        $query = \"SELECT \n                    COUNT(*) as totalVideos,\n                    COALESCE(SUM(views), 0) as totalViews,\n                    COALESCE(SUM(youtube_likes), 0) as totalLikes,\n                    COALESCE(SUM(CAST(price AS DECIMAL(10,2))), 0) as totalEarnings\n                  FROM \" . $this->table_name . \" \n                  WHERE uploader_id = :creator_id\";\n        \n        $stmt = $this->conn->prepare($query);\n        $stmt->bindParam(':creator_id', $creatorId);\n        $stmt->execute();\n        \n        $stats = $stmt->fetch(PDO::FETCH_ASSOC);\n        \n        return [\n            'totalVideos' => (int)$stats['totalVideos'],\n            'totalViews' => (int)$stats['totalViews'],\n            'totalLikes' => (int)$stats['totalLikes'],\n            'totalEarnings' => (float)$stats['totalEarnings']\n        ];\n    }\n    \n    // Get creator earnings\n    public function getCreatorEarnings($creatorId = null) {\n        if (!$creatorId) {\n            $creatorId = 1; // Default creator for demo\n        }\n        \n        $query = \"SELECT \n                    id,\n                    title as videoTitle,\n                    CAST(price AS DECIMAL(10,2)) as amount,\n                    created_at as date,\n                    'completed' as status\n                  FROM \" . $this->table_name . \" \n                  WHERE uploader_id = :creator_id AND CAST(price AS DECIMAL(10,2)) > 0\n                  ORDER BY created_at DESC\";\n        \n        $stmt = $this->conn->prepare($query);\n        $stmt->bindParam(':creator_id', $creatorId);\n        $stmt->execute();\n        \n        $earnings = [];\n        while ($row = $stmt->fetch(PDO::FETCH_ASSOC)) {\n            $earnings[] = [\n                'id' => $row['id'],\n                'creatorId' => $creatorId,\n                'amount' => (float)$row['amount'],\n                'date' => $row['date'],\n                'videoTitle' => $row['videoTitle'],\n                'status' => $row['status']\n            ];\n        }\n        \n        return $earnings;\n    }\n\n    // Update views count\n    public function incrementViews() {\n        $query = \"UPDATE \" . $this->table_name . \" SET views = views + 1 WHERE id = :id\";\n        $stmt = $this->conn->prepare($query);\n        $stmt->bindParam(\":id\", $this->id);\n        return $stmt->execute();\n    }\n\n    // Update likes count\n    public function incrementLikes() {\n        $query = \"UPDATE \" . $this->table_name . \" SET likes = likes + 1 WHERE id = :id\";\n        $stmt = $this->conn->prepare($query);\n        $stmt->bindParam(\":id\", $this->id);\n        return $stmt->execute();\n    }\n}\n?>","size_bytes":11166},"api/setup/create-earnings-table.php":{"content":"<?php\nrequire_once '../config/database.php';\n\necho \"Creating earnings table...\\n\";\n\ntry {\n    $database = new Database();\n    $conn = $database->getConnection();\n    \n    $sql = \"CREATE TABLE IF NOT EXISTS earnings (\n        id int(11) NOT NULL AUTO_INCREMENT,\n        creator_id int(11) NOT NULL,\n        video_id int(11) DEFAULT NULL,\n        amount decimal(10,2) NOT NULL,\n        source enum('video_sale','subscription','bonus') DEFAULT 'video_sale',\n        date date NOT NULL,\n        created_at timestamp DEFAULT CURRENT_TIMESTAMP,\n        updated_at timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n        PRIMARY KEY (id),\n        INDEX idx_creator (creator_id),\n        INDEX idx_date (date),\n        INDEX idx_source (source)\n    ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4\";\n    \n    $conn->exec($sql);\n    echo \"✓ Earnings table created successfully!\\n\";\n    \n    // Insert sample data\n    $earnings_data = [\n        [1, 1, 19.99, 'video_sale', '2024-03-11'],\n        [1, 2, 14.99, 'video_sale', '2024-03-09'],\n        [1, 1, 19.99, 'video_sale', '2024-03-10'],\n        [5, 4, 16.99, 'video_sale', '2024-03-06'],\n        [7, 5, 22.99, 'video_sale', '2024-03-16'],\n        [10, 6, 12.99, 'video_sale', '2024-03-19'],\n        [1, null, 50.00, 'bonus', '2024-03-15']\n    ];\n    \n    $insert_sql = \"INSERT INTO earnings (creator_id, video_id, amount, source, date) VALUES (?, ?, ?, ?, ?)\";\n    $stmt = $conn->prepare($insert_sql);\n    \n    $inserted = 0;\n    foreach ($earnings_data as $earning) {\n        if ($stmt->execute($earning)) {\n            $inserted++;\n        }\n    }\n    \n    echo \"✓ Inserted $inserted earnings records\\n\";\n    \n    // Test connection\n    $stmt = $conn->query(\"SELECT COUNT(*) as count FROM earnings\");\n    $count = $stmt->fetch(PDO::FETCH_ASSOC)['count'];\n    echo \"✓ Earnings table now has $count records\\n\";\n    \n} catch (Exception $e) {\n    echo \"❌ Error: \" . $e->getMessage() . \"\\n\";\n}\n?>","size_bytes":1952},"api/setup/setup-database.php":{"content":"<?php\n/**\n * Database Setup Script for VideoHub\n * Automatically runs the database setup SQL script\n */\n\nrequire_once '../config/database.php';\n\necho \"VideoHub Database Setup\\n\";\necho \"=======================\\n\\n\";\n\ntry {\n    $database = new Database();\n    $conn = $database->getConnection();\n    \n    if (!$conn) {\n        throw new Exception(\"Cannot connect to database\");\n    }\n    \n    echo \"✓ Connected to database successfully\\n\";\n    \n    // Read and execute SQL setup script\n    $sqlFile = __DIR__ . '/database-setup.sql';\n    \n    if (!file_exists($sqlFile)) {\n        throw new Exception(\"SQL setup file not found: $sqlFile\");\n    }\n    \n    $sql = file_get_contents($sqlFile);\n    \n    if (!$sql) {\n        throw new Exception(\"Cannot read SQL setup file\");\n    }\n    \n    echo \"✓ SQL setup file loaded\\n\";\n    \n    // Split SQL into individual statements\n    $statements = array_filter(\n        array_map('trim', explode(';', $sql)),\n        function($stmt) {\n            return !empty($stmt) && !preg_match('/^\\s*--/', $stmt);\n        }\n    );\n    \n    echo \"✓ Found \" . count($statements) . \" SQL statements\\n\\n\";\n    \n    // Execute each statement\n    $executed = 0;\n    $failed = 0;\n    \n    foreach ($statements as $statement) {\n        try {\n            $conn->exec($statement);\n            $executed++;\n            \n            // Show progress for major operations\n            if (preg_match('/CREATE TABLE.*`(\\w+)`/i', $statement, $matches)) {\n                echo \"✓ Created table: \" . $matches[1] . \"\\n\";\n            } elseif (preg_match('/INSERT INTO.*`(\\w+)`/i', $statement, $matches)) {\n                echo \"✓ Inserted data into: \" . $matches[1] . \"\\n\";\n            }\n            \n        } catch (PDOException $e) {\n            $failed++;\n            echo \"✗ Failed to execute statement: \" . $e->getMessage() . \"\\n\";\n        }\n    }\n    \n    echo \"\\n\";\n    echo \"Setup completed!\\n\";\n    echo \"- Executed: $executed statements\\n\";\n    echo \"- Failed: $failed statements\\n\";\n    \n    if ($failed > 0) {\n        echo \"⚠ Some statements failed - please check the errors above\\n\";\n    } else {\n        echo \"✓ All statements executed successfully!\\n\";\n    }\n    \n    // Verify setup by checking tables\n    echo \"\\nVerifying setup:\\n\";\n    $tables = ['users', 'videos', 'purchases', 'earnings'];\n    \n    foreach ($tables as $table) {\n        $stmt = $conn->query(\"SELECT COUNT(*) as count FROM $table\");\n        $count = $stmt->fetch(PDO::FETCH_ASSOC)['count'];\n        echo \"✓ Table '$table': $count records\\n\";\n    }\n    \n    echo \"\\n✅ Database setup completed successfully!\\n\";\n    echo \"Your VideoHub application is now ready to use with MySQL backend.\\n\";\n    \n} catch (Exception $e) {\n    echo \"❌ Setup failed: \" . $e->getMessage() . \"\\n\";\n    echo \"\\nPlease check:\\n\";\n    echo \"1. Database credentials in config/database.php\\n\";\n    echo \"2. Database server is accessible\\n\";\n    echo \"3. You have permission to create tables\\n\";\n}\n\necho \"\\n\";\n?>","size_bytes":3001},"api/setup/test-connection.php":{"content":"<?php\n/**\n * Database Connection Test Script for VideoHub\n * Run this script to test the database connection and setup\n */\n\nrequire_once '../config/database.php';\n\necho \"VideoHub Database Connection Test\\n\";\necho \"==================================\\n\\n\";\n\ntry {\n    $database = new Database();\n    $conn = $database->getConnection();\n    \n    if ($conn) {\n        echo \"✓ Database connection successful!\\n\";\n        \n        // Test basic query\n        $stmt = $conn->query(\"SELECT VERSION() as version\");\n        $result = $stmt->fetch(PDO::FETCH_ASSOC);\n        echo \"✓ MySQL Version: \" . $result['version'] . \"\\n\";\n        \n        // Check if tables exist\n        $tables = ['users', 'videos', 'purchases', 'earnings'];\n        echo \"\\nChecking tables:\\n\";\n        \n        foreach ($tables as $table) {\n            $stmt = $conn->prepare(\"SHOW TABLES LIKE ?\");\n            $stmt->execute([$table]);\n            \n            if ($stmt->fetch()) {\n                echo \"✓ Table '$table' exists\\n\";\n                \n                // Count records\n                $countStmt = $conn->query(\"SELECT COUNT(*) as count FROM $table\");\n                $count = $countStmt->fetch(PDO::FETCH_ASSOC)['count'];\n                echo \"  - Records: $count\\n\";\n            } else {\n                echo \"✗ Table '$table' missing - run database setup\\n\";\n            }\n        }\n        \n        echo \"\\n✓ Connection test completed successfully!\\n\";\n        \n    } else {\n        echo \"✗ Failed to connect to database\\n\";\n    }\n    \n} catch (Exception $e) {\n    echo \"✗ Database connection error: \" . $e->getMessage() . \"\\n\";\n    echo \"\\nPlease check:\\n\";\n    echo \"1. Database credentials in config/database.php\\n\";\n    echo \"2. Database server is accessible\\n\";\n    echo \"3. Database exists\\n\";\n}\n\necho \"\\n\";\n?>","size_bytes":1816},"assets/css/enhanced-styles.css":{"content":"/* Enhanced VideoHub Styles for Better UI/UX */\n\n/* Modern Card Styles */\n.stat-card {\n    border: none;\n    border-radius: 12px;\n    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);\n    transition: all 0.3s ease;\n    background: linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%);\n}\n\n.stat-card:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.12);\n}\n\n.stat-icon {\n    width: 60px;\n    height: 60px;\n    border-radius: 12px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    margin: 0 auto;\n}\n\n/* Enhanced Button Styles */\n.btn-modern {\n    border-radius: 8px;\n    font-weight: 500;\n    padding: 12px 24px;\n    transition: all 0.3s ease;\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n}\n\n.btn-modern:hover {\n    transform: translateY(-1px);\n    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);\n}\n\n/* Modern Sidebar */\n.sidebar {\n    background: linear-gradient(180deg, #ffffff 0%, #f8f9fa 100%);\n    border-right: 1px solid #e9ecef;\n}\n\n.sidebar .nav-link {\n    border-radius: 8px;\n    margin: 2px 8px;\n    padding: 12px 16px;\n    transition: all 0.3s ease;\n    color: #495057;\n    font-weight: 500;\n}\n\n.sidebar .nav-link:hover {\n    background-color: #e9ecef;\n    color: #212529;\n    transform: translateX(4px);\n}\n\n.sidebar .nav-link.active {\n    background: linear-gradient(135deg, #007bff 0%, #0056b3 100%);\n    color: white;\n    box-shadow: 0 2px 8px rgba(0, 123, 255, 0.3);\n}\n\n/* Enhanced Table Styles */\n.table-modern {\n    border-radius: 12px;\n    overflow: hidden;\n    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);\n}\n\n.table-modern thead {\n    background: linear-gradient(135deg, #495057 0%, #343a40 100%);\n    color: white;\n}\n\n.table-modern tbody tr {\n    transition: all 0.3s ease;\n}\n\n.table-modern tbody tr:hover {\n    background-color: #f8f9fa;\n    transform: scale(1.01);\n}\n\n/* Modern Form Controls */\n.form-control-modern {\n    border-radius: 8px;\n    border: 2px solid #e9ecef;\n    padding: 12px 16px;\n    transition: all 0.3s ease;\n}\n\n.form-control-modern:focus {\n    border-color: #007bff;\n    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);\n    transform: translateY(-1px);\n}\n\n/* Video Cards */\n.video-card {\n    border: none;\n    border-radius: 16px;\n    overflow: hidden;\n    transition: all 0.3s ease;\n    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);\n}\n\n.video-card:hover {\n    transform: translateY(-4px);\n    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);\n}\n\n.video-thumbnail {\n    position: relative;\n    overflow: hidden;\n    border-radius: 12px 12px 0 0;\n}\n\n.video-thumbnail img {\n    transition: transform 0.3s ease;\n}\n\n.video-card:hover .video-thumbnail img {\n    transform: scale(1.05);\n}\n\n.video-overlay {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: rgba(0, 0, 0, 0.5);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    opacity: 0;\n    transition: opacity 0.3s ease;\n    cursor: pointer;\n}\n\n.video-card:hover .video-overlay {\n    opacity: 1;\n}\n\n.video-duration {\n    position: absolute;\n    bottom: 8px;\n    right: 8px;\n    background: rgba(0, 0, 0, 0.8);\n    color: white;\n    padding: 4px 8px;\n    border-radius: 4px;\n    font-size: 12px;\n    font-weight: 500;\n}\n\n.video-price {\n    position: absolute;\n    top: 8px;\n    right: 8px;\n    background: linear-gradient(135deg, #28a745 0%, #20c997 100%);\n    color: white;\n    padding: 4px 8px;\n    border-radius: 12px;\n    font-size: 12px;\n    font-weight: 600;\n}\n\n/* Enhanced Navbar */\n.navbar-brand {\n    font-weight: 700;\n    font-size: 1.5rem;\n}\n\n.navbar-nav .nav-link {\n    font-weight: 500;\n    margin: 0 8px;\n    border-radius: 6px;\n    transition: all 0.3s ease;\n}\n\n.navbar-nav .nav-link:hover {\n    background-color: rgba(255, 255, 255, 0.1);\n}\n\n/* Progress Bars */\n.progress-modern {\n    height: 8px;\n    border-radius: 4px;\n    background-color: #e9ecef;\n    overflow: hidden;\n}\n\n.progress-bar-modern {\n    background: linear-gradient(90deg, #007bff 0%, #0056b3 100%);\n    border-radius: 4px;\n    transition: width 0.6s ease;\n}\n\n/* Badges */\n.badge-modern {\n    border-radius: 8px;\n    font-weight: 500;\n    padding: 6px 12px;\n}\n\n/* Loading States */\n.skeleton {\n    background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);\n    background-size: 200% 100%;\n    animation: skeleton-loading 1.5s infinite;\n    border-radius: 4px;\n}\n\n@keyframes skeleton-loading {\n    0% {\n        background-position: 200% 0;\n    }\n    100% {\n        background-position: -200% 0;\n    }\n}\n\n/* Responsive Improvements */\n@media (max-width: 768px) {\n    .stat-card {\n        margin-bottom: 16px;\n    }\n    \n    .sidebar {\n        display: none;\n    }\n    \n    .video-card {\n        margin-bottom: 20px;\n    }\n}\n\n/* Dark Theme Support */\n@media (prefers-color-scheme: dark) {\n    .stat-card {\n        background: linear-gradient(145deg, #212529 0%, #343a40 100%);\n        color: white;\n    }\n    \n    .sidebar {\n        background: linear-gradient(180deg, #212529 0%, #343a40 100%);\n        border-right-color: #495057;\n    }\n}\n\n/* Animation Classes */\n.fade-in {\n    animation: fadeIn 0.6s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n@keyframes fadeIn {\n    from { opacity: 0; transform: translateY(30px) scale(0.95); }\n    to { opacity: 1; transform: translateY(0) scale(1); }\n}\n\n.slide-up {\n    animation: slideUp 0.4s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n@keyframes slideUp {\n    from { transform: translateY(30px) scale(0.98); opacity: 0; }\n    to { transform: translateY(0) scale(1); opacity: 1; }\n}\n\n.slide-in-left {\n    animation: slideInLeft 0.5s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n@keyframes slideInLeft {\n    from { transform: translateX(-30px); opacity: 0; }\n    to { transform: translateX(0); opacity: 1; }\n}\n\n.zoom-in {\n    animation: zoomIn 0.4s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n@keyframes zoomIn {\n    from { transform: scale(0.9); opacity: 0; }\n    to { transform: scale(1); opacity: 1; }\n}\n\n.bounce-in {\n    animation: bounceIn 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);\n}\n\n@keyframes bounceIn {\n    0% { transform: scale(0.3); opacity: 0; }\n\n\n/* Premium Visual Effects */\n.neon-glow {\n    position: relative;\n    color: #fff;\n    text-shadow: \n        0 0 5px currentColor,\n        0 0 10px currentColor,\n        0 0 15px currentColor,\n        0 0 20px currentColor;\n    animation: neon-flicker 2s infinite alternate;\n}\n\n@keyframes neon-flicker {\n    0%, 100% { \n        text-shadow: \n            0 0 5px currentColor,\n            0 0 10px currentColor,\n            0 0 15px currentColor,\n            0 0 20px currentColor;\n    }\n    50% { \n        text-shadow: \n            0 0 2px currentColor,\n            0 0 5px currentColor,\n            0 0 8px currentColor,\n            0 0 12px currentColor;\n    }\n}\n\n/* Morphing Cards */\n.morph-card {\n    background: linear-gradient(45deg, #667eea, #764ba2);\n    border-radius: 20px;\n    position: relative;\n    overflow: hidden;\n    transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n.morph-card::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: linear-gradient(45deg, #f093fb, #f5576c, #4facfe, #00f2fe);\n    background-size: 400% 400%;\n    opacity: 0;\n    transition: opacity 0.6s ease;\n    animation: morphing-gradient 4s ease infinite;\n}\n\n.morph-card:hover::before {\n    opacity: 1;\n}\n\n@keyframes morphing-gradient {\n    0% { background-position: 0% 50%; }\n    50% { background-position: 100% 50%; }\n    100% { background-position: 0% 50%; }\n}\n\n/* Particle Effect Background */\n.particle-bg {\n    position: relative;\n    overflow: hidden;\n}\n\n.particle-bg::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-image: \n        radial-gradient(circle at 20% 80%, rgba(79, 70, 229, 0.1) 0%, transparent 50%),\n        radial-gradient(circle at 80% 20%, rgba(99, 102, 241, 0.1) 0%, transparent 50%),\n        radial-gradient(circle at 40% 40%, rgba(139, 92, 246, 0.1) 0%, transparent 50%);\n    animation: particles-float 6s ease-in-out infinite;\n}\n\n@keyframes particles-float {\n    0%, 100% { transform: translateY(0) rotate(0deg); }\n    33% { transform: translateY(-10px) rotate(1deg); }\n    66% { transform: translateY(5px) rotate(-1deg); }\n}\n\n/* 3D Card Effect */\n.card-3d {\n    perspective: 1000px;\n    transform-style: preserve-3d;\n    transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n.card-3d:hover {\n    transform: rotateY(10deg) rotateX(5deg) scale(1.02);\n}\n\n.card-3d-inner {\n    transform-style: preserve-3d;\n    transition: transform 0.6s;\n}\n\n/* Liquid Button Effect */\n.liquid-btn {\n    position: relative;\n    background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));\n    border: none;\n    border-radius: 50px;\n    padding: 12px 30px;\n    color: white;\n    font-weight: 600;\n    overflow: hidden;\n    transition: all 0.4s ease;\n}\n\n.liquid-btn::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: -100%;\n    width: 100%;\n    height: 100%;\n    background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.3), transparent);\n    transition: left 0.6s ease;\n}\n\n.liquid-btn:hover::before {\n    left: 100%;\n}\n\n.liquid-btn::after {\n    content: '';\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    width: 0;\n    height: 0;\n    background: rgba(255, 255, 255, 0.3);\n    border-radius: 50%;\n    transform: translate(-50%, -50%);\n    transition: width 0.6s ease, height 0.6s ease;\n}\n\n.liquid-btn:active::after {\n    width: 300px;\n    height: 300px;\n}\n\n/* Floating Action Button */\n.fab {\n    position: fixed;\n    bottom: 2rem;\n    right: 2rem;\n    width: 60px;\n    height: 60px;\n    border-radius: 50%;\n    background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));\n    border: none;\n    color: white;\n    font-size: 1.5rem;\n    box-shadow: 0 8px 25px rgba(79, 70, 229, 0.3);\n    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n    z-index: 1000;\n    cursor: pointer;\n}\n\n.fab:hover {\n    transform: scale(1.1) rotate(5deg);\n    box-shadow: 0 12px 35px rgba(79, 70, 229, 0.4);\n}\n\n.fab:active {\n    transform: scale(0.95);\n}\n\n/* Image Reveal Effect */\n.image-reveal {\n    position: relative;\n    overflow: hidden;\n    border-radius: 16px;\n}\n\n.image-reveal img {\n    transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n.image-reveal::after {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: -100%;\n    width: 100%;\n    height: 100%;\n    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.8), transparent);\n    transition: left 0.6s ease;\n}\n\n.image-reveal:hover img {\n    transform: scale(1.05);\n}\n\n.image-reveal:hover::after {\n    left: 100%;\n}\n\n/* Text Gradient Animations */\n.text-gradient-animated {\n    background: linear-gradient(45deg, #667eea, #764ba2, #f093fb, #f5576c);\n    background-size: 400% 400%;\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n    background-clip: text;\n    animation: gradient-shift 3s ease infinite;\n}\n\n@keyframes gradient-shift {\n    0% { background-position: 0% 50%; }\n    50% { background-position: 100% 50%; }\n    100% { background-position: 0% 50%; }\n}\n\n/* Modern Progress Ring */\n.progress-ring {\n    width: 120px;\n    height: 120px;\n    position: relative;\n}\n\n.progress-ring svg {\n    width: 100%;\n    height: 100%;\n    transform: rotate(-90deg);\n}\n\n.progress-ring circle {\n    fill: none;\n    stroke-width: 8;\n    stroke-linecap: round;\n}\n\n.progress-ring .bg {\n    stroke: #e5e7eb;\n}\n\n.progress-ring .progress {\n    stroke: url(#gradient);\n    stroke-dasharray: 0 100;\n    transition: stroke-dasharray 0.5s ease;\n}\n\n/* Glassmorphism Navigation */\n.glass-nav {\n    background: rgba(255, 255, 255, 0.1);\n    backdrop-filter: blur(20px);\n    -webkit-backdrop-filter: blur(20px);\n    border: 1px solid rgba(255, 255, 255, 0.2);\n    border-radius: 16px;\n    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);\n}\n\n/* Magnetic Effect */\n.magnetic {\n    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n    cursor: pointer;\n}\n\n.magnetic:hover {\n    transform: scale(1.05);\n}\n\n/* Responsive Enhancements */\n@media (max-width: 768px) {\n    .fab {\n        bottom: 1rem;\n        right: 1rem;\n        width: 50px;\n        height: 50px;\n        font-size: 1.2rem;\n    }\n    \n    .card-3d:hover {\n        transform: none;\n    }\n    \n    .morph-card::before {\n        animation: none;\n    }\n}\n\n\n    50% { transform: scale(1.05); }\n    70% { transform: scale(0.95); }\n    100% { transform: scale(1); opacity: 1; }\n}\n\n.stagger-animation {\n    animation-delay: calc(var(--stagger-delay, 0) * 0.1s);\n}\n\n/* Enhanced Modals */\n.modal-content {\n    border: none;\n    border-radius: 16px;\n    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);\n}\n\n.modal-header {\n    border-bottom: 1px solid #e9ecef;\n    padding: 24px;\n}\n\n.modal-body {\n    padding: 24px;\n}\n\n.modal-footer {\n    border-top: 1px solid #e9ecef;\n    padding: 24px;\n}\n\n/* Focus States for Accessibility */\n.btn:focus,\n.form-control:focus,\n.nav-link:focus {\n    outline: 2px solid #007bff;\n    outline-offset: 2px;\n}\n\n/* Print Styles */\n@media print {\n    .sidebar,\n    .navbar,\n    .btn,\n    .modal {\n        display: none !important;\n    }\n    \n    .main-content {\n        margin: 0 !important;\n        padding: 0 !important;\n    }\n}","size_bytes":13265},"assets/css/styles.css":{"content":"/* VideoHub - Custom Styles */\n\n/* Global Variables */\n:root {\n    --primary-color: #4f46e5;\n    --primary-dark: #3730a3;\n    --secondary-color: #6366f1;\n    --success-color: #059669;\n    --danger-color: #dc2626;\n    --warning-color: #d97706;\n    --info-color: #0891b2;\n    --light-color: #f8fafc;\n    --dark-color: #1e293b;\n    --gray-50: #f8fafc;\n    --gray-100: #f1f5f9;\n    --gray-200: #e2e8f0;\n    --gray-300: #cbd5e1;\n    --gray-500: #64748b;\n    --gray-600: #475569;\n    --gray-700: #334155;\n    --gray-800: #1e293b;\n    --border-radius: 0.75rem;\n    --border-radius-sm: 0.5rem;\n    --box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);\n    --box-shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);\n    --box-shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);\n    --box-shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);\n}\n\n/* Enhanced Animations */\n@keyframes pulse {\n    0%, 100% { opacity: 1; transform: scale(1); }\n    50% { opacity: 0.8; transform: scale(1.02); }\n}\n\n@keyframes float {\n    0%, 100% { transform: translateY(0px) rotate(0deg); }\n    25% { transform: translateY(-5px) rotate(1deg); }\n    50% { transform: translateY(-10px) rotate(0deg); }\n    75% { transform: translateY(-5px) rotate(-1deg); }\n}\n\n@keyframes slideInUp {\n    from {\n        opacity: 0;\n        transform: translateY(30px) scale(0.95);\n    }\n    to {\n        opacity: 1;\n        transform: translateY(0) scale(1);\n    }\n}\n\n@keyframes shimmer {\n    0% { background-position: -200% 0; }\n    100% { background-position: 200% 0; }\n}\n\n@keyframes glow {\n    0%, 100% { box-shadow: 0 0 5px rgba(79, 70, 229, 0.2); }\n    50% { box-shadow: 0 0 20px rgba(79, 70, 229, 0.4), 0 0 30px rgba(79, 70, 229, 0.2); }\n}\n\n.animate-pulse {\n    animation: pulse 2s ease-in-out infinite;\n}\n\n.animate-float {\n    animation: float 3s ease-in-out infinite;\n}\n\n.slide-in-up {\n    animation: slideInUp 0.6s ease-out;\n}\n\n/* Enhanced Card Hover Effects */\n.card {\n    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);\n    position: relative;\n    overflow: hidden;\n}\n\n.card::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: -100%;\n    width: 100%;\n    height: 100%;\n    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);\n    transition: left 0.5s;\n}\n\n.card:hover {\n    transform: translateY(-8px) scale(1.02);\n    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.15), 0 20px 25px -5px rgba(0, 0, 0, 0.1);\n}\n\n.card:hover::before {\n    left: 100%;\n}\n\n/* Backdrop Blur Effect */\n.backdrop-blur {\n    backdrop-filter: blur(12px);\n    -webkit-backdrop-filter: blur(12px);\n}\n\n/* Glassmorphism Effects */\n.glass-card {\n    background: rgba(255, 255, 255, 0.1);\n    backdrop-filter: blur(20px);\n    -webkit-backdrop-filter: blur(20px);\n    border: 1px solid rgba(255, 255, 255, 0.2);\n    border-radius: 16px;\n    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);\n}\n\n.glass-card-dark {\n    background: rgba(0, 0, 0, 0.1);\n    backdrop-filter: blur(20px);\n    -webkit-backdrop-filter: blur(20px);\n    border: 1px solid rgba(255, 255, 255, 0.1);\n    border-radius: 16px;\n    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);\n}\n\n.gradient-border {\n    position: relative;\n    border-radius: 16px;\n}\n\n.gradient-border::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    border-radius: 16px;\n    padding: 2px;\n    background: linear-gradient(45deg, var(--primary-color), var(--secondary-color), var(--success-color));\n    mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);\n    mask-composite: exclude;\n}\n\n/* Enhanced Buttons */\n.btn {\n    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n    border-radius: 12px;\n    font-weight: 600;\n    position: relative;\n    overflow: hidden;\n    letter-spacing: 0.5px;\n}\n\n.btn::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: -100%;\n    width: 100%;\n    height: 100%;\n    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\n    transition: left 0.5s;\n}\n\n.btn:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);\n}\n\n.btn:hover::before {\n    left: 100%;\n}\n\n.btn:active {\n    transform: translateY(0);\n}\n\n.btn-lg {\n    padding: 1rem 2.5rem;\n    font-size: 1.1rem;\n    border-radius: 16px;\n}\n\n.btn-gradient-primary {\n    background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);\n    border: none;\n    color: white;\n}\n\n.btn-gradient-success {\n    background: linear-gradient(135deg, var(--success-color) 0%, #20c997 100%);\n    border: none;\n    color: white;\n}\n\n.btn-outline-modern {\n    background: transparent;\n    border: 2px solid var(--primary-color);\n    color: var(--primary-color);\n    position: relative;\n    overflow: hidden;\n}\n\n.btn-outline-modern::after {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: -100%;\n    width: 100%;\n    height: 100%;\n    background: var(--primary-color);\n    transition: left 0.3s ease;\n    z-index: -1;\n}\n\n.btn-outline-modern:hover {\n    color: white;\n}\n\n.btn-outline-modern:hover::after {\n    left: 0;\n}\n\n/* General Styles */\nbody {\n    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;\n    line-height: 1.6;\n    color: var(--gray-800);\n    background-color: var(--gray-50);\n}\n\n.auth-bg {\n    background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);\n    min-height: 100vh;\n}\n\n/* Modern gradients */\n.bg-gradient-primary {\n    background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);\n}\n\n.bg-gradient-success {\n    background: linear-gradient(135deg, var(--success-color) 0%, #047857 100%);\n}\n\n.bg-gradient-danger {\n    background: linear-gradient(135deg, var(--danger-color) 0%, #b91c1c 100%);\n}\n\n/* Typography */\n.fw-semibold {\n    font-weight: 600;\n}\n\n.text-xs {\n    font-size: 0.75rem;\n}\n\n.text-sm {\n    font-size: 0.875rem;\n}\n\n/* Spacing utilities */\n.space-y-4 > * + * {\n    margin-top: 1rem;\n}\n\n.space-y-6 > * + * {\n    margin-top: 1.5rem;\n}\n\n/* Modern Cards */\n.card {\n    border: none;\n    box-shadow: var(--box-shadow);\n    border-radius: var(--border-radius);\n    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n    background: white;\n}\n\n.card:hover, .hover-lift:hover {\n    box-shadow: var(--box-shadow-xl);\n    transform: translateY(-4px);\n}\n\n.card-modern {\n    border-radius: var(--border-radius);\n    border: 1px solid var(--gray-200);\n    transition: all 0.2s ease;\n}\n\n.card-modern:hover {\n    border-color: var(--primary-color);\n    box-shadow: var(--box-shadow-lg);\n}\n\n/* Stats Cards */\n.stat-card {\n    background: white;\n    border-radius: var(--border-radius);\n    padding: 1.5rem;\n    border: 1px solid var(--gray-200);\n    transition: all 0.2s ease;\n}\n\n.stat-card:hover {\n    transform: translateY(-2px);\n    box-shadow: var(--box-shadow-lg);\n}\n\n.stat-icon {\n    width: 3rem;\n    height: 3rem;\n    border-radius: var(--border-radius-sm);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    margin: 0 auto;\n}\n\n.min-vh-75 {\n    min-height: 75vh;\n}\n\n/* Buttons */\n.btn-modern {\n    border-radius: var(--border-radius-sm);\n    font-weight: 500;\n    padding: 0.75rem 1.5rem;\n    transition: all 0.2s ease;\n    border: none;\n}\n\n.btn-modern:hover {\n    transform: translateY(-1px);\n    box-shadow: var(--box-shadow-md);\n}\n\n.card-header {\n    background-color: #f8f9fa;\n    border-bottom: 1px solid #dee2e6;\n    font-weight: 600;\n}\n\n/* Border Left Colors for Cards */\n.border-left-primary {\n    border-left: 0.25rem solid var(--primary-color) !important;\n}\n\n.border-left-success {\n    border-left: 0.25rem solid var(--success-color) !important;\n}\n\n.border-left-info {\n    border-left: 0.25rem solid var(--info-color) !important;\n}\n\n.border-left-warning {\n    border-left: 0.25rem solid var(--warning-color) !important;\n}\n\n/* Modern Sidebar */\n.sidebar {\n    border-right: 1px solid var(--gray-200);\n}\n\n.sidebar .nav-link {\n    color: var(--gray-700);\n    font-weight: 500;\n    margin-bottom: 0.125rem;\n    border-radius: var(--border-radius-sm);\n    transition: all 0.2s ease;\n}\n\n.sidebar .nav-link:hover {\n    color: var(--primary-color);\n    background-color: var(--gray-100);\n    transform: translateX(2px);\n}\n\n.sidebar .nav-link.active {\n    color: var(--primary-color);\n    background-color: rgba(79, 70, 229, 0.1);\n    font-weight: 600;\n}\n\n.sidebar .nav-link i {\n    width: 1.5rem;\n}\n\n/* Avatar */\n.avatar {\n    width: 2.5rem;\n    height: 2.5rem;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border-radius: 50%;\n    font-size: 0.875rem;\n}\n\n/* Utility classes for custom colors */\n.bg-gray-50 { background-color: var(--gray-50) !important; }\n.bg-gray-100 { background-color: var(--gray-100) !important; }\n.bg-gray-200 { background-color: var(--gray-200) !important; }\n.text-gray-500 { color: var(--gray-500) !important; }\n.text-gray-600 { color: var(--gray-600) !important; }\n.text-gray-700 { color: var(--gray-700) !important; }\n.text-gray-800 { color: var(--gray-800) !important; }\n\n/* Modern Utility Classes */\n.rounded-xl { border-radius: 1rem !important; }\n.rounded-2xl { border-radius: 1.5rem !important; }\n.rounded-3xl { border-radius: 2rem !important; }\n\n.shadow-soft { box-shadow: 0 2px 15px rgba(0, 0, 0, 0.08) !important; }\n.shadow-medium { box-shadow: 0 4px 25px rgba(0, 0, 0, 0.12) !important; }\n.shadow-large { box-shadow: 0 8px 40px rgba(0, 0, 0, 0.15) !important; }\n.shadow-glow { box-shadow: 0 0 30px rgba(79, 70, 229, 0.3) !important; }\n\n.text-gradient-primary {\n    background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n    background-clip: text;\n    font-weight: 700;\n}\n\n.text-gradient-success {\n    background: linear-gradient(135deg, var(--success-color), #20c997);\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n    background-clip: text;\n    font-weight: 700;\n}\n\n.hover-scale:hover {\n    transform: scale(1.05);\n    transition: transform 0.3s ease;\n}\n\n.hover-rotate:hover {\n    transform: rotate(5deg);\n    transition: transform 0.3s ease;\n}\n\n.animate-glow {\n    animation: glow 2s infinite;\n}\n\n.animate-shimmer {\n    background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);\n    background-size: 200% 100%;\n    animation: shimmer 1.5s infinite;\n}\n\n.border-gradient {\n    border: 2px solid;\n    border-image: linear-gradient(45deg, var(--primary-color), var(--secondary-color)) 1;\n}\n\n.bg-mesh {\n    background: \n        radial-gradient(circle at 20% 50%, rgba(79, 70, 229, 0.1) 0%, transparent 50%),\n        radial-gradient(circle at 80% 20%, rgba(99, 102, 241, 0.1) 0%, transparent 50%),\n        radial-gradient(circle at 40% 80%, rgba(139, 92, 246, 0.1) 0%, transparent 50%);\n}\n\n/* Video Thumbnails */\n.video-thumbnail {\n    position: relative;\n    overflow: hidden;\n    border-radius: var(--border-radius);\n    background-color: #000;\n    aspect-ratio: 16/9;\n}\n\n.video-thumbnail img {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n    transition: transform 0.3s ease;\n}\n\n.video-thumbnail:hover img {\n    transform: scale(1.05);\n}\n\n.video-overlay {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: rgba(0, 0, 0, 0.5);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    opacity: 0;\n    transition: opacity 0.3s ease;\n    color: white;\n}\n\n.video-thumbnail:hover .video-overlay {\n    opacity: 1;\n}\n\n.video-duration {\n    position: absolute;\n    bottom: 8px;\n    right: 8px;\n    background: rgba(0, 0, 0, 0.8);\n    color: white;\n    padding: 2px 6px;\n    border-radius: 3px;\n    font-size: 0.75rem;\n}\n\n.video-price {\n    position: absolute;\n    top: 8px;\n    left: 8px;\n    background: var(--success-color);\n    color: white;\n    padding: 4px 8px;\n    border-radius: var(--border-radius);\n    font-size: 0.75rem;\n    font-weight: 600;\n}\n\n/* Video Player Styles */\n.video-player-body {\n    background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 100%);\n    color: #fff;\n}\n\n.video-player-container {\n    background: linear-gradient(135deg, #000 0%, #1a1a2e 100%);\n    border-radius: 20px;\n    overflow: hidden;\n    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);\n    position: relative;\n}\n\n.video-player-container::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    border-radius: 20px;\n    padding: 2px;\n    background: linear-gradient(45deg, rgba(79, 70, 229, 0.5), rgba(99, 102, 241, 0.5));\n    mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);\n    mask-composite: exclude;\n    z-index: 1;\n}\n\n.video-wrapper {\n    position: relative;\n    width: 100%;\n    height: 0;\n    padding-bottom: 56.25%; /* 16:9 aspect ratio */\n    background-color: #000;\n}\n\n.video-player {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    border: none;\n    outline: none;\n}\n\n.video-loading-overlay,\n.video-error-overlay {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: rgba(0, 0, 0, 0.8);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    flex-direction: column;\n    z-index: 10;\n}\n\n/* Modal Video Player Styles */\n#videoPlayerModal .modal-xl {\n    max-width: 95%;\n}\n\n#videoPlayerModal .video-wrapper {\n    height: 400px;\n    padding-bottom: 0;\n}\n\n#videoPlayerModal .video-player {\n    position: relative;\n    width: 100%;\n    height: 100%;\n}\n\n.related-video-item {\n    cursor: pointer;\n    padding: 8px;\n    border-radius: 4px;\n    transition: background-color 0.2s;\n}\n\n.related-video-item:hover {\n    background-color: #f8f9fa;\n}\n\n.cursor-pointer {\n    cursor: pointer;\n}\n\n.custom-video-controls {\n    background: rgba(255, 255, 255, 0.1);\n    padding: 1rem;\n    border-radius: 0 0 var(--border-radius) var(--border-radius);\n}\n\n/* Video Cards */\n.video-card {\n    transition: all 0.3s ease;\n    border: none;\n    box-shadow: var(--box-shadow);\n}\n\n.video-card:hover {\n    box-shadow: var(--box-shadow-lg);\n    transform: translateY(-5px);\n}\n\n.video-card .card-body {\n    padding: 1rem;\n}\n\n.video-title {\n    font-size: 1rem;\n    font-weight: 600;\n    margin-bottom: 0.5rem;\n    color: #212529;\n    text-decoration: none;\n    display: -webkit-box;\n    -webkit-line-clamp: 2;\n    -webkit-box-orient: vertical;\n    overflow: hidden;\n}\n\n.video-title:hover {\n    color: var(--primary-color);\n}\n\n.video-creator {\n    color: #6c757d;\n    font-size: 0.875rem;\n    margin-bottom: 0.5rem;\n}\n\n.video-stats {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    font-size: 0.75rem;\n    color: #6c757d;\n}\n\n/* Authentication Forms */\n.auth-card {\n    border: none;\n    box-shadow: var(--box-shadow-lg);\n    border-radius: var(--border-radius);\n}\n\n/* Password Strength Indicator */\n.password-strength {\n    margin-top: 0.5rem;\n}\n\n.strength-bar {\n    height: 4px;\n    background-color: #e9ecef;\n    border-radius: 2px;\n    transition: background-color 0.3s ease;\n}\n\n.strength-bar.weak {\n    background-color: var(--danger-color);\n}\n\n.strength-bar.fair {\n    background-color: var(--warning-color);\n}\n\n.strength-bar.good {\n    background-color: var(--info-color);\n}\n\n.strength-bar.strong {\n    background-color: var(--success-color);\n}\n\n/* Buttons */\n.btn {\n    border-radius: var(--border-radius);\n    font-weight: 500;\n    transition: all 0.3s ease;\n}\n\n.btn:hover {\n    transform: translateY(-1px);\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n}\n\n.btn-group .btn:hover {\n    transform: none;\n}\n\n/* Tables */\n.table th {\n    border-top: none;\n    font-weight: 600;\n    color: #495057;\n    background-color: #f8f9fa;\n}\n\n.table-responsive {\n    border-radius: var(--border-radius);\n    overflow: hidden;\n}\n\n/* Pagination */\n.pagination .page-link {\n    border-radius: var(--border-radius);\n    margin: 0 2px;\n    border: 1px solid #dee2e6;\n    color: #495057;\n}\n\n.pagination .page-item.active .page-link {\n    background-color: var(--primary-color);\n    border-color: var(--primary-color);\n}\n\n/* Form Controls */\n.form-control:focus,\n.form-select:focus {\n    border-color: var(--primary-color);\n    box-shadow: 0 0 0 0.2rem rgba(13, 110, 253, 0.25);\n}\n\n/* Alerts */\n.alert {\n    border: none;\n    border-radius: var(--border-radius);\n}\n\n/* Demo Notice */\n.demo-notice {\n    border-radius: 0;\n}\n\n/* Loading States */\n.loading-spinner {\n    display: inline-block;\n    width: 20px;\n    height: 20px;\n    border: 3px solid rgba(255, 255, 255, 0.3);\n    border-radius: 50%;\n    border-top-color: #fff;\n    animation: spin 1s ease-in-out infinite;\n}\n\n@keyframes spin {\n    to { transform: rotate(360deg); }\n}\n\n/* Chart Container */\n.chart-container {\n    position: relative;\n    height: 400px;\n}\n\n/* Progress Bars */\n.progress {\n    height: 8px;\n    border-radius: 4px;\n    background-color: #e9ecef;\n}\n\n.progress-bar {\n    border-radius: 4px;\n    transition: width 0.3s ease;\n}\n\n/* Modals */\n.modal-content {\n    border: none;\n    border-radius: var(--border-radius);\n    box-shadow: var(--box-shadow-lg);\n}\n\n.modal-header {\n    border-bottom: 1px solid #dee2e6;\n}\n\n.modal-footer {\n    border-top: 1px solid #dee2e6;\n}\n\n/* User Avatar */\n.user-avatar {\n    width: 40px;\n    height: 40px;\n    border-radius: 50%;\n    object-fit: cover;\n}\n\n/* Comments */\n.comment-item {\n    border-bottom: 1px solid #e9ecef;\n    padding: 1rem 0;\n}\n\n.comment-item:last-child {\n    border-bottom: none;\n}\n\n.comment-avatar {\n    width: 48px;\n    height: 48px;\n    border-radius: 50%;\n    background-color: #e9ecef;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    color: #6c757d;\n}\n\n/* Related Videos */\n.related-videos-container {\n    max-height: 400px;\n    overflow-y: auto;\n}\n\n.related-video-item {\n    display: flex;\n    align-items: flex-start;\n    padding: 0.75rem;\n    margin-bottom: 0.5rem;\n    border-radius: 8px;\n    text-decoration: none;\n    color: inherit;\n    transition: all 0.3s ease;\n    background-color: #f8f9fa;\n    border: 1px solid #e9ecef;\n}\n\n.related-video-item:hover {\n    background-color: #e9ecef;\n    color: inherit;\n    transform: translateY(-1px);\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n}\n\n.related-video-item:last-child {\n    margin-bottom: 0;\n}\n\n.related-video-thumbnail {\n    width: 80px;\n    height: 45px;\n    background-color: #000;\n    border-radius: 6px;\n    margin-right: 0.75rem;\n    flex-shrink: 0;\n    object-fit: cover;\n    position: relative;\n}\n\n.related-video-thumbnail::after {\n    content: '\\f04b';\n    font-family: 'Font Awesome 6 Free';\n    font-weight: 900;\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    color: white;\n    opacity: 0;\n    transition: opacity 0.3s ease;\n    font-size: 12px;\n}\n\n.related-video-item:hover .related-video-thumbnail::after {\n    opacity: 1;\n}\n\n.related-video-info {\n    flex: 1;\n    min-width: 0;\n}\n\n.related-video-title {\n    font-size: 0.85rem;\n    font-weight: 600;\n    margin-bottom: 0.25rem;\n    display: -webkit-box;\n    -webkit-line-clamp: 2;\n    -webkit-box-orient: vertical;\n    overflow: hidden;\n    line-height: 1.3;\n    color: #212529;\n}\n\n.related-video-creator {\n    font-size: 0.75rem;\n    color: #6c757d;\n    margin-bottom: 0.125rem;\n}\n\n.related-video-duration {\n    font-size: 0.7rem;\n    color: #28a745;\n    font-weight: 500;\n}\n\n/* Enhanced Modal Sidebar */\n#videoPlayerModal .modal-xl .col-lg-4 {\n    border-left: 2px solid #e9ecef;\n}\n\n#videoPlayerModal .progress {\n    background-color: #e9ecef;\n    border-radius: 10px;\n}\n\n#videoPlayerModal .progress-bar {\n    border-radius: 10px;\n    background: linear-gradient(90deg, #007bff 0%, #0056b3 100%);\n}\n\n#videoPlayerModal .form-control {\n    resize: none;\n    transition: all 0.3s ease;\n}\n\n#videoPlayerModal .form-control:focus {\n    border-color: #007bff;\n    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);\n    background-color: white;\n}\n\n/* Custom scrollbar styles */\n.related-videos-container::-webkit-scrollbar,\n.custom-scrollbar::-webkit-scrollbar {\n    width: 8px;\n}\n\n.related-videos-container::-webkit-scrollbar-track,\n.custom-scrollbar::-webkit-scrollbar-track {\n    background: linear-gradient(to bottom, #f8f9fa, #e9ecef);\n    border-radius: 4px;\n}\n\n.related-videos-container::-webkit-scrollbar-thumb,\n.custom-scrollbar::-webkit-scrollbar-thumb {\n    background: linear-gradient(to bottom, var(--primary-color), var(--primary-dark));\n    border-radius: 4px;\n    transition: all 0.3s ease;\n}\n\n.related-videos-container::-webkit-scrollbar-thumb:hover,\n.custom-scrollbar::-webkit-scrollbar-thumb:hover {\n    background: linear-gradient(to bottom, var(--primary-dark), var(--secondary-color));\n    transform: scale(1.1);\n}\n\n/* Modern scrollbar for all containers */\n*::-webkit-scrollbar {\n    width: 6px;\n    height: 6px;\n}\n\n*::-webkit-scrollbar-track {\n    background: rgba(0, 0, 0, 0.05);\n    border-radius: 3px;\n}\n\n*::-webkit-scrollbar-thumb {\n    background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));\n    border-radius: 3px;\n}\n\n*::-webkit-scrollbar-thumb:hover {\n    background: linear-gradient(45deg, var(--primary-dark), var(--primary-color));\n}\n\n/* Responsive Design */\n@media (max-width: 768px) {\n    .sidebar {\n        position: static;\n        height: auto;\n        padding: 0;\n    }\n    \n    .video-wrapper {\n        padding-bottom: 75%; /* Adjust for mobile */\n    }\n    \n    .custom-video-controls .row {\n        flex-direction: column;\n        gap: 1rem;\n    }\n    \n    .video-stats {\n        flex-direction: column;\n        align-items: flex-start;\n        gap: 0.5rem;\n    }\n    \n    .related-video-item {\n        flex-direction: column;\n        text-align: center;\n    }\n    \n    .related-video-thumbnail {\n        width: 100%;\n        height: auto;\n        margin-right: 0;\n        margin-bottom: 0.5rem;\n    }\n}\n\n/* Dark Theme Support */\n@media (prefers-color-scheme: dark) {\n    .video-player-body {\n        background-color: #121212;\n        color: #ffffff;\n    }\n    \n    .video-player-body .card {\n        background-color: #1e1e1e;\n        color: #ffffff;\n    }\n    \n    .video-player-body .card-header {\n        background-color: #2d2d2d;\n        border-bottom-color: #404040;\n    }\n}\n\n/* Print Styles */\n@media print {\n    .navbar,\n    .sidebar,\n    .btn,\n    .modal {\n        display: none !important;\n    }\n    \n    .container-fluid {\n        margin: 0;\n        padding: 0;\n    }\n    \n    .card {\n        box-shadow: none;\n        border: 1px solid #dee2e6;\n    }\n}\n\n/* Accessibility */\n.sr-only {\n    position: absolute;\n    width: 1px;\n    height: 1px;\n    padding: 0;\n    margin: -1px;\n    overflow: hidden;\n    clip: rect(0, 0, 0, 0);\n    white-space: nowrap;\n    border: 0;\n}\n\n/* Focus styles for keyboard navigation */\n.btn:focus,\n.form-control:focus,\n\n\n/* Interactive Elements & Micro-interactions */\n.interactive-card {\n    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);\n    cursor: pointer;\n    position: relative;\n    overflow: hidden;\n}\n\n.interactive-card::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);\n    transform: translateX(-100%);\n    transition: transform 0.6s ease;\n}\n\n.interactive-card:hover::before {\n    transform: translateX(100%);\n}\n\n.ripple-effect {\n    position: relative;\n    overflow: hidden;\n    cursor: pointer;\n}\n\n.ripple-effect::after {\n    content: '';\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    width: 0;\n    height: 0;\n    border-radius: 50%;\n    background: rgba(255, 255, 255, 0.3);\n    transform: translate(-50%, -50%);\n    transition: width 0.6s, height 0.6s;\n}\n\n.ripple-effect:active::after {\n    width: 300px;\n    height: 300px;\n}\n\n/* Loading Skeleton Improvements */\n.skeleton-text {\n    height: 1em;\n    background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);\n    background-size: 200% 100%;\n    animation: skeleton-loading 1.5s infinite;\n    border-radius: 4px;\n    margin: 0.25em 0;\n}\n\n.skeleton-circle {\n    border-radius: 50%;\n    background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);\n    background-size: 200% 100%;\n    animation: skeleton-loading 1.5s infinite;\n}\n\n@keyframes skeleton-loading {\n    0% { background-position: 200% 0; }\n    100% { background-position: -200% 0; }\n}\n\n/* Status Indicators */\n.status-indicator {\n    position: relative;\n    display: inline-block;\n}\n\n.status-indicator::after {\n    content: '';\n    position: absolute;\n    top: 0;\n    right: 0;\n    width: 8px;\n    height: 8px;\n    border-radius: 50%;\n    border: 2px solid #fff;\n}\n\n.status-online::after {\n    background: #22c55e;\n    animation: pulse-green 2s infinite;\n}\n\n.status-offline::after {\n    background: #ef4444;\n}\n\n.status-busy::after {\n    background: #f59e0b;\n}\n\n@keyframes pulse-green {\n    0%, 100% { opacity: 1; }\n    50% { opacity: 0.5; }\n}\n\n/* Modern Form Enhancements */\n.form-floating-modern {\n    position: relative;\n}\n\n.form-floating-modern input {\n    border: 2px solid #e5e7eb;\n    border-radius: 12px;\n    padding: 1rem;\n    font-size: 1rem;\n    transition: all 0.3s ease;\n    background: rgba(255, 255, 255, 0.9);\n}\n\n.form-floating-modern input:focus {\n    border-color: var(--primary-color);\n    box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);\n    transform: translateY(-2px);\n}\n\n.form-floating-modern label {\n    position: absolute;\n    top: 1rem;\n    left: 1rem;\n    color: #6b7280;\n    transition: all 0.3s ease;\n    pointer-events: none;\n    background: rgba(255, 255, 255, 0.9);\n    padding: 0 0.5rem;\n}\n\n.form-floating-modern input:focus + label,\n.form-floating-modern input:not(:placeholder-shown) + label {\n    top: -0.5rem;\n    font-size: 0.875rem;\n    color: var(--primary-color);\n    font-weight: 600;\n}\n\n/* Notification Enhancements */\n.notification-badge {\n    position: relative;\n    display: inline-block;\n}\n\n.notification-badge::after {\n    content: '';\n    position: absolute;\n    top: -2px;\n    right: -2px;\n    width: 8px;\n    height: 8px;\n    background: #ef4444;\n    border-radius: 50%;\n    border: 2px solid #fff;\n    animation: pulse-notification 2s infinite;\n}\n\n@keyframes pulse-notification {\n    0%, 100% { transform: scale(1); }\n    50% { transform: scale(1.2); }\n}\n\n/* Tooltip Enhancements */\n.tooltip-modern {\n    position: relative;\n    cursor: help;\n}\n\n.tooltip-modern::before {\n    content: attr(data-tooltip);\n    position: absolute;\n    bottom: 100%;\n    left: 50%;\n    transform: translateX(-50%);\n    background: rgba(0, 0, 0, 0.9);\n    color: white;\n    padding: 0.5rem 1rem;\n    border-radius: 8px;\n    font-size: 0.875rem;\n    white-space: nowrap;\n    opacity: 0;\n    visibility: hidden;\n    transition: all 0.3s ease;\n    z-index: 1000;\n}\n\n.tooltip-modern::after {\n    content: '';\n    position: absolute;\n    bottom: 100%;\n    left: 50%;\n    transform: translateX(-50%);\n    width: 0;\n    height: 0;\n    border-left: 6px solid transparent;\n    border-right: 6px solid transparent;\n    border-top: 6px solid rgba(0, 0, 0, 0.9);\n    opacity: 0;\n    visibility: hidden;\n    transition: all 0.3s ease;\n}\n\n.tooltip-modern:hover::before,\n.tooltip-modern:hover::after {\n    opacity: 1;\n    visibility: visible;\n    bottom: calc(100% + 5px);\n}\n\n\n.form-select:focus {\n    outline: 2px solid var(--primary-color);\n    outline-offset: 2px;\n}\n\n/* High contrast mode support */\n@media (prefers-contrast: high) {\n    .card {\n        border: 2px solid #000;\n    }\n    \n    .btn {\n        border-width: 2px;\n    }\n}\n\n/* Reduced motion support */\n@media (prefers-reduced-motion: reduce) {\n    *,\n    *::before,\n    *::after {\n        animation-duration: 0.01ms !important;\n        animation-iteration-count: 1 !important;\n        transition-duration: 0.01ms !important;\n    }\n}\n","size_bytes":27995},"assets/js/admin.js":{"content":"/**\n * VideoHub Admin Panel Module\n * Handles admin dashboard functionality with API integration\n */\n\nclass AdminManager {\n    constructor() {\n        this.users = [];\n        this.videos = [];\n        this.stats = {};\n        this.recentActivity = [];\n        this.notifications = [];\n        this.systemStatus = {};\n        this.init();\n    }\n\n    async init() {\n        this.loadMockData(); // Fallback for demo\n        this.bindEvents();\n        \n        // Only load admin dashboard data if needed, then load page-specific handlers\n        const currentPage = window.location.pathname.split('/').pop();\n        if (currentPage === 'dashboard.html') {\n            await this.loadDashboardData();\n        } else {\n            // Wait for API service to be available for other pages\n            await this.waitForAPIService();\n        }\n        \n        this.loadPageSpecificHandlers();\n    }\n\n    async waitForAPIService() {\n        let retries = 0;\n        const maxRetries = 50;\n        \n        while (retries < maxRetries && !window.apiService) {\n            await new Promise(resolve => setTimeout(resolve, 100));\n            retries++;\n        }\n\n        if (window.apiService) {\n            try {\n                const [usersResponse, videosResponse] = await Promise.all([\n                    window.apiService.get('/admin/users'),\n                    window.apiService.get('/videos')\n                ]);\n                \n                this.users = usersResponse.data || usersResponse.users || [];\n                this.videos = videosResponse.data || videosResponse.videos || [];\n            } catch (error) {\n                console.error('Failed to load data from API:', error);\n                this.users = [];\n                this.videos = [];\n            }\n        }\n    }\n\n    loadMockData() {\n        // Initialize empty arrays - data will be loaded from API\n        this.users = [];\n        this.videos = [];\n        this.stats = {};\n    }\n\n    async loadDashboardData() {\n        try {\n            // Wait for data service to be available\n            let retries = 0;\n            const maxRetries = 50;\n            \n            while (retries < maxRetries && !window.apiService) {\n                await new Promise(resolve => setTimeout(resolve, 100));\n                retries++;\n            }\n\n            // Load admin-specific dashboard data\n            const adminData = await this.loadAdminDashboardData();\n            \n            if (window.apiService) {\n                // Use API service\n                const [usersResponse, videosResponse] = await Promise.all([\n                    window.apiService.get('/admin/users'),\n                    window.apiService.get('/videos')\n                ]);\n                \n                this.users = usersResponse.data || usersResponse.users || [];\n                this.videos = videosResponse.data || videosResponse.videos || [];\n                \n                // Use admin dashboard stats if available, otherwise calculate from data\n                this.stats = adminData?.stats || {\n                    totalUsers: this.users.length,\n                    totalVideos: this.videos.length,\n                    pendingVideos: this.videos.filter(v => v.status === 'pending').length,\n                    totalViews: this.videos.reduce((sum, v) => sum + (v.views || 0), 0)\n                };\n\n                this.recentActivity = adminData?.recentActivity || [];\n                this.notifications = adminData?.notifications || [];\n                this.systemStatus = adminData?.systemStatus || {};\n            } else {\n                // Fallback data\n                this.stats = {\n                    totalUsers: 0,\n                    totalVideos: 0,\n                    pendingVideos: 0,\n                    totalViews: 0\n                };\n                this.recentActivity = [];\n                this.notifications = [];\n                this.systemStatus = {};\n            }\n\n            this.updateDashboardDisplay();\n            \n            // Only load dashboard-specific content on dashboard page\n            const currentPage = window.location.pathname.split('/').pop();\n            if (currentPage === 'dashboard.html') {\n                this.loadRecentActivity();\n                this.loadSystemStatus();\n            }\n            console.log('Admin data loaded:', { \n                users: this.users.length, \n                videos: this.videos.length,\n                activities: this.recentActivity.length \n            });\n        } catch (error) {\n            console.error('Error loading admin data:', error);\n            this.updateDashboardDisplay();\n        }\n    }\n\n    async loadAdminDashboardData() {\n        try {\n            console.log('Fetching admin dashboard data from API...');\n            \n            // Wait for API service to be available\n            let retries = 0;\n            while (retries < 50 && !window.apiService) {\n                await new Promise(resolve => setTimeout(resolve, 100));\n                retries++;\n            }\n            \n            if (window.apiService) {\n                const response = await window.apiService.getAdminStats();\n                if (response.success) {\n                    console.log('Admin dashboard data loaded:', response.data);\n                    return response.data;\n                }\n            }\n            console.error('Failed to load admin dashboard data');\n        } catch (error) {\n            console.error('Error loading admin dashboard data:', error);\n        }\n        return null;\n    }\n\n    updateDashboardDisplay() {\n        console.log('Updating dashboard display with stats:', this.stats);\n        \n        // Update stats cards\n        const totalUsersEl = document.getElementById('totalUsers');\n        const totalVideosEl = document.getElementById('totalVideos');\n        const pendingVideosEl = document.getElementById('pendingVideos');\n        const totalViewsEl = document.getElementById('totalViews');\n        \n        console.log('Found elements:', {\n            totalUsers: !!totalUsersEl,\n            totalVideos: !!totalVideosEl,\n            pendingVideos: !!pendingVideosEl,\n            totalViews: !!totalViewsEl\n        });\n        \n        if (totalUsersEl) totalUsersEl.textContent = this.stats.totalUsers || '--';\n        if (totalVideosEl) totalVideosEl.textContent = this.stats.totalVideos || '--';\n        if (pendingVideosEl) pendingVideosEl.textContent = this.stats.pendingVideos || '--';\n        if (totalViewsEl) totalViewsEl.textContent = this.formatNumber(this.stats.totalViews) || '--';\n    }\n\n    loadRecentActivity() {\n        const activityContainer = document.getElementById('recentActivity');\n        console.log('Loading recent activity...', {\n            containerFound: !!activityContainer,\n            activitiesCount: this.recentActivity?.length || 0\n        });\n        \n        if (!activityContainer) {\n            console.log('Recent activity container not found (expected on non-dashboard pages)');\n            return;\n        }\n        \n        if (!this.recentActivity?.length) {\n            console.log('No recent activity data available');\n            return;\n        }\n\n        activityContainer.innerHTML = this.recentActivity.map(activity => `\n            <div class=\"d-flex align-items-center mb-3\">\n                <div class=\"avatar bg-${activity.iconColor} bg-opacity-10 text-${activity.iconColor} rounded-circle p-2 me-3\">\n                    <i class=\"${activity.icon}\"></i>\n                </div>\n                <div class=\"flex-grow-1\">\n                    <p class=\"mb-1\">${activity.message}</p>\n                    <p class=\"text-muted text-sm mb-0\">${activity.timeAgo}</p>\n                </div>\n            </div>\n        `).join('');\n        \n        console.log('Recent activity loaded successfully');\n    }\n\n    loadSystemStatus() {\n        if (!this.systemStatus || Object.keys(this.systemStatus).length === 0) return;\n\n        // Update server status\n        this.updateSystemStatusIndicator('server', this.systemStatus.server);\n        this.updateSystemStatusIndicator('database', this.systemStatus.database);\n        this.updateSystemStatusIndicator('storage', this.systemStatus.storage);\n        this.updateSystemStatusIndicator('cdn', this.systemStatus.cdn);\n    }\n\n    updateSystemStatusIndicator(service, statusData) {\n        const indicator = document.querySelector(`[data-service=\"${service}\"]`);\n        if (!indicator) return;\n\n        const statusColor = statusData.status === 'online' ? 'success' : \n                           statusData.status === 'warning' ? 'warning' : 'danger';\n        \n        indicator.innerHTML = `\n            <div class=\"d-flex align-items-center justify-content-between\">\n                <div class=\"d-flex align-items-center\">\n                    <div class=\"bg-${statusColor} rounded-circle me-2\" style=\"width: 8px; height: 8px;\"></div>\n                    <span class=\"text-sm\">${service.charAt(0).toUpperCase() + service.slice(1)}</span>\n                </div>\n                <span class=\"badge bg-${statusColor}\">${statusData.status}</span>\n            </div>\n        `;\n    }\n\n    formatNumber(num) {\n        if (!num) return '0';\n        return new Intl.NumberFormat().format(num);\n    }\n\n    bindEvents() {\n        // Refresh button\n        document.addEventListener('click', (e) => {\n            if (e.target.matches('[onclick*=\"refresh\"]') || \n                e.target.closest('[onclick*=\"refresh\"]')) {\n                e.preventDefault();\n                this.refreshDashboard();\n            }\n        });\n    }\n\n    async refreshDashboard() {\n        // Show loading state\n        const refreshBtn = document.querySelector('[onclick*=\"refresh\"]');\n        if (refreshBtn) {\n            refreshBtn.innerHTML = '<i class=\"fas fa-spinner fa-spin me-1\"></i> Refreshing...';\n            refreshBtn.disabled = true;\n        }\n\n        await this.loadDashboardData();\n\n        // Reset button\n        if (refreshBtn) {\n            refreshBtn.innerHTML = '<i class=\"fas fa-refresh me-1\"></i> Refresh';\n            refreshBtn.disabled = false;\n        }\n\n        if (window.apiService) {\n            window.apiService.showSuccessMessage('Dashboard refreshed successfully');\n        }\n    }\n\n    loadPageSpecificHandlers() {\n        const currentPage = window.location.pathname.split('/').pop();\n        \n        switch (currentPage) {\n            case 'dashboard.html':\n                this.setupDashboard();\n                break;\n            case 'users.html':\n                this.setupUsersPage();\n                break;\n            case 'videos.html':\n                this.setupVideosPage();\n                break;\n            case 'analytics.html':\n                this.setupAnalyticsPage();\n                break;\n            case 'profile.html':\n                this.setupProfilePage();\n                break;\n        }\n    }\n\n    setupDashboard() {\n        // Dashboard is already set up in init()\n    }\n\n    async setupUsersPage() {\n        try {\n            console.log('Setting up users page with', this.users.length, 'users');\n            if (!this.users || this.users.length === 0) {\n                await this.waitForDataService();\n            }\n            this.renderUsersTable(this.users);\n        } catch (error) {\n            console.error('Error loading users:', error);\n            this.renderUsersTable([]);\n        }\n    }\n\n    renderUsersTable(users) {\n        const tbody = document.querySelector('#usersTable tbody');\n        if (!tbody) return;\n\n        if (!users || users.length === 0) {\n            tbody.innerHTML = '<tr><td colspan=\"7\" class=\"text-center py-4 text-muted\">No users found</td></tr>';\n            return;\n        }\n\n        tbody.innerHTML = users.map(user => `\n            <tr>\n                <td>${user.id}</td>\n                <td>\n                    <div class=\"d-flex align-items-center\">\n                        <div class=\"avatar bg-primary bg-opacity-10 text-primary rounded-circle p-2 me-3\" style=\"width: 35px; height: 35px;\">\n                            <i class=\"fas fa-user\"></i>\n                        </div>\n                        <div>\n                            <div class=\"fw-semibold\">${user.name}</div>\n                        </div>\n                    </div>\n                </td>\n                <td>${user.email}</td>\n                <td>\n                    <span class=\"badge ${this.getRoleBadgeClass(user.role)}\">${user.role}</span>\n                </td>\n                <td>\n                    <span class=\"badge ${this.getStatusBadgeClass(user.status)}\">${user.status}</span>\n                </td>\n                <td>${this.formatDate(user.joinDate)}</td>\n                <td>\n                    <div class=\"btn-group btn-group-sm\">\n                        <button class=\"btn btn-outline-primary\" onclick=\"adminManager.editUser(${user.id})\">\n                            <i class=\"fas fa-edit\"></i>\n                        </button>\n                        <button class=\"btn btn-outline-danger\" onclick=\"adminManager.deleteUser(${user.id})\" ${user.role === 'admin' ? 'disabled' : ''}>\n                            <i class=\"fas fa-trash\"></i>\n                        </button>\n                    </div>\n                </td>\n            </tr>\n        `).join('');\n    }\n\n    getRoleBadgeClass(role) {\n        const classes = {\n            admin: 'bg-danger text-white',\n            creator: 'bg-success text-white',\n            viewer: 'bg-info text-white'\n        };\n        return classes[role] || 'bg-secondary text-white';\n    }\n\n    getStatusBadgeClass(status) {\n        const classes = {\n            active: 'bg-success text-white',\n            inactive: 'bg-secondary text-white',\n            suspended: 'bg-warning text-dark'\n        };\n        return classes[status] || 'bg-secondary text-white';\n    }\n\n    formatDate(dateString) {\n        if (!dateString) return '--';\n        return new Date(dateString).toLocaleDateString();\n    }\n\n    async setupVideosPage() {\n        try {\n            console.log('Setting up videos page with', this.videos.length, 'videos');\n            if (!this.videos || this.videos.length === 0) {\n                await this.waitForDataService();\n            }\n            this.renderVideosGrid(this.videos);\n            this.updateVideoStats();\n        } catch (error) {\n            console.error('Error loading videos:', error);\n            this.renderVideosGrid([]);\n        }\n    }\n\n    renderVideosGrid(videos) {\n        const videosGrid = document.getElementById('videosGrid');\n        if (!videosGrid) return;\n\n        if (!videos || videos.length === 0) {\n            videosGrid.innerHTML = '<div class=\"col-12 text-center py-5\"><p class=\"text-muted\">No videos found</p></div>';\n            return;\n        }\n\n        videosGrid.innerHTML = videos.map(video => `\n            <div class=\"col-lg-4 col-md-6 mb-4\">\n                <div class=\"card h-100\">\n                    <div class=\"position-relative\">\n                        <img src=\"${video.thumbnail}\" class=\"card-img-top\" alt=\"${video.title}\" style=\"height: 200px; object-fit: cover;\">\n                        <div class=\"position-absolute top-0 end-0 m-2\">\n                            <span class=\"badge ${this.getStatusBadgeClass(video.status)}\">${video.status}</span>\n                        </div>\n                    </div>\n                    <div class=\"card-body\">\n                        <h6 class=\"card-title\">${video.title}</h6>\n                        <p class=\"text-muted small mb-1\">by ${video.creatorName}</p>\n                        <p class=\"text-muted small mb-2\">${video.duration} • ${this.formatNumber(video.views)} views</p>\n                        <p class=\"card-text text-truncate\">${video.description}</p>\n                        <div class=\"d-flex justify-content-between align-items-center\">\n                            <span class=\"text-success fw-bold\">$${video.price}</span>\n                            <div class=\"btn-group btn-group-sm\">\n                                <button class=\"btn btn-outline-primary\" onclick=\"adminManager.viewVideo(${video.id})\" title=\"View Details\">\n                                    <i class=\"fas fa-eye\"></i>\n                                </button>\n                                ${video.status === 'pending' ? \n                                    `<button class=\"btn btn-outline-success\" onclick=\"adminManager.approveVideo(${video.id})\" title=\"Approve\">\n                                        <i class=\"fas fa-check\"></i>\n                                    </button>\n                                    <button class=\"btn btn-outline-warning\" onclick=\"adminManager.rejectVideo(${video.id})\" title=\"Reject\">\n                                        <i class=\"fas fa-times\"></i>\n                                    </button>` : ''\n                                }\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        `).join('');\n    }\n\n    updateVideoStats() {\n        const totalVideos = this.videos.length;\n        const publishedVideos = this.videos.filter(v => v.status === 'published').length;\n        const pendingVideos = this.videos.filter(v => v.status === 'pending').length;\n        const flaggedVideos = this.videos.filter(v => v.status === 'flagged').length;\n\n        // Update stat cards on videos page if they exist\n        const totalCard = document.querySelector('.card.bg-primary h4');\n        const publishedCard = document.querySelector('.card.bg-success h4');\n        const pendingCard = document.querySelector('.card.bg-warning h4');\n        const flaggedCard = document.querySelector('.card.bg-danger h4');\n\n        if (totalCard) totalCard.textContent = totalVideos;\n        if (publishedCard) publishedCard.textContent = publishedVideos;\n        if (pendingCard) pendingCard.textContent = pendingVideos;\n        if (flaggedCard) flaggedCard.textContent = flaggedVideos;\n    }\n\n    async setupAnalyticsPage() {\n        try {\n            const analyticsData = await this.loadAnalyticsData();\n            if (analyticsData) {\n                this.renderAnalyticsCharts(analyticsData);\n            }\n        } catch (error) {\n            console.error('Error loading analytics:', error);\n        }\n    }\n\n    async loadAnalyticsData() {\n        try {\n            if (window.apiService) {\n                const response = await window.apiService.getAnalytics();\n                if (response.success) {\n                    return response.data;\n                }\n            }\n        } catch (error) {\n            console.error('Error loading analytics data:', error);\n        }\n        return null;\n    }\n\n    renderAnalyticsCharts(data) {\n        // Update overview metrics\n        const totalUsersEl = document.querySelector('[data-metric=\"total-users\"] h3');\n        const totalVideosEl = document.querySelector('[data-metric=\"total-videos\"] h3');\n        const totalRevenueEl = document.querySelector('[data-metric=\"total-revenue\"] h3');\n        const totalViewsEl = document.querySelector('[data-metric=\"total-views\"] h3');\n\n        if (totalUsersEl) totalUsersEl.textContent = data.overview.totalUsers;\n        if (totalVideosEl) totalVideosEl.textContent = data.overview.totalVideos;\n        if (totalRevenueEl) totalRevenueEl.textContent = `$${data.overview.totalRevenue.toLocaleString()}`;\n        if (totalViewsEl) totalViewsEl.textContent = data.overview.totalViews.toLocaleString();\n\n        // Update growth percentages\n        const usersGrowthEl = document.querySelector('[data-growth=\"users\"]');\n        const videosGrowthEl = document.querySelector('[data-growth=\"videos\"]');\n        const revenueGrowthEl = document.querySelector('[data-growth=\"revenue\"]');\n        const viewsGrowthEl = document.querySelector('[data-growth=\"views\"]');\n\n        if (usersGrowthEl) usersGrowthEl.textContent = `+${data.overview.monthlyGrowth.users}%`;\n        if (videosGrowthEl) videosGrowthEl.textContent = `+${data.overview.monthlyGrowth.videos}%`;\n        if (revenueGrowthEl) revenueGrowthEl.textContent = `+${data.overview.monthlyGrowth.revenue}%`;\n        if (viewsGrowthEl) viewsGrowthEl.textContent = `+${data.overview.monthlyGrowth.views}%`;\n    }\n\n    setupProfilePage() {\n        // Profile page setup\n        console.log('Profile page loaded');\n    }\n\n    // Action methods for user interactions\n    editUser(userId) {\n        console.log('Edit user:', userId);\n        // Implementation would open edit modal\n        if (window.CommonUtils) {\n            window.CommonUtils.prototype.showToast('Edit user functionality coming soon', 'info');\n        }\n    }\n\n    deleteUser(userId) {\n        console.log('Delete user:', userId);\n        // Implementation would show confirmation dialog\n        if (window.CommonUtils) {\n            window.CommonUtils.prototype.showToast('Delete user functionality coming soon', 'warning');\n        }\n    }\n\n    viewVideo(videoId) {\n        console.log('View video:', videoId);\n        // Implementation would open video details modal\n        if (window.CommonUtils) {\n            window.CommonUtils.prototype.showToast('View video details coming soon', 'info');\n        }\n    }\n\n    approveVideo(videoId) {\n        console.log('Approve video:', videoId);\n        // Implementation would update video status\n        if (window.CommonUtils) {\n            window.CommonUtils.prototype.showToast('Video approval functionality coming soon', 'success');\n        }\n    }\n\n    rejectVideo(videoId) {\n        console.log('Reject video:', videoId);\n        // Implementation would update video status\n        if (window.CommonUtils) {\n            window.CommonUtils.prototype.showToast('Video rejection functionality coming soon', 'warning');\n        }\n    }\n}\n\n// Initialize AdminManager when DOM is loaded\ndocument.addEventListener('DOMContentLoaded', () => {\n    window.adminManager = new AdminManager();\n});\n\n// Export for module usage\nif (typeof module !== 'undefined' && module.exports) {\n    module.exports = AdminManager;\n}","size_bytes":22133},"assets/js/api.js":{"content":"/**\n * VideoHub API Service\n * Handles all backend API communications\n */\n\n// Use a more reliable approach to prevent duplicate loading\n(function() {\n    'use strict';\n    \n    if (window.APIService && window.apiService) {\n        console.log('APIService already loaded');\n        return;\n    }\n\n    class APIService {\n    constructor() {\n        this.baseURL = '/api';\n        this.timeout = 10000;\n        this.useDataService = false; // Now using PHP backend\n        this.init();\n    }\n\n    init() {\n        this.defaultHeaders = {\n            'Content-Type': 'application/json',\n            'Accept': 'application/json'\n        };\n        \n        // Wait for dataService to be initialized if using it\n        if (this.useDataService && !window.dataService) {\n            setTimeout(() => this.init(), 100);\n        }\n    }\n\n    // Generic HTTP methods\n    async request(method, endpoint, data = null, options = {}) {\n        const url = `${this.baseURL}${endpoint}`;\n        const config = {\n            method,\n            headers: {\n                ...this.defaultHeaders,\n                ...options.headers\n            },\n            ...options\n        };\n\n        // Add authentication token if available\n        const token = this.getAuthToken();\n        if (token) {\n            config.headers['Authorization'] = `Bearer ${token}`;\n        }\n\n        // Add body for POST, PUT, PATCH requests\n        if (data && ['POST', 'PUT', 'PATCH'].includes(method.toUpperCase())) {\n            config.body = JSON.stringify(data);\n        }\n\n        try {\n            const controller = new AbortController();\n            const timeoutId = setTimeout(() => controller.abort(), this.timeout);\n            \n            config.signal = controller.signal;\n            \n            const response = await fetch(url, config);\n            clearTimeout(timeoutId);\n\n            if (!response.ok) {\n                throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n            }\n\n            const result = await response.json();\n            return { success: true, data: result };\n        } catch (error) {\n            console.error(`API Error [${method} ${endpoint}]:`, error);\n            return { \n                success: false, \n                error: error.message,\n                isNetworkError: error.name === 'TypeError' || error.name === 'AbortError'\n            };\n        }\n    }\n\n    async get(endpoint, options = {}) {\n        return this.request('GET', endpoint, null, options);\n    }\n\n    async post(endpoint, data, options = {}) {\n        return this.request('POST', endpoint, data, options);\n    }\n\n    async put(endpoint, data, options = {}) {\n        return this.request('PUT', endpoint, data, options);\n    }\n\n    async delete(endpoint, options = {}) {\n        return this.request('DELETE', endpoint, null, options);\n    }\n\n    // Authentication\n    getAuthToken() {\n        return localStorage.getItem('authToken');\n    }\n\n    setAuthToken(token) {\n        localStorage.setItem('authToken', token);\n    }\n\n    clearAuthToken() {\n        localStorage.removeItem('authToken');\n    }\n\n    // Auth API endpoints\n    async login(credentials) {\n        return this.post('/auth/login', credentials);\n    }\n\n    async register(userData) {\n        return this.post('/auth/register', userData);\n    }\n\n    async logout() {\n        const result = await this.post('/auth/logout');\n        this.clearAuthToken();\n        return result;\n    }\n\n    async verifyToken() {\n        return this.get('/auth/verify');\n    }\n\n    // User API endpoints\n    async getUserProfile() {\n        return this.get('/users/profile');\n    }\n\n    async updateUserProfile(profileData) {\n        return this.put('/users/profile', profileData);\n    }\n\n    async getUsers(params = {}) {\n        if (this.useDataService && window.dataService) {\n            return window.dataService.getUsers(params);\n        }\n        const queryString = new URLSearchParams(params).toString();\n        return this.get(`/users${queryString ? '?' + queryString : ''}`);\n    }\n\n    async updateUserRole(userId, role) {\n        return this.put(`/users/${userId}/role`, { role });\n    }\n\n    async deleteUser(userId) {\n        return this.delete(`/users/${userId}`);\n    }\n\n    // Video API endpoints\n    async getVideos(params = {}) {\n        if (this.useDataService && window.dataService) {\n            return window.dataService.getVideos(params);\n        }\n        const queryString = new URLSearchParams(params).toString();\n        return this.get(`/videos${queryString ? '?' + queryString : ''}`);\n    }\n\n    async getVideo(videoId) {\n        return this.get(`/videos/${videoId}`);\n    }\n\n    async uploadVideo(videoData) {\n        if (this.useDataService && window.dataService) {\n            return window.dataService.uploadVideo(videoData);\n        }\n        // For file uploads, we need to use FormData\n        const formData = new FormData();\n        Object.keys(videoData).forEach(key => {\n            formData.append(key, videoData[key]);\n        });\n\n        return this.request('POST', '/videos', formData, {\n            headers: {} // Remove Content-Type to let browser set it for FormData\n        });\n    }\n\n    async updateVideo(videoId, videoData) {\n        if (this.useDataService && window.dataService) {\n            return window.dataService.updateVideo(videoId, videoData);\n        }\n        return this.put(`/videos/${videoId}`, videoData);\n    }\n\n    async deleteVideo(videoId) {\n        if (this.useDataService && window.dataService) {\n            return window.dataService.deleteVideo(videoId);\n        }\n        return this.delete(`/videos/${videoId}`);\n    }\n\n    async duplicateVideo(videoId) {\n        if (this.useDataService && window.dataService) {\n            return window.dataService.duplicateVideo(videoId);\n        }\n        return this.post(`/videos/${videoId}/duplicate`);\n    }\n\n    async approveVideo(videoId) {\n        return this.put(`/videos/${videoId}/approve`);\n    }\n\n    async rejectVideo(videoId, reason) {\n        return this.put(`/videos/${videoId}/reject`, { reason });\n    }\n\n    // Creator API endpoints\n    async getCreatorStats() {\n        if (this.useDataService && window.dataService) {\n            return window.dataService.getCreatorStats();\n        }\n        return this.get('/creator/stats');\n    }\n\n    async getCreatorVideos(params = {}) {\n        if (this.useDataService && window.dataService) {\n            return window.dataService.getCreatorVideos(null, params);\n        }\n        const queryString = new URLSearchParams(params).toString();\n        return this.get(`/creator/videos${queryString ? '?' + queryString : ''}`);\n    }\n\n    async getCreatorEarnings(params = {}) {\n        if (this.useDataService && window.dataService) {\n            return window.dataService.getCreatorEarnings(null, params);\n        }\n        const queryString = new URLSearchParams(params).toString();\n        return this.get(`/creator/earnings${queryString ? '?' + queryString : ''}`);\n    }\n\n    // Viewer API endpoints\n    async purchaseVideo(videoId, paymentData) {\n        if (this.useDataService && window.dataService) {\n            return window.dataService.purchaseVideo(videoId, paymentData);\n        }\n        return this.post(`/videos/${videoId}/purchase`, paymentData);\n    }\n\n    async getViewerPurchases() {\n        if (this.useDataService && window.dataService) {\n            return window.dataService.getViewerPurchases();\n        }\n        return this.get('/viewer/purchases');\n    }\n\n    async getViewerStats() {\n        if (this.useDataService && window.dataService) {\n            return window.dataService.getViewerStats();\n        }\n        return this.get('/viewer/stats');\n    }\n\n    // Admin API endpoints\n    async getAdminStats() {\n        if (this.useDataService && window.dataService) {\n            return window.dataService.getAdminStats();\n        }\n        return this.get('/admin/stats');\n    }\n\n    async getAdminUsers(params = {}) {\n        if (this.useDataService && window.dataService) {\n            return window.dataService.getUsers(params);\n        }\n        const queryString = new URLSearchParams(params).toString();\n        return this.get(`/admin/users${queryString ? '?' + queryString : ''}`);\n    }\n\n    async getSystemHealth() {\n        return this.get('/admin/health');\n    }\n\n    async getAnalytics() {\n        if (this.useDataService && window.dataService) {\n            return window.dataService.getAnalyticsData();\n        }\n        return this.get('/admin/analytics');\n    }\n\n    async getPurchases(params = {}) {\n        if (this.useDataService && window.dataService) {\n            return window.dataService.getViewerPurchases(null, params);\n        }\n        const queryString = new URLSearchParams(params).toString();\n        return this.get(`/purchases${queryString ? '?' + queryString : ''}`);\n    }\n\n    // Search API endpoints\n    async searchVideos(query, filters = {}) {\n        const params = { q: query, ...filters };\n        const queryString = new URLSearchParams(params).toString();\n        return this.get(`/search/videos?${queryString}`);\n    }\n\n    // Utility methods\n    handleApiError(error, context = '') {\n        let message = 'Something went wrong. Please try again.';\n        \n        if (error.isNetworkError) {\n            message = 'Network error. Please check your connection.';\n        } else if (error.error) {\n            message = error.error;\n        }\n\n        if (context) {\n            message = `${context}: ${message}`;\n        }\n\n        // Show toast notification\n        if (window.commonUtils) {\n            window.commonUtils.showToast(message, 'danger');\n        }\n\n        return message;\n    }\n\n    showSuccessMessage(message) {\n        if (window.commonUtils) {\n            window.commonUtils.showToast(message, 'success');\n        }\n    }\n    }\n\n    // Export to global scope\n    window.APIService = APIService;\n    window.apiService = new APIService();\n    console.log('APIService initialized successfully');\n    \n})(); // End of IIFE","size_bytes":10056},"assets/js/auth.js":{"content":"/**\n * VideoHub Authentication Module\n * Handles user registration, login, password reset, and email verification\n */\n\nclass AuthManager {\n    constructor() {\n        this.init();\n    }\n\n    init() {\n        this.bindEvents();\n        this.loadPageSpecificHandlers();\n    }\n\n    bindEvents() {\n        // Login form\n        const loginForm = document.getElementById('loginForm');\n        if (loginForm) {\n            loginForm.addEventListener('submit', this.handleLogin.bind(this));\n        }\n\n        // Signup form\n        const signupForm = document.getElementById('signupForm');\n        if (signupForm) {\n            signupForm.addEventListener('submit', this.handleSignup.bind(this));\n        }\n\n        // Forgot password form\n        const forgotPasswordForm = document.getElementById('forgotPasswordForm');\n        if (forgotPasswordForm) {\n            forgotPasswordForm.addEventListener('submit', this.handleForgotPassword.bind(this));\n        }\n\n        // Set password form\n        const setPasswordForm = document.getElementById('setPasswordForm');\n        if (setPasswordForm) {\n            setPasswordForm.addEventListener('submit', this.handleSetPassword.bind(this));\n        }\n\n        // Email verification actions\n        const verifyButton = document.getElementById('verifyButton');\n        if (verifyButton) {\n            verifyButton.addEventListener('click', this.handleEmailVerification.bind(this));\n        }\n\n        const resendEmail = document.getElementById('resendEmail');\n        if (resendEmail) {\n            resendEmail.addEventListener('click', this.handleResendEmail.bind(this));\n        }\n\n        // Password strength checker\n        const newPasswordInput = document.getElementById('newPassword');\n        if (newPasswordInput) {\n            newPasswordInput.addEventListener('input', this.checkPasswordStrength.bind(this));\n        }\n\n        // Password toggle\n        const togglePassword = document.getElementById('togglePassword');\n        if (togglePassword) {\n            togglePassword.addEventListener('click', this.togglePasswordVisibility.bind(this));\n        }\n    }\n\n    loadPageSpecificHandlers() {\n        // Handle demo login prefill\n        this.setupDemoLogin();\n        \n        // Handle URL parameters for verification\n        this.handleUrlParameters();\n    }\n\n    setupDemoLogin() {\n        const demoButtons = document.querySelectorAll('.demo-login-btn');\n        demoButtons.forEach(btn => {\n            btn.addEventListener('click', (e) => {\n                const userType = e.target.dataset.userType;\n                this.prefillDemoCredentials(userType);\n            });\n        });\n    }\n\n    prefillDemoCredentials(userType) {\n        const emailInput = document.getElementById('email');\n        const passwordInput = document.getElementById('password');\n        \n        if (!emailInput || !passwordInput) return;\n\n        const credentials = {\n            admin: { email: 'admin@videohub.com', password: 'admin123' },\n            creator: { email: 'creator@videohub.com', password: 'creator123' },\n            viewer: { email: 'viewer@videohub.com', password: 'viewer123' }\n        };\n\n        if (credentials[userType]) {\n            emailInput.value = credentials[userType].email;\n            passwordInput.value = credentials[userType].password;\n        }\n    }\n\n    handleUrlParameters() {\n        const urlParams = new URLSearchParams(window.location.search);\n        const email = urlParams.get('email');\n        const token = urlParams.get('token');\n\n        if (email) {\n            const userEmailSpan = document.getElementById('userEmail');\n            if (userEmailSpan) {\n                userEmailSpan.textContent = email;\n            }\n        }\n\n        if (token) {\n            // Auto-verify if token is present\n            setTimeout(() => {\n                this.handleEmailVerification();\n            }, 1000);\n        }\n    }\n\n    async handleLogin(e) {\n        e.preventDefault();\n        \n        const email = document.getElementById('email').value;\n        const password = document.getElementById('password').value;\n        const rememberMe = document.getElementById('rememberMe').checked;\n\n        try {\n            this.showLoading('Signing in...');\n            \n            // Simulate API call\n            await this.delay(1500);\n            \n            // Demo authentication\n            const userType = this.getUserTypeFromEmail(email);\n            \n            if (userType) {\n                // Store user session\n                this.setUserSession({\n                    email: email,\n                    userType: userType,\n                    rememberMe: rememberMe\n                });\n\n                this.showSuccess('Login successful! Redirecting...');\n                \n                // Redirect based on user type\n                setTimeout(() => {\n                    this.redirectToUserDashboard(userType);\n                }, 1000);\n            } else {\n                throw new Error('Invalid credentials');\n            }\n            \n        } catch (error) {\n            this.showError('Invalid email or password. Please try again.');\n        } finally {\n            this.hideLoading();\n        }\n    }\n\n    async handleSignup(e) {\n        e.preventDefault();\n        \n        const formData = {\n            firstName: document.getElementById('firstName').value,\n            lastName: document.getElementById('lastName').value,\n            email: document.getElementById('email').value,\n            userType: document.getElementById('userType').value,\n            password: document.getElementById('password').value,\n            confirmPassword: document.getElementById('confirmPassword').value,\n            agreeTerms: document.getElementById('agreeTerms').checked\n        };\n\n        try {\n            // Validate form\n            this.validateSignupForm(formData);\n            \n            this.showLoading('Creating your account...');\n            \n            // Simulate API call\n            await this.delay(2000);\n            \n            this.showSuccess('Account created successfully! Please check your email for verification.');\n            \n            // Redirect to email verification\n            setTimeout(() => {\n                window.location.href = `email-verification.html?email=${encodeURIComponent(formData.email)}`;\n            }, 1500);\n            \n        } catch (error) {\n            this.showError(error.message);\n        } finally {\n            this.hideLoading();\n        }\n    }\n\n    async handleForgotPassword(e) {\n        e.preventDefault();\n        \n        const email = document.getElementById('email').value;\n\n        try {\n            this.showLoading('Sending reset link...');\n            \n            // Simulate API call\n            await this.delay(1500);\n            \n            // Hide form and show success message\n            document.getElementById('emailForm').style.display = 'none';\n            document.getElementById('successMessage').classList.remove('d-none');\n            \n        } catch (error) {\n            this.showError('Failed to send reset email. Please try again.');\n        } finally {\n            this.hideLoading();\n        }\n    }\n\n    async handleEmailVerification() {\n        try {\n            this.showLoading('Verifying email...');\n            \n            // Simulate API call\n            await this.delay(1500);\n            \n            // Hide pending verification and show success\n            document.getElementById('pendingVerification').style.display = 'none';\n            document.getElementById('verificationSuccess').classList.remove('d-none');\n            \n        } catch (error) {\n            this.showError('Verification failed. Please try again.');\n        } finally {\n            this.hideLoading();\n        }\n    }\n\n    async handleResendEmail() {\n        try {\n            this.showLoading('Resending verification email...');\n            \n            // Simulate API call\n            await this.delay(1000);\n            \n            this.showSuccess('Verification email sent successfully!');\n            \n        } catch (error) {\n            this.showError('Failed to resend email. Please try again.');\n        } finally {\n            this.hideLoading();\n        }\n    }\n\n    async handleSetPassword(e) {\n        e.preventDefault();\n        \n        const newPassword = document.getElementById('newPassword').value;\n        const confirmPassword = document.getElementById('confirmPassword').value;\n\n        try {\n            // Validate passwords\n            if (newPassword !== confirmPassword) {\n                throw new Error('Passwords do not match');\n            }\n            \n            if (!this.isPasswordStrong(newPassword)) {\n                throw new Error('Password does not meet strength requirements');\n            }\n            \n            this.showLoading('Setting password...');\n            \n            // Simulate API call\n            await this.delay(1500);\n            \n            this.showSuccess('Password set successfully! You can now log in.');\n            \n            // Redirect to login\n            setTimeout(() => {\n                window.location.href = 'login.html';\n            }, 1500);\n            \n        } catch (error) {\n            this.showError(error.message);\n        } finally {\n            this.hideLoading();\n        }\n    }\n\n    validateSignupForm(formData) {\n        if (!formData.firstName.trim()) {\n            throw new Error('First name is required');\n        }\n        \n        if (!formData.lastName.trim()) {\n            throw new Error('Last name is required');\n        }\n        \n        if (!this.isValidEmail(formData.email)) {\n            throw new Error('Please enter a valid email address');\n        }\n        \n        if (!formData.userType) {\n            throw new Error('Please select an account type');\n        }\n        \n        if (formData.password.length < 8) {\n            throw new Error('Password must be at least 8 characters long');\n        }\n        \n        if (formData.password !== formData.confirmPassword) {\n            throw new Error('Passwords do not match');\n        }\n        \n        if (!formData.agreeTerms) {\n            throw new Error('You must agree to the Terms of Service');\n        }\n    }\n\n    checkPasswordStrength(e) {\n        const password = e.target.value;\n        const strengthBars = document.querySelectorAll('.strength-bar');\n        const strengthText = document.getElementById('strengthText');\n        \n        if (!strengthBars.length || !strengthText) return;\n\n        const strength = this.calculatePasswordStrength(password);\n        \n        // Reset all bars\n        strengthBars.forEach(bar => {\n            bar.className = 'strength-bar';\n        });\n        \n        // Fill bars based on strength\n        for (let i = 0; i < strength.score; i++) {\n            strengthBars[i].classList.add(strength.class);\n        }\n        \n        strengthText.textContent = strength.text;\n        strengthText.className = `text-${strength.class}`;\n    }\n\n    calculatePasswordStrength(password) {\n        let score = 0;\n        let feedback = [];\n        \n        if (password.length >= 8) score++;\n        if (/[a-z]/.test(password)) score++;\n        if (/[A-Z]/.test(password)) score++;\n        if (/[0-9]/.test(password)) score++;\n        if (/[^A-Za-z0-9]/.test(password)) score++;\n        \n        const strengthLevels = {\n            0: { class: 'muted', text: 'Enter a password' },\n            1: { class: 'danger', text: 'Very weak' },\n            2: { class: 'warning', text: 'Weak' },\n            3: { class: 'info', text: 'Fair' },\n            4: { class: 'success', text: 'Good' },\n            5: { class: 'success', text: 'Strong' }\n        };\n        \n        return { score, ...strengthLevels[score] };\n    }\n\n    isPasswordStrong(password) {\n        return password.length >= 8 && \n               /[a-z]/.test(password) && \n               /[A-Z]/.test(password) && \n               /[0-9]/.test(password);\n    }\n\n    togglePasswordVisibility() {\n        const passwordInput = document.getElementById('newPassword');\n        const toggleButton = document.getElementById('togglePassword');\n        \n        if (passwordInput.type === 'password') {\n            passwordInput.type = 'text';\n            toggleButton.innerHTML = '<i class=\"fas fa-eye-slash\"></i>';\n        } else {\n            passwordInput.type = 'password';\n            toggleButton.innerHTML = '<i class=\"fas fa-eye\"></i>';\n        }\n    }\n\n    getUserTypeFromEmail(email) {\n        if (email.includes('admin@')) return 'admin';\n        if (email.includes('creator@')) return 'creator';\n        if (email.includes('viewer@')) return 'viewer';\n        return null;\n    }\n\n    redirectToUserDashboard(userType) {\n        const dashboardUrls = {\n            admin: '../admin/dashboard.html',\n            creator: '../creator/dashboard.html',\n            viewer: '../viewer/dashboard.html'\n        };\n        \n        window.location.href = dashboardUrls[userType];\n    }\n\n    setUserSession(userData) {\n        const sessionData = {\n            ...userData,\n            timestamp: new Date().toISOString()\n        };\n        \n        if (userData.rememberMe) {\n            localStorage.setItem('userSession', JSON.stringify(sessionData));\n        } else {\n            sessionStorage.setItem('userSession', JSON.stringify(sessionData));\n        }\n    }\n\n    getUserSession() {\n        const localSession = localStorage.getItem('userSession');\n        const sessionSession = sessionStorage.getItem('userSession');\n        \n        const session = localSession || sessionSession;\n        return session ? JSON.parse(session) : null;\n    }\n\n    clearUserSession() {\n        localStorage.removeItem('userSession');\n        sessionStorage.removeItem('userSession');\n    }\n\n    isValidEmail(email) {\n        const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n        return emailRegex.test(email);\n    }\n\n    showLoading(message = 'Loading...') {\n        // Create or update loading indicator\n        let loader = document.getElementById('globalLoader');\n        if (!loader) {\n            loader = document.createElement('div');\n            loader.id = 'globalLoader';\n            loader.className = 'position-fixed top-50 start-50 translate-middle';\n            loader.style.zIndex = '9999';\n            document.body.appendChild(loader);\n        }\n        \n        loader.innerHTML = `\n            <div class=\"bg-white p-4 rounded shadow text-center\">\n                <div class=\"spinner-border text-primary mb-2\" role=\"status\">\n                    <span class=\"visually-hidden\">Loading...</span>\n                </div>\n                <div>${message}</div>\n            </div>\n        `;\n        loader.style.display = 'block';\n    }\n\n    hideLoading() {\n        const loader = document.getElementById('globalLoader');\n        if (loader) {\n            loader.style.display = 'none';\n        }\n    }\n\n    showSuccess(message) {\n        this.showToast(message, 'success');\n    }\n\n    showError(message) {\n        this.showToast(message, 'danger');\n    }\n\n    showToast(message, type = 'info') {\n        // Create toast container if it doesn't exist\n        let toastContainer = document.getElementById('toastContainer');\n        if (!toastContainer) {\n            toastContainer = document.createElement('div');\n            toastContainer.id = 'toastContainer';\n            toastContainer.className = 'toast-container position-fixed top-0 end-0 p-3';\n            toastContainer.style.zIndex = '9999';\n            document.body.appendChild(toastContainer);\n        }\n\n        // Create toast element\n        const toastId = 'toast-' + Date.now();\n        const toastElement = document.createElement('div');\n        toastElement.id = toastId;\n        toastElement.className = `toast align-items-center text-bg-${type} border-0`;\n        toastElement.setAttribute('role', 'alert');\n        toastElement.innerHTML = `\n            <div class=\"d-flex\">\n                <div class=\"toast-body\">${message}</div>\n                <button type=\"button\" class=\"btn-close btn-close-white me-2 m-auto\" data-bs-dismiss=\"toast\"></button>\n            </div>\n        `;\n\n        toastContainer.appendChild(toastElement);\n\n        // Initialize and show toast\n        const toast = new bootstrap.Toast(toastElement, {\n            autohide: true,\n            delay: 5000\n        });\n        toast.show();\n\n        // Remove toast element after it's hidden\n        toastElement.addEventListener('hidden.bs.toast', () => {\n            toastElement.remove();\n        });\n    }\n\n    delay(ms) {\n        return new Promise(resolve => setTimeout(resolve, ms));\n    }\n}\n\n// Initialize authentication manager when DOM is loaded\ndocument.addEventListener('DOMContentLoaded', () => {\n    new AuthManager();\n});\n\n// Export for other modules\nwindow.AuthManager = AuthManager;\n","size_bytes":16940},"assets/js/common.js":{"content":"/**\n * VideoHub Common Utilities Module\n * Shared functionality and utilities used across all modules\n */\n\nclass CommonUtils {\n    constructor() {\n        this.init();\n    }\n\n    init() {\n        this.setupGlobalErrorHandler();\n        this.setupToastContainer();\n        this.bindCommonEvents();\n        this.checkUserSession();\n    }\n\n    setupGlobalErrorHandler() {\n        window.addEventListener('error', (event) => {\n            console.error('Global error:', event.error);\n            this.showToast('An unexpected error occurred. Please try again.', 'danger');\n        });\n\n        window.addEventListener('unhandledrejection', (event) => {\n            console.error('Unhandled promise rejection:', event.reason);\n            this.showToast('An unexpected error occurred. Please try again.', 'danger');\n        });\n    }\n\n    setupToastContainer() {\n        if (!document.getElementById('toastContainer')) {\n            const toastContainer = document.createElement('div');\n            toastContainer.id = 'toastContainer';\n            toastContainer.className = 'toast-container position-fixed top-0 end-0 p-3';\n            toastContainer.style.zIndex = '9999';\n            document.body.appendChild(toastContainer);\n        }\n    }\n\n    bindCommonEvents() {\n        // Handle logout links\n        document.addEventListener('click', (e) => {\n            if (e.target.matches('a[href*=\"login.html\"]') && e.target.textContent.includes('Logout')) {\n                e.preventDefault();\n                this.handleLogout();\n            }\n        });\n\n        // Handle demo mode notifications\n        this.showDemoModeNotification();\n    }\n\n    showDemoModeNotification() {\n        if (window.location.pathname.includes('admin/') || \n            window.location.pathname.includes('creator/') || \n            window.location.pathname.includes('viewer/')) {\n            \n            setTimeout(() => {\n                this.showToast('You are in demo mode. All data and actions are simulated.', 'info', 8000);\n            }, 2000);\n        }\n    }\n\n    checkUserSession() {\n        const session = this.getUserSession();\n        if (session && this.isSessionExpired(session)) {\n            this.clearUserSession();\n            if (!window.location.pathname.includes('auth/')) {\n                this.showToast('Your session has expired. Please log in again.', 'warning');\n                setTimeout(() => {\n                    window.location.href = '/auth/login.html';\n                }, 2000);\n            }\n        }\n    }\n\n    // Session Management\n    getUserSession() {\n        const localSession = localStorage.getItem('userSession');\n        const sessionSession = sessionStorage.getItem('userSession');\n        \n        const session = localSession || sessionSession;\n        return session ? JSON.parse(session) : null;\n    }\n\n    setUserSession(userData) {\n        const sessionData = {\n            ...userData,\n            timestamp: new Date().toISOString(),\n            expires: new Date(Date.now() + (24 * 60 * 60 * 1000)).toISOString() // 24 hours\n        };\n        \n        if (userData.rememberMe) {\n            localStorage.setItem('userSession', JSON.stringify(sessionData));\n        } else {\n            sessionStorage.setItem('userSession', JSON.stringify(sessionData));\n        }\n    }\n\n    clearUserSession() {\n        localStorage.removeItem('userSession');\n        sessionStorage.removeItem('userSession');\n    }\n\n    isSessionExpired(session) {\n        if (!session.expires) return false;\n        return new Date() > new Date(session.expires);\n    }\n\n    handleLogout() {\n        this.clearUserSession();\n        this.showToast('Logged out successfully!', 'success');\n        setTimeout(() => {\n            window.location.href = '/auth/login.html';\n        }, 1000);\n    }\n\n    // Toast Notifications\n    showToast(message, type = 'info', delay = 5000) {\n        const toastContainer = document.getElementById('toastContainer');\n        if (!toastContainer) return;\n\n        const toastId = 'toast-' + Date.now();\n        const toastElement = document.createElement('div');\n        toastElement.id = toastId;\n        toastElement.className = `toast align-items-center text-bg-${type} border-0`;\n        toastElement.setAttribute('role', 'alert');\n        \n        const iconMap = {\n            success: 'fas fa-check-circle',\n            danger: 'fas fa-exclamation-circle',\n            warning: 'fas fa-exclamation-triangle',\n            info: 'fas fa-info-circle'\n        };\n\n        toastElement.innerHTML = `\n            <div class=\"d-flex\">\n                <div class=\"toast-body\">\n                    <i class=\"${iconMap[type] || iconMap.info} me-2\"></i>\n                    ${message}\n                </div>\n                <button type=\"button\" class=\"btn-close btn-close-white me-2 m-auto\" data-bs-dismiss=\"toast\"></button>\n            </div>\n        `;\n\n        toastContainer.appendChild(toastElement);\n\n        const toast = new bootstrap.Toast(toastElement, {\n            autohide: true,\n            delay: delay\n        });\n        toast.show();\n\n        toastElement.addEventListener('hidden.bs.toast', () => {\n            toastElement.remove();\n        });\n    }\n\n    // Loading States\n    showLoading(message = 'Loading...', target = null) {\n        const loaderId = 'loader-' + Date.now();\n        const loader = document.createElement('div');\n        loader.id = loaderId;\n        loader.className = 'position-absolute top-50 start-50 translate-middle';\n        loader.style.zIndex = '9999';\n        loader.innerHTML = `\n            <div class=\"bg-white p-4 rounded shadow text-center\">\n                <div class=\"spinner-border text-primary mb-2\" role=\"status\">\n                    <span class=\"visually-hidden\">Loading...</span>\n                </div>\n                <div>${message}</div>\n            </div>\n        `;\n\n        if (target) {\n            target.style.position = 'relative';\n            target.appendChild(loader);\n        } else {\n            loader.className = 'position-fixed top-50 start-50 translate-middle';\n            document.body.appendChild(loader);\n        }\n\n        return loaderId;\n    }\n\n    hideLoading(loaderId = null) {\n        if (loaderId) {\n            const loader = document.getElementById(loaderId);\n            if (loader) loader.remove();\n        } else {\n            // Remove all loaders\n            document.querySelectorAll('[id^=\"loader-\"]').forEach(loader => {\n                loader.remove();\n            });\n        }\n    }\n\n    // Form Validation\n    validateEmail(email) {\n        const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n        return emailRegex.test(email);\n    }\n\n    validatePassword(password) {\n        return {\n            length: password.length >= 8,\n            uppercase: /[A-Z]/.test(password),\n            lowercase: /[a-z]/.test(password),\n            number: /[0-9]/.test(password),\n            special: /[^A-Za-z0-9]/.test(password)\n        };\n    }\n\n    sanitizeInput(input) {\n        const div = document.createElement('div');\n        div.textContent = input;\n        return div.innerHTML;\n    }\n\n    // Date and Time Utilities\n    formatDate(date, format = 'short') {\n        const d = new Date(date);\n        const options = {\n            short: { year: 'numeric', month: 'short', day: 'numeric' },\n            long: { year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit' },\n            time: { hour: '2-digit', minute: '2-digit' }\n        };\n        return d.toLocaleDateString('en-US', options[format] || options.short);\n    }\n\n    formatDuration(seconds) {\n        const hours = Math.floor(seconds / 3600);\n        const minutes = Math.floor((seconds % 3600) / 60);\n        const secs = seconds % 60;\n\n        if (hours > 0) {\n            return `${hours}:${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\n        }\n        return `${minutes}:${secs.toString().padStart(2, '0')}`;\n    }\n\n    timeAgo(date) {\n        const now = new Date();\n        const past = new Date(date);\n        const diff = now - past;\n\n        const seconds = Math.floor(diff / 1000);\n        const minutes = Math.floor(seconds / 60);\n        const hours = Math.floor(minutes / 60);\n        const days = Math.floor(hours / 24);\n        const weeks = Math.floor(days / 7);\n        const months = Math.floor(days / 30);\n        const years = Math.floor(days / 365);\n\n        if (years > 0) return `${years} year${years > 1 ? 's' : ''} ago`;\n        if (months > 0) return `${months} month${months > 1 ? 's' : ''} ago`;\n        if (weeks > 0) return `${weeks} week${weeks > 1 ? 's' : ''} ago`;\n        if (days > 0) return `${days} day${days > 1 ? 's' : ''} ago`;\n        if (hours > 0) return `${hours} hour${hours > 1 ? 's' : ''} ago`;\n        if (minutes > 0) return `${minutes} minute${minutes > 1 ? 's' : ''} ago`;\n        return 'Just now';\n    }\n\n    // URL and Navigation Utilities\n    getQueryParam(param) {\n        const urlParams = new URLSearchParams(window.location.search);\n        return urlParams.get(param);\n    }\n\n    setQueryParam(param, value) {\n        const url = new URL(window.location);\n        url.searchParams.set(param, value);\n        window.history.pushState({}, '', url);\n    }\n\n    removeQueryParam(param) {\n        const url = new URL(window.location);\n        url.searchParams.delete(param);\n        window.history.pushState({}, '', url);\n    }\n\n    // Local Storage Utilities\n    setLocalData(key, data) {\n        try {\n            localStorage.setItem(key, JSON.stringify(data));\n            return true;\n        } catch (error) {\n            console.error('Error saving to localStorage:', error);\n            return false;\n        }\n    }\n\n    getLocalData(key) {\n        try {\n            const data = localStorage.getItem(key);\n            return data ? JSON.parse(data) : null;\n        } catch (error) {\n            console.error('Error reading from localStorage:', error);\n            return null;\n        }\n    }\n\n    removeLocalData(key) {\n        try {\n            localStorage.removeItem(key);\n            return true;\n        } catch (error) {\n            console.error('Error removing from localStorage:', error);\n            return false;\n        }\n    }\n\n    // Network Utilities\n    async makeRequest(url, options = {}) {\n        const defaultOptions = {\n            method: 'GET',\n            headers: {\n                'Content-Type': 'application/json'\n            }\n        };\n\n        const mergedOptions = { ...defaultOptions, ...options };\n        \n        try {\n            const response = await fetch(url, mergedOptions);\n            \n            if (!response.ok) {\n                throw new Error(`HTTP error! status: ${response.status}`);\n            }\n            \n            return await response.json();\n        } catch (error) {\n            console.error('Request failed:', error);\n            throw error;\n        }\n    }\n\n    // File Utilities\n    formatFileSize(bytes) {\n        const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\n        if (bytes === 0) return '0 Bytes';\n        const i = Math.floor(Math.log(bytes) / Math.log(1024));\n        return Math.round(bytes / Math.pow(1024, i) * 100) / 100 + ' ' + sizes[i];\n    }\n\n    isValidImageFile(file) {\n        const validTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/gif', 'image/webp'];\n        return validTypes.includes(file.type);\n    }\n\n    isValidVideoFile(file) {\n        const validTypes = ['video/mp4', 'video/avi', 'video/mov', 'video/wmv', 'video/webm'];\n        return validTypes.includes(file.type);\n    }\n\n    // Animation Utilities\n    fadeIn(element, duration = 300) {\n        element.style.opacity = '0';\n        element.style.display = 'block';\n        \n        let start = null;\n        const animate = (timestamp) => {\n            if (!start) start = timestamp;\n            const progress = timestamp - start;\n            element.style.opacity = Math.min(progress / duration, 1);\n            \n            if (progress < duration) {\n                requestAnimationFrame(animate);\n            }\n        };\n        \n        requestAnimationFrame(animate);\n    }\n\n    fadeOut(element, duration = 300) {\n        let start = null;\n        const animate = (timestamp) => {\n            if (!start) start = timestamp;\n            const progress = timestamp - start;\n            element.style.opacity = Math.max(1 - (progress / duration), 0);\n            \n            if (progress < duration) {\n                requestAnimationFrame(animate);\n            } else {\n                element.style.display = 'none';\n            }\n        };\n        \n        requestAnimationFrame(animate);\n    }\n\n    // Utility Functions\n    debounce(func, wait) {\n        let timeout;\n        return function executedFunction(...args) {\n            const later = () => {\n                clearTimeout(timeout);\n                func(...args);\n            };\n            clearTimeout(timeout);\n            timeout = setTimeout(later, wait);\n        };\n    }\n\n    throttle(func, limit) {\n        let inThrottle;\n        return function() {\n            const args = arguments;\n            const context = this;\n            if (!inThrottle) {\n                func.apply(context, args);\n                inThrottle = true;\n                setTimeout(() => inThrottle = false, limit);\n            }\n        };\n    }\n\n    generateId() {\n        return Date.now().toString(36) + Math.random().toString(36).substr(2);\n    }\n\n    delay(ms) {\n        return new Promise(resolve => setTimeout(resolve, ms));\n    }\n\n    // Currency Formatting\n    formatCurrency(amount, currency = 'USD') {\n        return new Intl.NumberFormat('en-US', {\n            style: 'currency',\n            currency: currency\n        }).format(amount);\n    }\n\n    // Number Formatting\n    formatNumber(number) {\n        return new Intl.NumberFormat('en-US').format(number);\n    }\n\n    // Copy to Clipboard\n    async copyToClipboard(text) {\n        try {\n            await navigator.clipboard.writeText(text);\n            this.showToast('Copied to clipboard!', 'success');\n            return true;\n        } catch (error) {\n            console.error('Failed to copy:', error);\n            this.showToast('Failed to copy to clipboard', 'danger');\n            return false;\n        }\n    }\n\n    // Device Detection\n    isMobile() {\n        return window.innerWidth <= 768;\n    }\n\n    isTablet() {\n        return window.innerWidth > 768 && window.innerWidth <= 1024;\n    }\n\n    isDesktop() {\n        return window.innerWidth > 1024;\n    }\n\n    // Event Emitter\n    createEventEmitter() {\n        const events = {};\n        \n        return {\n            on(event, callback) {\n                if (!events[event]) events[event] = [];\n                events[event].push(callback);\n            },\n            \n            emit(event, data) {\n                if (events[event]) {\n                    events[event].forEach(callback => callback(data));\n                }\n            },\n            \n            off(event, callback) {\n                if (events[event]) {\n                    events[event] = events[event].filter(cb => cb !== callback);\n                }\n            }\n        };\n    }\n}\n\n// Global Toast Function\nwindow.showToast = function(message, type = 'info', delay = 5000) {\n    if (window.commonUtils) {\n        window.commonUtils.showToast(message, type, delay);\n    } else {\n        console.log(`${type.toUpperCase()}: ${message}`);\n    }\n};\n\n// Initialize common utilities when DOM is loaded\ndocument.addEventListener('DOMContentLoaded', () => {\n    window.commonUtils = new CommonUtils();\n});\n\n// Export for other modules\nwindow.CommonUtils = CommonUtils;\n","size_bytes":15718},"assets/js/creator.js":{"content":"/**\n * VideoHub Creator Module\n * Handles creator dashboard functionality with API integration\n */\n\nclass CreatorManager {\n    constructor() {\n        this.stats = {};\n        this.videos = [];\n        this.earnings = [];\n        this.init();\n    }\n\n    async init() {\n        this.loadMockData(); // Fallback for demo\n        this.bindEvents();\n        await this.loadDashboardData();\n        \n        // Load page-specific handlers after data is loaded\n        this.loadPageSpecificHandlers();\n    }\n\n    loadMockData() {\n        // Initialize empty arrays - data will be loaded from API\n        this.stats = {\n            totalVideos: 0,\n            totalViews: 0,\n            totalEarnings: 0,\n            subscribers: 0\n        };\n        this.videos = [];\n        this.earnings = [];\n    }\n\n    async loadDashboardData() {\n        try {\n            // Wait for API service to be available\n            let retries = 0;\n            const maxRetries = 50;\n            \n            while (retries < maxRetries && !window.apiService) {\n                await new Promise(resolve => setTimeout(resolve, 100));\n                retries++;\n            }\n\n            if (window.apiService) {\n                // Load data from API\n                const [videosResponse, earningsResponse] = await Promise.all([\n                    window.apiService.getCreatorVideos(),\n                    window.apiService.getCreatorEarnings()\n                ]);\n                \n                // Ensure arrays are properly initialized\n                this.videos = Array.isArray(videosResponse.data?.videos) ? videosResponse.data.videos : \n                             Array.isArray(videosResponse.videos) ? videosResponse.videos : \n                             Array.isArray(videosResponse.data) ? videosResponse.data : [];\n                             \n                this.earnings = Array.isArray(earningsResponse.data?.earnings) ? earningsResponse.data.earnings : \n                               Array.isArray(earningsResponse.earnings) ? earningsResponse.earnings : \n                               Array.isArray(earningsResponse.data) ? earningsResponse.data : [];\n                \n                console.log('Creator data loaded:', {\n                    videosType: typeof this.videos,\n                    videosIsArray: Array.isArray(this.videos),\n                    videosLength: this.videos.length,\n                    earningsType: typeof this.earnings,\n                    earningsIsArray: Array.isArray(this.earnings),\n                    earningsLength: this.earnings.length\n                });\n                \n                // Calculate stats from loaded data with safety checks\n                this.stats = {\n                    totalVideos: this.videos.length,\n                    totalViews: this.videos.reduce((sum, v) => sum + (parseInt(v.views) || 0), 0),\n                    totalEarnings: this.earnings.reduce((sum, e) => sum + (parseFloat(e.amount) || 0), 0),\n                    subscribers: this.videos.reduce((sum, v) => sum + (parseInt(v.likes || v.youtube_likes) || 0), 0)\n                };\n            } else {\n                console.error('API service not available');\n                this.videos = [];\n                this.earnings = [];\n                this.stats = {\n                    totalVideos: 0,\n                    totalViews: 0,\n                    totalEarnings: 0,\n                    subscribers: 0\n                };\n            }\n\n            this.updateDashboardDisplay();\n            console.log('Creator data loaded:', { videos: this.videos.length, earnings: this.earnings.length });\n            \n            // Trigger page-specific updates if we're on the videos page\n            const currentPage = window.location.pathname.split('/').pop();\n            if (currentPage === 'videos.html') {\n                this.setupVideosPage();\n            }\n        } catch (error) {\n            console.error('Error loading creator data:', error);\n            this.updateDashboardDisplay();\n        }\n    }\n\n    updateDashboardDisplay() {\n        // Update stats cards\n        const totalVideosEl = document.getElementById('totalVideos');\n        const totalViewsEl = document.getElementById('totalViews');\n        const totalEarningsEl = document.getElementById('totalEarnings');\n        const subscribersEl = document.getElementById('subscribers');\n\n        if (totalVideosEl) totalVideosEl.textContent = this.stats.totalVideos || '--';\n        if (totalViewsEl) totalViewsEl.textContent = this.formatNumber(this.stats.totalViews) || '--';\n        if (totalEarningsEl) totalEarningsEl.textContent = this.formatCurrency(this.stats.totalEarnings) || '--';\n        if (subscribersEl) subscribersEl.textContent = this.stats.subscribers || '--';\n\n        // Update earnings table and recent videos\n        this.loadEarningsTable();\n        this.loadRecentVideos();\n    }\n\n    loadEarningsTable() {\n        const tbody = document.getElementById('earningsTableBody');\n        if (!tbody) return;\n\n        tbody.innerHTML = this.earnings.slice(0, 10).map(earning => `\n            <tr>\n                <td class=\"px-4 py-3\">\n                    <div class=\"d-flex align-items-center\">\n                        <div class=\"video-thumbnail me-3\" style=\"width: 40px; height: 24px; background: #f0f0f0; border-radius: 4px; display: flex; align-items: center; justify-content: center;\">\n                            <i class=\"fas fa-play text-muted\" style=\"font-size: 10px;\"></i>\n                        </div>\n                        <div>\n                            <div class=\"fw-semibold text-sm\">${earning.videoTitle}</div>\n                        </div>\n                    </div>\n                </td>\n                <td class=\"px-4 py-3\">\n                    <div>\n                        <div class=\"fw-semibold text-sm\">${earning.viewerName}</div>\n                        <div class=\"text-muted text-xs\">${earning.viewerEmail}</div>\n                    </div>\n                </td>\n                <td class=\"px-4 py-3 text-muted text-sm\">${new Date(earning.purchaseDate).toLocaleDateString()}</td>\n                <td class=\"px-4 py-3\">\n                    <span class=\"fw-bold text-success\">${this.formatCurrency(earning.price)}</span>\n                </td>\n                <td class=\"px-4 py-3\">\n                    <span class=\"badge bg-${earning.status === 'completed' ? 'success' : 'warning'} bg-opacity-10 text-${earning.status === 'completed' ? 'success' : 'warning'}\">\n                        ${earning.status.charAt(0).toUpperCase() + earning.status.slice(1)}\n                    </span>\n                </td>\n            </tr>\n        `).join('');\n    }\n\n    loadRecentVideos() {\n        const container = document.getElementById('recentVideos');\n        if (!container) return;\n\n        container.innerHTML = this.videos.slice(0, 5).map(video => `\n            <div class=\"d-flex align-items-center justify-content-between\">\n                <div class=\"d-flex align-items-center\">\n                    <div class=\"video-thumbnail me-3\" style=\"width: 50px; height: 30px; background: #f0f0f0; border-radius: 4px; display: flex; align-items: center; justify-content: center;\">\n                        <i class=\"fas fa-play text-muted\" style=\"font-size: 12px;\"></i>\n                    </div>\n                    <div>\n                        <div class=\"fw-semibold text-sm\">${video.title}</div>\n                        <div class=\"text-muted text-xs\">${new Date(video.uploadDate).toLocaleDateString()}</div>\n                    </div>\n                </div>\n                <div class=\"text-end\">\n                    <div class=\"fw-bold text-sm\">${this.formatNumber(video.views)}</div>\n                    <div class=\"text-muted text-xs\">views</div>\n                </div>\n            </div>\n        `).join('');\n    }\n\n    formatNumber(num) {\n        if (!num) return '0';\n        return new Intl.NumberFormat().format(num);\n    }\n\n    formatCurrency(amount) {\n        if (!amount) return '$0.00';\n        return new Intl.NumberFormat('en-US', { \n            style: 'currency', \n            currency: 'USD' \n        }).format(amount);\n    }\n\n    bindEvents() {\n        // Upload video form submission\n        const uploadForm = document.getElementById('uploadVideoForm');\n        if (uploadForm) {\n            uploadForm.addEventListener('submit', (e) => this.handleVideoUpload(e));\n        }\n\n        // Update video button\n        const updateBtn = document.getElementById('updateVideo');\n        if (updateBtn) {\n            updateBtn.addEventListener('click', (e) => this.handleVideoUpdate(e));\n        }\n\n        // Refresh button\n        document.addEventListener('click', (e) => {\n            if (e.target.matches('[onclick*=\"refresh\"]') || \n                e.target.closest('[onclick*=\"refresh\"]')) {\n                e.preventDefault();\n                this.refreshDashboard();\n            }\n        });\n    }\n\n    async refreshDashboard() {\n        const refreshBtn = document.querySelector('[onclick*=\"refresh\"]');\n        if (refreshBtn) {\n            refreshBtn.innerHTML = '<i class=\"fas fa-spinner fa-spin me-1\"></i> Refreshing...';\n            refreshBtn.disabled = true;\n        }\n\n        await this.loadDashboardData();\n\n        if (refreshBtn) {\n            refreshBtn.innerHTML = '<i class=\"fas fa-refresh me-1\"></i> Refresh';\n            refreshBtn.disabled = false;\n        }\n\n        window.apiService.showSuccessMessage('Dashboard refreshed successfully');\n    }\n\n    async handleVideoUpload(e) {\n        e.preventDefault();\n        \n        const form = e.target;\n        const formData = new FormData(form);\n        const videoData = {\n            title: formData.get('videoTitle'),\n            description: formData.get('videoDescription'),\n            price: parseFloat(formData.get('videoPrice')),\n            category: formData.get('videoCategory')\n        };\n\n        // Validate form\n        if (!this.validateVideoForm(form, videoData)) {\n            return;\n        }\n\n        // Show loading state\n        const submitBtn = form.querySelector('button[type=\"submit\"]');\n        const originalText = submitBtn.innerHTML;\n        submitBtn.innerHTML = '<i class=\"fas fa-spinner fa-spin me-1\"></i> Uploading...';\n        submitBtn.disabled = true;\n\n        try {\n            const result = await window.apiService.uploadVideo(videoData, formData.get('videoFile'));\n            \n            if (result.success) {\n                // Close modal and reset form\n                const modal = bootstrap.Modal.getInstance(document.getElementById('uploadVideoModal'));\n                modal.hide();\n                form.reset();\n                form.classList.remove('was-validated');\n                \n                // Refresh videos list\n                await this.loadDashboardData();\n                \n                window.apiService.showSuccessMessage('Video uploaded successfully');\n            } else {\n                window.apiService.handleApiError(result, 'Failed to upload video');\n            }\n        } catch (error) {\n            // Demo mode\n            const modal = bootstrap.Modal.getInstance(document.getElementById('uploadVideoModal'));\n            modal.hide();\n            form.reset();\n            form.classList.remove('was-validated');\n            window.apiService.showSuccessMessage('Video uploaded successfully (demo mode)');\n        } finally {\n            // Reset button\n            submitBtn.innerHTML = originalText;\n            submitBtn.disabled = false;\n        }\n    }\n\n    validateVideoForm(form, data) {\n        let isValid = true;\n        \n        // Title validation\n        const titleInput = form.querySelector('#videoTitle');\n        if (!data.title || data.title.length < 3) {\n            titleInput.classList.add('is-invalid');\n            isValid = false;\n        } else {\n            titleInput.classList.remove('is-invalid');\n            titleInput.classList.add('is-valid');\n        }\n        \n        // Price validation\n        const priceInput = form.querySelector('#videoPrice');\n        if (!data.price || data.price < 0) {\n            priceInput.classList.add('is-invalid');\n            isValid = false;\n        } else {\n            priceInput.classList.remove('is-invalid');\n            priceInput.classList.add('is-valid');\n        }\n\n        // Category validation\n        const categoryInput = form.querySelector('#videoCategory');\n        if (!data.category) {\n            categoryInput.classList.add('is-invalid');\n            isValid = false;\n        } else {\n            categoryInput.classList.remove('is-invalid');\n            categoryInput.classList.add('is-valid');\n        }\n\n        // File validation\n        const fileInput = form.querySelector('#videoFile');\n        if (!fileInput.files || fileInput.files.length === 0) {\n            fileInput.classList.add('is-invalid');\n            isValid = false;\n        } else {\n            fileInput.classList.remove('is-invalid');\n            fileInput.classList.add('is-valid');\n        }\n\n        form.classList.add('was-validated');\n        return isValid;\n    }\n\n    async handleVideoUpdate(e) {\n        e.preventDefault();\n        \n        const form = document.getElementById('editVideoForm');\n        const videoId = parseInt(document.getElementById('editVideoId').value);\n        const videoData = {\n            id: videoId,\n            title: document.getElementById('editVideoTitle').value,\n            description: document.getElementById('editVideoDescription').value,\n            price: parseFloat(document.getElementById('editVideoPrice').value),\n            category: document.getElementById('editVideoCategory').value\n        };\n\n        // Show loading state\n        const submitBtn = e.target;\n        const originalText = submitBtn.innerHTML;\n        submitBtn.innerHTML = '<i class=\"fas fa-spinner fa-spin me-1\"></i> Updating...';\n        submitBtn.disabled = true;\n\n        try {\n            // In demo mode, just update the local data\n            const videoIndex = this.videos.findIndex(v => v.id === videoId);\n            if (videoIndex !== -1) {\n                this.videos[videoIndex] = { ...this.videos[videoIndex], ...videoData };\n                this.renderVideosGrid(this.videos);\n                this.updateVideoStats();\n            }\n\n            // Close modal\n            const modal = bootstrap.Modal.getInstance(document.getElementById('editVideoModal'));\n            modal.hide();\n            \n            window.apiService.showSuccessMessage('Video updated successfully');\n        } catch (error) {\n            console.error('Error updating video:', error);\n            window.apiService.showErrorMessage('Failed to update video');\n        } finally {\n            // Reset button\n            submitBtn.innerHTML = originalText;\n            submitBtn.disabled = false;\n        }\n    }\n\n    loadPageSpecificHandlers() {\n        const currentPage = window.location.pathname.split('/').pop();\n        \n        switch (currentPage) {\n            case 'dashboard.html':\n                this.setupDashboard();\n                break;\n            case 'videos.html':\n                this.setupVideosPage();\n                break;\n            case 'profile.html':\n                this.setupProfilePage();\n                break;\n        }\n    }\n\n    setupDashboard() {\n        // Dashboard is already set up in init()\n    }\n\n    async setupVideosPage() {\n        try {\n            console.log('Setting up creator videos page with', this.videos.length, 'videos');\n            this.renderVideosGrid(this.videos);\n            this.updateVideoStats();\n        } catch (error) {\n            console.error('Error setting up videos page:', error);\n            this.renderVideosGrid([]);\n        }\n    }\n\n    updateVideoStats() {\n        const totalVideos = this.videos.length;\n        const publishedVideos = this.videos.filter(v => v.status === 'published').length;\n        const pendingVideos = this.videos.filter(v => v.status === 'pending').length;\n        const totalViews = this.videos.reduce((sum, v) => sum + (v.views || 0), 0);\n\n        // Update stat cards on videos page using specific IDs\n        const totalVideosEl = document.getElementById('totalVideos');\n        const publishedVideosEl = document.getElementById('publishedVideos');\n        const pendingVideosEl = document.getElementById('pendingVideos');\n        const totalViewsEl = document.getElementById('totalViews');\n\n        if (totalVideosEl) totalVideosEl.textContent = totalVideos;\n        if (publishedVideosEl) publishedVideosEl.textContent = publishedVideos;\n        if (pendingVideosEl) pendingVideosEl.textContent = pendingVideos;\n        if (totalViewsEl) totalViewsEl.textContent = this.formatNumber(totalViews);\n\n        console.log('Updated video stats:', { totalVideos, publishedVideos, pendingVideos, totalViews });\n    }\n\n    renderVideosGrid(videos) {\n        const grid = document.getElementById('videosGrid');\n        if (!grid) {\n            console.error('Videos grid container not found');\n            return;\n        }\n\n        console.log('Rendering videos grid with', videos.length, 'videos');\n\n        if (!videos || videos.length === 0) {\n            grid.innerHTML = '<div class=\"col-12 text-center py-5\"><p class=\"text-muted\">No videos found</p></div>';\n            return;\n        }\n\n        grid.innerHTML = videos.map(video => `\n            <div class=\"col-lg-4 col-md-6 mb-4\">\n                <div class=\"card video-card shadow-sm border-0\">\n                    <div class=\"position-relative\">\n                        <img src=\"${video.thumbnail}\" class=\"card-img-top\" alt=\"${video.title}\" style=\"height: 200px; object-fit: cover;\">\n                        <div class=\"video-overlay position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center\">\n                            <div class=\"play-button bg-success bg-opacity-75 text-white rounded-circle d-flex align-items-center justify-content-center\" style=\"width: 50px; height: 50px;\">\n                                <i class=\"fas fa-play\"></i>\n                            </div>\n                        </div>\n                        <div class=\"position-absolute top-0 end-0 m-2\">\n                            <span class=\"badge bg-${this.getStatusColor(video.status)} bg-opacity-90\">\n                                ${video.status.charAt(0).toUpperCase() + video.status.slice(1)}\n                            </span>\n                        </div>\n                        <div class=\"position-absolute bottom-0 end-0 m-2\">\n                            <span class=\"badge bg-dark bg-opacity-75 text-white\">\n                                ${video.duration || '00:00'}\n                            </span>\n                        </div>\n                    </div>\n                    <div class=\"card-body p-3\">\n                        <h6 class=\"card-title fw-bold mb-2\">${video.title}</h6>\n                        <p class=\"card-text text-muted small mb-3\" style=\"height: 40px; overflow: hidden;\">\n                            ${video.description || 'No description available'}\n                        </p>\n                        \n                        <div class=\"d-flex justify-content-between align-items-center mb-2\">\n                            <span class=\"text-success fw-bold\">${this.formatCurrency(video.price || 0)}</span>\n                            <span class=\"text-muted small\">\n                                <i class=\"fas fa-eye me-1\"></i>\n                                ${this.formatNumber(video.views)}\n                            </span>\n                        </div>\n                        \n                        <div class=\"d-flex justify-content-between align-items-center mb-3\">\n                            <span class=\"text-muted small\">\n                                <i class=\"fas fa-heart me-1\"></i>\n                                ${this.formatNumber(video.likes || 0)}\n                            </span>\n                            <span class=\"text-success fw-semibold\">\n                                ${video.earnings ? this.formatCurrency(video.earnings) : '$0.00'} earned\n                            </span>\n                        </div>\n                        \n                        <div class=\"text-muted small mb-3\">\n                            Uploaded ${new Date(video.uploadDate).toLocaleDateString()}\n                        </div>\n                        \n                        <div class=\"btn-group w-100\" role=\"group\">\n                            <button type=\"button\" class=\"btn btn-sm btn-outline-primary\" onclick=\"editVideo(${video.id})\" title=\"Edit video\">\n                                <i class=\"fas fa-edit me-1\"></i>Edit\n                            </button>\n                            <button type=\"button\" class=\"btn btn-sm btn-outline-danger\" onclick=\"deleteVideo(${video.id})\" title=\"Delete video\">\n                                <i class=\"fas fa-trash me-1\"></i>Delete\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        `).join('');\n\n        // Add hover effects with CSS if not already added\n        if (!document.getElementById('video-card-styles')) {\n            const style = document.createElement('style');\n            style.id = 'video-card-styles';\n            style.textContent = `\n                .video-card {\n                    transition: transform 0.2s ease, box-shadow 0.2s ease;\n                }\n                .video-card:hover {\n                    transform: translateY(-5px);\n                    box-shadow: 0 8px 25px rgba(0,0,0,0.15) !important;\n                }\n                .video-overlay {\n                    opacity: 0;\n                    transition: opacity 0.2s ease;\n                    background: rgba(0,0,0,0.3);\n                }\n                .video-card:hover .video-overlay {\n                    opacity: 1;\n                }\n                .play-button {\n                    transform: scale(0.8);\n                    transition: transform 0.2s ease;\n                }\n                .video-card:hover .play-button {\n                    transform: scale(1);\n                }\n            `;\n            document.head.appendChild(style);\n        }\n    }\n\n    getStatusColor(status) {\n        const colors = {\n            published: 'success',\n            pending: 'warning',\n            draft: 'secondary',\n            rejected: 'danger'\n        };\n        return colors[status] || 'secondary';\n    }\n\n    setupProfilePage() {\n        // Profile page is handled by profile.js\n    }\n}\n\n// Global functions\nwindow.exportEarnings = function() {\n    window.apiService.showSuccessMessage('Earnings export would start here');\n};\n\nwindow.editVideo = function(videoId) {\n    if (window.creatorManager) {\n        const video = window.creatorManager.videos.find(v => v.id === videoId);\n        if (!video) {\n            console.error('Video not found:', videoId);\n            return;\n        }\n\n        // Populate edit modal with video data\n        document.getElementById('editVideoId').value = video.id;\n        document.getElementById('editVideoTitle').value = video.title;\n        document.getElementById('editVideoDescription').value = video.description || '';\n        document.getElementById('editVideoPrice').value = video.price;\n        document.getElementById('editVideoCategory').value = video.category;\n\n        // Show edit modal\n        const modal = new bootstrap.Modal(document.getElementById('editVideoModal'));\n        modal.show();\n    }\n};\n\nwindow.viewVideoStats = function(videoId) {\n    if (window.creatorManager) {\n        const video = window.creatorManager.videos.find(v => v.id === videoId);\n        if (!video) {\n            console.error('Video not found:', videoId);\n            return;\n        }\n\n        // Show simple stats in alert for demo\n        alert(`Video Stats for \"${video.title}\":\n        \nViews: ${window.creatorManager.formatNumber(video.views || 0)}\nLikes: ${window.creatorManager.formatNumber(video.likes || 0)}\nEarnings: ${window.creatorManager.formatCurrency(video.earnings || 0)}\nStatus: ${video.status}\nUpload Date: ${new Date(video.uploadDate).toLocaleDateString()}`);\n    }\n};\n\nwindow.deleteVideo = async function(videoId) {\n    if (window.creatorManager) {\n        const video = window.creatorManager.videos.find(v => v.id === videoId);\n        if (!video) {\n            console.error('Video not found:', videoId);\n            return;\n        }\n\n        // Show confirmation dialog\n        if (confirm(`Are you sure you want to delete \"${video.title}\"? This action cannot be undone.`)) {\n            try {\n                // In demo mode, just remove from local data\n                window.creatorManager.videos = window.creatorManager.videos.filter(v => v.id !== videoId);\n                window.creatorManager.renderVideosGrid(window.creatorManager.videos);\n                window.creatorManager.updateVideoStats();\n                \n                window.apiService.showSuccessMessage('Video deleted successfully');\n            } catch (error) {\n                console.error('Error deleting video:', error);\n                window.apiService.showErrorMessage('Failed to delete video');\n            }\n        }\n    }\n};\n\nwindow.duplicateVideo = async function(videoId) {\n    if (window.creatorManager) {\n        const video = window.creatorManager.videos.find(v => v.id === videoId);\n        if (!video) {\n            console.error('Video not found:', videoId);\n            return;\n        }\n\n        // Create duplicate with new ID\n        const newVideo = {\n            ...video,\n            id: Math.max(...window.creatorManager.videos.map(v => v.id)) + 1,\n            title: video.title + ' (Copy)',\n            status: 'draft',\n            views: 0,\n            likes: 0,\n            earnings: 0,\n            uploadDate: new Date().toISOString().split('T')[0]\n        };\n\n        window.creatorManager.videos.push(newVideo);\n        window.creatorManager.renderVideosGrid(window.creatorManager.videos);\n        window.creatorManager.updateVideoStats();\n        \n        window.apiService.showSuccessMessage('Video duplicated successfully');\n    }\n};\n\n// Initialize creator manager\ndocument.addEventListener('DOMContentLoaded', function() {\n    window.creatorManager = new CreatorManager();\n});","size_bytes":26454},"assets/js/dataService.js":{"content":"/**\n * VideoHub Data Service\n * Handles loading and managing data from JSON files\n * Provides API-like interface for easy backend migration\n */\n\nclass DataService {\n    constructor() {\n        this.cache = {\n            users: null,\n            videos: null,\n            earnings: null,\n            purchases: null\n        };\n        this.init();\n    }\n\n    async init() {\n        // Pre-load all data\n        await this.loadAllData();\n    }\n\n    async loadAllData() {\n        try {\n            // Migration to API - load data from database instead of JSON files\n            console.warn('DataService is deprecated. Use APIService instead.');\n            \n            if (window.apiService) {\n                const [users, videos, earnings, purchases] = await Promise.all([\n                    window.apiService.get('/users'),\n                    window.apiService.get('/videos'),\n                    window.apiService.get('/creator/earnings'),\n                    window.apiService.get('/purchases')\n                ]);\n\n                this.cache.users = users.data?.users || [];\n                this.cache.videos = videos.data?.videos || [];\n                this.cache.earnings = earnings.data?.earnings || [];\n                this.cache.purchases = purchases.data?.purchases || [];\n\n            console.log('Data loaded successfully:', {\n                users: this.cache.users.length,\n                videos: this.cache.videos.length,\n                earnings: this.cache.earnings.length,\n                purchases: this.cache.purchases.length\n            });\n        } catch (error) {\n            console.error('Error loading data:', error);\n        }\n    }\n\n    async loadJSON(url) {\n        try {\n            const response = await fetch(url);\n            if (!response.ok) {\n                throw new Error(`HTTP error! status: ${response.status}`);\n            }\n            return await response.json();\n        } catch (error) {\n            console.error(`Error loading ${url}:`, error);\n            return {};\n        }\n    }\n\n    // User Management\n    async getUsers(filters = {}) {\n        const users = [...this.cache.users];\n        let filtered = users;\n\n        if (filters.role) {\n            filtered = filtered.filter(user => user.role === filters.role);\n        }\n        if (filters.status) {\n            filtered = filtered.filter(user => user.status === filters.status);\n        }\n        if (filters.search) {\n            const search = filters.search.toLowerCase();\n            filtered = filtered.filter(user => \n                user.name.toLowerCase().includes(search) ||\n                user.email.toLowerCase().includes(search)\n            );\n        }\n\n        // Pagination\n        const page = filters.page || 1;\n        const limit = filters.limit || 10;\n        const offset = (page - 1) * limit;\n        const paginatedUsers = filtered.slice(offset, offset + limit);\n\n        return {\n            success: true,\n            data: {\n                users: paginatedUsers,\n                total: filtered.length,\n                page,\n                limit,\n                totalPages: Math.ceil(filtered.length / limit)\n            }\n        };\n    }\n\n    async getUserById(id) {\n        const user = this.cache.users.find(u => u.id === parseInt(id));\n        return {\n            success: !!user,\n            data: user || null\n        };\n    }\n\n    async getCurrentUser() {\n        // Simulate getting current user from session\n        const currentUserId = localStorage.getItem('currentUserId') || '1';\n        return this.getUserById(currentUserId);\n    }\n\n    async updateUser(id, userData) {\n        const userIndex = this.cache.users.findIndex(u => u.id === parseInt(id));\n        if (userIndex !== -1) {\n            this.cache.users[userIndex] = { ...this.cache.users[userIndex], ...userData };\n            return {\n                success: true,\n                data: this.cache.users[userIndex]\n            };\n        }\n        return {\n            success: false,\n            error: 'User not found'\n        };\n    }\n\n    // Video Management\n    async getVideos(filters = {}) {\n        let videos = [...this.cache.videos];\n\n        if (filters.creatorId) {\n            videos = videos.filter(video => video.creatorId === parseInt(filters.creatorId));\n        }\n        if (filters.category) {\n            videos = videos.filter(video => video.category === filters.category);\n        }\n        if (filters.status) {\n            videos = videos.filter(video => video.status === filters.status);\n        }\n        if (filters.search) {\n            const search = filters.search.toLowerCase();\n            videos = videos.filter(video => \n                video.title.toLowerCase().includes(search) ||\n                video.description.toLowerCase().includes(search) ||\n                video.tags.some(tag => tag.toLowerCase().includes(search))\n            );\n        }\n\n        // Sort options\n        if (filters.sort) {\n            switch (filters.sort) {\n                case 'newest':\n                    videos.sort((a, b) => new Date(b.uploadDate) - new Date(a.uploadDate));\n                    break;\n                case 'oldest':\n                    videos.sort((a, b) => new Date(a.uploadDate) - new Date(b.uploadDate));\n                    break;\n                case 'views':\n                    videos.sort((a, b) => b.views - a.views);\n                    break;\n                case 'earnings':\n                    videos.sort((a, b) => b.earnings - a.earnings);\n                    break;\n                case 'price':\n                    videos.sort((a, b) => b.price - a.price);\n                    break;\n            }\n        }\n\n        // Pagination\n        const page = filters.page || 1;\n        const limit = filters.limit || 12;\n        const offset = (page - 1) * limit;\n        const paginatedVideos = videos.slice(offset, offset + limit);\n\n        return {\n            success: true,\n            data: {\n                videos: paginatedVideos,\n                total: videos.length,\n                page,\n                limit,\n                totalPages: Math.ceil(videos.length / limit)\n            }\n        };\n    }\n\n    async getVideoById(id) {\n        const video = this.cache.videos.find(v => v.id === parseInt(id));\n        return {\n            success: !!video,\n            data: video || null\n        };\n    }\n\n    async getCreatorVideos(creatorId = null, filters = {}) {\n        // Get current creator if not specified\n        if (!creatorId) {\n            const currentUser = await this.getCurrentUser();\n            if (!currentUser.success || currentUser.data.role !== 'creator') {\n                return { success: false, error: 'Not a creator' };\n            }\n            creatorId = currentUser.data.id;\n        }\n\n        return this.getVideos({ ...filters, creatorId });\n    }\n\n    async getCreatorStats(creatorId = null) {\n        if (!creatorId) {\n            const currentUser = await this.getCurrentUser();\n            if (!currentUser.success) return { success: false, error: 'User not found' };\n            creatorId = currentUser.data.id;\n        }\n\n        const user = await this.getUserById(creatorId);\n        if (!user.success || user.data.role !== 'creator') {\n            return { success: false, error: 'Not a creator' };\n        }\n\n        return {\n            success: true,\n            data: user.data.stats\n        };\n    }\n\n    // Earnings Management\n    async getCreatorEarnings(creatorId = null, filters = {}) {\n        if (!creatorId) {\n            const currentUser = await this.getCurrentUser();\n            if (!currentUser.success) return { success: false, error: 'User not found' };\n            creatorId = currentUser.data.id;\n        }\n\n        let earnings = this.cache.earnings.filter(e => e.creatorId === parseInt(creatorId));\n\n        if (filters.status) {\n            earnings = earnings.filter(e => e.status === filters.status);\n        }\n        if (filters.dateFrom) {\n            earnings = earnings.filter(e => new Date(e.purchaseDate) >= new Date(filters.dateFrom));\n        }\n        if (filters.dateTo) {\n            earnings = earnings.filter(e => new Date(e.purchaseDate) <= new Date(filters.dateTo));\n        }\n\n        // Sort by most recent\n        earnings.sort((a, b) => new Date(b.purchaseDate) - new Date(a.purchaseDate));\n\n        // Pagination\n        const page = filters.page || 1;\n        const limit = filters.limit || 10;\n        const offset = (page - 1) * limit;\n        const paginatedEarnings = earnings.slice(offset, offset + limit);\n\n        return {\n            success: true,\n            data: {\n                earnings: paginatedEarnings,\n                total: earnings.length,\n                page,\n                limit,\n                totalPages: Math.ceil(earnings.length / limit)\n            }\n        };\n    }\n\n    // Viewer Purchases\n    async getViewerPurchases(viewerId = null, filters = {}) {\n        if (!viewerId) {\n            const currentUser = await this.getCurrentUser();\n            if (!currentUser.success) return { success: false, error: 'User not found' };\n            viewerId = currentUser.data.id;\n        }\n\n        let purchases = this.cache.purchases.filter(p => p.viewerId === parseInt(viewerId));\n\n        if (filters.status) {\n            purchases = purchases.filter(p => p.status === filters.status);\n        }\n\n        // Sort by most recent\n        purchases.sort((a, b) => new Date(b.purchaseDate) - new Date(a.purchaseDate));\n\n        // Pagination\n        const page = filters.page || 1;\n        const limit = filters.limit || 10;\n        const offset = (page - 1) * limit;\n        const paginatedPurchases = purchases.slice(offset, offset + limit);\n\n        return {\n            success: true,\n            data: {\n                purchases: paginatedPurchases,\n                total: purchases.length,\n                page,\n                limit,\n                totalPages: Math.ceil(purchases.length / limit)\n            }\n        };\n    }\n\n    async getViewerStats(viewerId = null) {\n        if (!viewerId) {\n            const currentUser = await this.getCurrentUser();\n            if (!currentUser.success) return { success: false, error: 'User not found' };\n            viewerId = currentUser.data.id;\n        }\n\n        const user = await this.getUserById(viewerId);\n        if (!user.success) {\n            return { success: false, error: 'User not found' };\n        }\n\n        return {\n            success: true,\n            data: user.data.stats || {}\n        };\n    }\n\n    // Admin Analytics\n    async getAdminStats() {\n        const totalUsers = this.cache.users.length;\n        const totalVideos = this.cache.videos.length;\n        const totalEarnings = this.cache.earnings.reduce((sum, e) => sum + e.price, 0);\n        const totalCreators = this.cache.users.filter(u => u.role === 'creator').length;\n        const totalViewers = this.cache.users.filter(u => u.role === 'viewer').length;\n        \n        const publishedVideos = this.cache.videos.filter(v => v.status === 'published').length;\n        const pendingVideos = this.cache.videos.filter(v => v.status === 'pending').length;\n\n        return {\n            success: true,\n            data: {\n                totalUsers,\n                totalVideos,\n                totalEarnings,\n                totalCreators,\n                totalViewers,\n                publishedVideos,\n                pendingVideos,\n                activeUsers: this.cache.users.filter(u => u.status === 'active').length\n            }\n        };\n    }\n\n    // API Simulation Methods (for form submissions, etc.)\n    async uploadVideo(videoData) {\n        // Simulate API call\n        return new Promise((resolve) => {\n            setTimeout(() => {\n                resolve({\n                    success: true,\n                    data: { id: Date.now(), ...videoData }\n                });\n            }, 1000);\n        });\n    }\n\n    async updateVideo(id, videoData) {\n        return new Promise((resolve) => {\n            setTimeout(() => {\n                resolve({\n                    success: true,\n                    data: { id, ...videoData }\n                });\n            }, 500);\n        });\n    }\n\n    async deleteVideo(id) {\n        return new Promise((resolve) => {\n            setTimeout(() => {\n                resolve({ success: true });\n            }, 500);\n        });\n    }\n\n    async duplicateVideo(id) {\n        return new Promise((resolve) => {\n            setTimeout(() => {\n                resolve({\n                    success: true,\n                    data: { id: Date.now(), title: 'Copy of Video' }\n                });\n            }, 500);\n        });\n    }\n\n    async purchaseVideo(videoId, paymentData) {\n        return new Promise((resolve) => {\n            setTimeout(() => {\n                resolve({\n                    success: true,\n                    data: { transactionId: 'txn_' + Date.now() }\n                });\n            }, 1500);\n        });\n    }\n}\n\n// Initialize global data service\nwindow.dataService = new DataService();","size_bytes":13117},"assets/js/payment.js":{"content":"/**\n * VideoHub Payment Module\n * Handles payment processing, validation, and transaction management\n */\n\nclass PaymentManager {\n    constructor() {\n        this.currentTransaction = null;\n        this.paymentMethods = [];\n        this.init();\n    }\n\n    init() {\n        this.loadPaymentMethods();\n        this.bindEvents();\n        this.setupDemoMode();\n    }\n\n    loadPaymentMethods() {\n        // Mock payment methods\n        this.paymentMethods = [\n            {\n                id: 'card',\n                name: 'Credit/Debit Card',\n                icon: 'fas fa-credit-card',\n                enabled: true,\n                processingFee: 0.99\n            },\n            {\n                id: 'paypal',\n                name: 'PayPal',\n                icon: 'fab fa-paypal',\n                enabled: true,\n                processingFee: 0.50\n            },\n            {\n                id: 'apple_pay',\n                name: 'Apple Pay',\n                icon: 'fab fa-apple',\n                enabled: false,\n                processingFee: 0.30\n            },\n            {\n                id: 'google_pay',\n                name: 'Google Pay',\n                icon: 'fab fa-google',\n                enabled: false,\n                processingFee: 0.30\n            }\n        ];\n    }\n\n    bindEvents() {\n        // Payment method selection\n        document.addEventListener('change', (e) => {\n            if (e.target.name === 'paymentMethod') {\n                this.handlePaymentMethodChange(e.target.value);\n            }\n        });\n\n        // Payment form submission\n        document.addEventListener('submit', (e) => {\n            if (e.target.id === 'paymentForm') {\n                e.preventDefault();\n                this.processPayment();\n            }\n        });\n\n        // Card input formatting\n        document.addEventListener('input', (e) => {\n            if (e.target.id === 'cardNumber') {\n                this.formatCardNumber(e.target);\n            }\n            if (e.target.id === 'expiryDate') {\n                this.formatExpiryDate(e.target);\n            }\n            if (e.target.id === 'cvv') {\n                this.formatCVV(e.target);\n            }\n        });\n\n        // Real-time validation\n        document.addEventListener('blur', (e) => {\n            if (e.target.classList.contains('payment-input')) {\n                this.validateField(e.target);\n            }\n        });\n    }\n\n    setupDemoMode() {\n        // Add demo mode notification to payment forms\n        const paymentForms = document.querySelectorAll('.payment-form, #paymentForm');\n        paymentForms.forEach(form => {\n            if (!form.querySelector('.demo-notice')) {\n                const demoNotice = document.createElement('div');\n                demoNotice.className = 'alert alert-info demo-notice';\n                demoNotice.innerHTML = `\n                    <i class=\"fas fa-info-circle me-2\"></i>\n                    <strong>Demo Mode:</strong> No real payments will be processed. Use test card: 4242 4242 4242 4242\n                `;\n                form.insertBefore(demoNotice, form.firstChild);\n            }\n        });\n    }\n\n    // Payment Processing Methods\n    async processPayment() {\n        const paymentData = this.collectPaymentData();\n        \n        if (!this.validatePaymentData(paymentData)) {\n            return;\n        }\n\n        try {\n            this.showPaymentProcessing();\n            \n            // Simulate payment processing\n            const result = await this.simulatePaymentProcessing(paymentData);\n            \n            if (result.success) {\n                this.handlePaymentSuccess(result);\n            } else {\n                this.handlePaymentError(result.error);\n            }\n            \n        } catch (error) {\n            this.handlePaymentError('Payment processing failed. Please try again.');\n        } finally {\n            this.hidePaymentProcessing();\n        }\n    }\n\n    async simulatePaymentProcessing(paymentData) {\n        // Simulate API call delay\n        await this.delay(2000 + Math.random() * 2000);\n        \n        // Simulate different payment outcomes\n        const random = Math.random();\n        \n        if (random < 0.85) {\n            // Success (85% chance)\n            return {\n                success: true,\n                transactionId: this.generateTransactionId(),\n                amount: paymentData.amount,\n                currency: paymentData.currency,\n                paymentMethod: paymentData.paymentMethod,\n                timestamp: new Date().toISOString()\n            };\n        } else if (random < 0.95) {\n            // Decline (10% chance)\n            return {\n                success: false,\n                error: 'Payment declined. Please check your payment details or try a different payment method.'\n            };\n        } else {\n            // Error (5% chance)\n            return {\n                success: false,\n                error: 'Payment processing error. Please try again later.'\n            };\n        }\n    }\n\n    collectPaymentData() {\n        const form = document.getElementById('paymentForm') || document.querySelector('.payment-form');\n        if (!form) return null;\n\n        const paymentMethod = form.querySelector('input[name=\"paymentMethod\"]:checked')?.value || 'card';\n        const amount = parseFloat(form.querySelector('#amount')?.value || document.getElementById('purchasePrice')?.textContent || 0);\n        \n        const data = {\n            paymentMethod: paymentMethod,\n            amount: amount,\n            currency: 'USD',\n            processingFee: this.getProcessingFee(paymentMethod),\n            total: amount + this.getProcessingFee(paymentMethod)\n        };\n\n        // Collect payment method specific data\n        if (paymentMethod === 'card') {\n            data.card = {\n                number: form.querySelector('#cardNumber')?.value?.replace(/\\s/g, '') || '',\n                expiryDate: form.querySelector('#expiryDate')?.value || '',\n                cvv: form.querySelector('#cvv')?.value || '',\n                holderName: form.querySelector('#cardHolderName')?.value || ''\n            };\n        } else if (paymentMethod === 'paypal') {\n            data.paypal = {\n                email: form.querySelector('#paypalEmail')?.value || ''\n            };\n        }\n\n        return data;\n    }\n\n    validatePaymentData(data) {\n        if (!data) {\n            this.showPaymentError('Please fill in all required fields.');\n            return false;\n        }\n\n        if (!data.amount || data.amount <= 0) {\n            this.showPaymentError('Invalid payment amount.');\n            return false;\n        }\n\n        if (data.paymentMethod === 'card') {\n            return this.validateCardData(data.card);\n        } else if (data.paymentMethod === 'paypal') {\n            return this.validatePayPalData(data.paypal);\n        }\n\n        return true;\n    }\n\n    validateCardData(card) {\n        if (!this.validateCardNumber(card.number)) {\n            this.showPaymentError('Please enter a valid card number.');\n            return false;\n        }\n\n        if (!this.validateExpiryDate(card.expiryDate)) {\n            this.showPaymentError('Please enter a valid expiry date.');\n            return false;\n        }\n\n        if (!this.validateCVV(card.cvv)) {\n            this.showPaymentError('Please enter a valid CVV.');\n            return false;\n        }\n\n        if (!card.holderName.trim()) {\n            this.showPaymentError('Please enter the cardholder name.');\n            return false;\n        }\n\n        return true;\n    }\n\n    validatePayPalData(paypal) {\n        if (!this.validateEmail(paypal.email)) {\n            this.showPaymentError('Please enter a valid PayPal email address.');\n            return false;\n        }\n        return true;\n    }\n\n    // Card Validation Methods\n    validateCardNumber(cardNumber) {\n        // Remove spaces and check if it's numeric\n        const cleaned = cardNumber.replace(/\\s/g, '');\n        \n        if (!/^\\d+$/.test(cleaned) || cleaned.length < 13 || cleaned.length > 19) {\n            return false;\n        }\n\n        // Luhn algorithm\n        return this.luhnCheck(cleaned);\n    }\n\n    luhnCheck(cardNumber) {\n        let sum = 0;\n        let isEven = false;\n        \n        for (let i = cardNumber.length - 1; i >= 0; i--) {\n            let digit = parseInt(cardNumber.charAt(i));\n            \n            if (isEven) {\n                digit *= 2;\n                if (digit > 9) {\n                    digit -= 9;\n                }\n            }\n            \n            sum += digit;\n            isEven = !isEven;\n        }\n        \n        return sum % 10 === 0;\n    }\n\n    validateExpiryDate(expiryDate) {\n        if (!/^\\d{2}\\/\\d{2}$/.test(expiryDate)) {\n            return false;\n        }\n\n        const [month, year] = expiryDate.split('/').map(num => parseInt(num, 10));\n        const currentDate = new Date();\n        const currentYear = currentDate.getFullYear() % 100;\n        const currentMonth = currentDate.getMonth() + 1;\n\n        if (month < 1 || month > 12) {\n            return false;\n        }\n\n        if (year < currentYear || (year === currentYear && month < currentMonth)) {\n            return false;\n        }\n\n        return true;\n    }\n\n    validateCVV(cvv) {\n        return /^\\d{3,4}$/.test(cvv);\n    }\n\n    validateEmail(email) {\n        const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n        return emailRegex.test(email);\n    }\n\n    // Card Type Detection\n    detectCardType(cardNumber) {\n        const cleaned = cardNumber.replace(/\\s/g, '');\n        \n        const cardTypes = {\n            visa: /^4/,\n            mastercard: /^5[1-5]/,\n            amex: /^3[47]/,\n            discover: /^6(?:011|5)/,\n            dinersclub: /^3[0689]/,\n            jcb: /^35/\n        };\n\n        for (const [type, pattern] of Object.entries(cardTypes)) {\n            if (pattern.test(cleaned)) {\n                return type;\n            }\n        }\n\n        return 'unknown';\n    }\n\n    // Input Formatting Methods\n    formatCardNumber(input) {\n        let value = input.value.replace(/\\s/g, '').replace(/[^0-9]/gi, '');\n        const matches = value.match(/\\d{4,16}/g);\n        const match = matches && matches[0] || '';\n        const parts = [];\n\n        for (let i = 0, len = match.length; i < len; i += 4) {\n            parts.push(match.substring(i, i + 4));\n        }\n\n        if (parts.length) {\n            input.value = parts.join(' ');\n        } else {\n            input.value = value;\n        }\n\n        // Update card type icon\n        this.updateCardTypeIcon(input, value);\n    }\n\n    formatExpiryDate(input) {\n        let value = input.value.replace(/\\D/g, '');\n        \n        if (value.length >= 2) {\n            value = value.substring(0, 2) + '/' + value.substring(2, 4);\n        }\n        \n        input.value = value;\n    }\n\n    formatCVV(input) {\n        input.value = input.value.replace(/\\D/g, '').substring(0, 4);\n    }\n\n    updateCardTypeIcon(input, cardNumber) {\n        const cardType = this.detectCardType(cardNumber);\n        const iconElement = input.parentNode.querySelector('.card-type-icon');\n        \n        if (iconElement) {\n            const icons = {\n                visa: 'fab fa-cc-visa',\n                mastercard: 'fab fa-cc-mastercard',\n                amex: 'fab fa-cc-amex',\n                discover: 'fab fa-cc-discover',\n                dinersclub: 'fab fa-cc-diners-club',\n                jcb: 'fab fa-cc-jcb',\n                unknown: 'fas fa-credit-card'\n            };\n            \n            iconElement.className = `card-type-icon ${icons[cardType] || icons.unknown}`;\n        }\n    }\n\n    // Payment Method Management\n    handlePaymentMethodChange(method) {\n        this.showPaymentMethodForm(method);\n        this.updatePaymentSummary(method);\n    }\n\n    showPaymentMethodForm(method) {\n        // Hide all payment forms\n        const forms = document.querySelectorAll('.payment-method-form');\n        forms.forEach(form => form.style.display = 'none');\n\n        // Show selected payment method form\n        const selectedForm = document.getElementById(`${method}Form`);\n        if (selectedForm) {\n            selectedForm.style.display = 'block';\n        }\n    }\n\n    updatePaymentSummary(method) {\n        const processingFee = this.getProcessingFee(method);\n        const amount = parseFloat(document.getElementById('purchasePrice')?.textContent || 0);\n        const total = amount + processingFee;\n\n        const processingFeeElement = document.querySelector('.processing-fee');\n        const totalElement = document.querySelector('.total-amount');\n\n        if (processingFeeElement) {\n            processingFeeElement.textContent = `$${processingFee.toFixed(2)}`;\n        }\n\n        if (totalElement) {\n            totalElement.textContent = `$${total.toFixed(2)}`;\n        }\n    }\n\n    getProcessingFee(method) {\n        const paymentMethod = this.paymentMethods.find(pm => pm.id === method);\n        return paymentMethod ? paymentMethod.processingFee : 0.99;\n    }\n\n    // UI State Management\n    showPaymentProcessing() {\n        const submitButton = document.querySelector('#paymentForm button[type=\"submit\"], .payment-submit');\n        if (submitButton) {\n            submitButton.disabled = true;\n            submitButton.innerHTML = `\n                <span class=\"spinner-border spinner-border-sm me-2\" role=\"status\"></span>\n                Processing...\n            `;\n        }\n\n        // Show processing overlay\n        this.showProcessingOverlay();\n    }\n\n    hidePaymentProcessing() {\n        const submitButton = document.querySelector('#paymentForm button[type=\"submit\"], .payment-submit');\n        if (submitButton) {\n            submitButton.disabled = false;\n            submitButton.innerHTML = `\n                <i class=\"fas fa-credit-card me-2\"></i>Complete Payment\n            `;\n        }\n\n        this.hideProcessingOverlay();\n    }\n\n    showProcessingOverlay() {\n        const overlay = document.createElement('div');\n        overlay.id = 'paymentProcessingOverlay';\n        overlay.className = 'payment-processing-overlay';\n        overlay.innerHTML = `\n            <div class=\"processing-content\">\n                <div class=\"spinner-border text-primary mb-3\" role=\"status\">\n                    <span class=\"visually-hidden\">Processing...</span>\n                </div>\n                <h5>Processing Payment</h5>\n                <p class=\"text-muted\">Please do not refresh or close this page</p>\n            </div>\n        `;\n        document.body.appendChild(overlay);\n    }\n\n    hideProcessingOverlay() {\n        const overlay = document.getElementById('paymentProcessingOverlay');\n        if (overlay) {\n            overlay.remove();\n        }\n    }\n\n    // Payment Result Handling\n    handlePaymentSuccess(result) {\n        this.currentTransaction = result;\n        \n        // Store transaction for receipt\n        this.storeTransaction(result);\n        \n        // Show success message\n        this.showPaymentSuccess(result);\n        \n        // Trigger success callback if available\n        if (window.onPaymentSuccess) {\n            window.onPaymentSuccess(result);\n        }\n        \n        // Redirect or update UI\n        setTimeout(() => {\n            this.redirectAfterPayment(result);\n        }, 3000);\n    }\n\n    handlePaymentError(error) {\n        this.showPaymentError(error);\n        \n        // Trigger error callback if available\n        if (window.onPaymentError) {\n            window.onPaymentError(error);\n        }\n    }\n\n    showPaymentSuccess(result) {\n        window.commonUtils?.showToast(`Payment successful! Transaction ID: ${result.transactionId}`, 'success', 8000);\n        \n        // Update modal content if in modal\n        const modal = document.querySelector('.modal.show');\n        if (modal) {\n            this.showSuccessInModal(modal, result);\n        }\n    }\n\n    showSuccessInModal(modal, result) {\n        const modalBody = modal.querySelector('.modal-body');\n        if (modalBody) {\n            modalBody.innerHTML = `\n                <div class=\"text-center\">\n                    <i class=\"fas fa-check-circle fa-5x text-success mb-4\"></i>\n                    <h4 class=\"text-success\">Payment Successful!</h4>\n                    <p class=\"text-muted mb-4\">Your purchase has been completed successfully.</p>\n                    <div class=\"card bg-light\">\n                        <div class=\"card-body\">\n                            <div class=\"row text-start\">\n                                <div class=\"col-6\"><strong>Transaction ID:</strong></div>\n                                <div class=\"col-6\">${result.transactionId}</div>\n                                <div class=\"col-6\"><strong>Amount:</strong></div>\n                                <div class=\"col-6\">$${result.amount.toFixed(2)}</div>\n                                <div class=\"col-6\"><strong>Date:</strong></div>\n                                <div class=\"col-6\">${new Date(result.timestamp).toLocaleDateString()}</div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            `;\n        }\n\n        const modalFooter = modal.querySelector('.modal-footer');\n        if (modalFooter) {\n            modalFooter.innerHTML = `\n                <button type=\"button\" class=\"btn btn-primary\" onclick=\"window.location.reload()\">\n                    Continue\n                </button>\n            `;\n        }\n    }\n\n    showPaymentError(error) {\n        window.commonUtils?.showToast(error, 'danger', 8000);\n    }\n\n    // Transaction Management\n    storeTransaction(transaction) {\n        const transactions = this.getStoredTransactions();\n        transactions.push(transaction);\n        localStorage.setItem('videohub_transactions', JSON.stringify(transactions));\n    }\n\n    getStoredTransactions() {\n        const stored = localStorage.getItem('videohub_transactions');\n        return stored ? JSON.parse(stored) : [];\n    }\n\n    getTransaction(transactionId) {\n        const transactions = this.getStoredTransactions();\n        return transactions.find(t => t.transactionId === transactionId);\n    }\n\n    redirectAfterPayment(result) {\n        // Default redirect logic\n        const currentPage = window.location.pathname;\n        \n        if (currentPage.includes('browse.html')) {\n            // Refresh browse page to update purchased status\n            window.location.reload();\n        } else if (currentPage.includes('purchases.html')) {\n            // Refresh purchases page\n            window.location.reload();\n        } else {\n            // Go to purchases page\n            window.location.href = 'purchases.html';\n        }\n    }\n\n    // Field Validation\n    validateField(field) {\n        const fieldType = field.id || field.name;\n        let isValid = true;\n        let errorMessage = '';\n\n        switch (fieldType) {\n            case 'cardNumber':\n                isValid = this.validateCardNumber(field.value);\n                errorMessage = 'Please enter a valid card number';\n                break;\n            case 'expiryDate':\n                isValid = this.validateExpiryDate(field.value);\n                errorMessage = 'Please enter a valid expiry date (MM/YY)';\n                break;\n            case 'cvv':\n                isValid = this.validateCVV(field.value);\n                errorMessage = 'Please enter a valid CVV';\n                break;\n            case 'cardHolderName':\n                isValid = field.value.trim().length >= 2;\n                errorMessage = 'Please enter the cardholder name';\n                break;\n            case 'paypalEmail':\n                isValid = this.validateEmail(field.value);\n                errorMessage = 'Please enter a valid email address';\n                break;\n        }\n\n        this.updateFieldValidation(field, isValid, errorMessage);\n        return isValid;\n    }\n\n    updateFieldValidation(field, isValid, errorMessage) {\n        field.classList.remove('is-valid', 'is-invalid');\n        \n        // Remove existing feedback\n        const existingFeedback = field.parentNode.querySelector('.invalid-feedback');\n        if (existingFeedback) {\n            existingFeedback.remove();\n        }\n\n        if (field.value.trim() === '') {\n            // Don't show validation for empty fields unless they've been focused\n            return;\n        }\n\n        if (isValid) {\n            field.classList.add('is-valid');\n        } else {\n            field.classList.add('is-invalid');\n            \n            // Add error feedback\n            const feedback = document.createElement('div');\n            feedback.className = 'invalid-feedback';\n            feedback.textContent = errorMessage;\n            field.parentNode.appendChild(feedback);\n        }\n    }\n\n    // Utility Methods\n    generateTransactionId() {\n        const timestamp = Date.now().toString();\n        const random = Math.random().toString(36).substr(2, 5).toUpperCase();\n        return `TXN_${timestamp}_${random}`;\n    }\n\n    delay(ms) {\n        return new Promise(resolve => setTimeout(resolve, ms));\n    }\n\n    // Public API Methods\n    initializePayment(options = {}) {\n        this.currentTransaction = null;\n        \n        // Set up payment form with options\n        if (options.amount) {\n            const amountElement = document.getElementById('amount');\n            if (amountElement) {\n                amountElement.value = options.amount;\n            }\n        }\n\n        if (options.currency) {\n            this.currency = options.currency;\n        }\n\n        // Initialize default payment method\n        const defaultMethod = options.defaultMethod || 'card';\n        const methodRadio = document.querySelector(`input[name=\"paymentMethod\"][value=\"${defaultMethod}\"]`);\n        if (methodRadio) {\n            methodRadio.checked = true;\n            this.handlePaymentMethodChange(defaultMethod);\n        }\n    }\n\n    getPaymentMethods() {\n        return this.paymentMethods.filter(method => method.enabled);\n    }\n\n    setPaymentCallback(onSuccess, onError) {\n        window.onPaymentSuccess = onSuccess;\n        window.onPaymentError = onError;\n    }\n}\n\n// CSS for payment processing overlay\nconst paymentStyles = `\n    .payment-processing-overlay {\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background: rgba(0, 0, 0, 0.8);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        z-index: 9999;\n    }\n\n    .processing-content {\n        background: white;\n        padding: 2rem;\n        border-radius: 0.5rem;\n        text-align: center;\n        max-width: 300px;\n    }\n\n    .card-type-icon {\n        position: absolute;\n        right: 10px;\n        top: 50%;\n        transform: translateY(-50%);\n        font-size: 1.2rem;\n        color: #6c757d;\n    }\n\n    .payment-method-form {\n        display: none;\n        margin-top: 1rem;\n    }\n\n    .payment-method-form.active {\n        display: block;\n    }\n\n    .payment-input {\n        position: relative;\n    }\n`;\n\n// Inject styles\nconst styleSheet = document.createElement('style');\nstyleSheet.textContent = paymentStyles;\ndocument.head.appendChild(styleSheet);\n\n// Initialize payment manager when DOM is loaded\ndocument.addEventListener('DOMContentLoaded', () => {\n    window.paymentManager = new PaymentManager();\n});\n\n// Export for other modules\nwindow.PaymentManager = PaymentManager;\n","size_bytes":23524},"assets/js/profile.js":{"content":"/**\n * VideoHub Profile Settings Module\n * Handles profile updates and password changes\n */\n\nclass ProfileManager {\n    constructor() {\n        this.currentUser = {\n            id: 1,\n            firstName: 'Admin',\n            lastName: 'User',\n            email: 'admin@videohub.com',\n            role: 'Administrator'\n        };\n        this.init();\n    }\n\n    async init() {\n        await this.loadUserProfile();\n        this.bindEvents();\n        this.setupPasswordStrengthChecker();\n    }\n\n    async loadUserProfile() {\n        try {\n            const result = await window.apiService.getUserProfile();\n            if (result.success) {\n                this.currentUser = result.data;\n                this.populateProfileForm();\n            } else {\n                // Use demo data\n                this.populateProfileForm();\n            }\n        } catch (error) {\n            console.log('API not available, using demo data');\n            this.populateProfileForm();\n        }\n    }\n\n    populateProfileForm() {\n        document.getElementById('firstName').value = this.currentUser.firstName || '';\n        document.getElementById('lastName').value = this.currentUser.lastName || '';\n        document.getElementById('email').value = this.currentUser.email || '';\n        document.getElementById('role').value = this.currentUser.role || '';\n        \n        // Update last login time\n        const lastLoginElement = document.getElementById('lastLoginTime');\n        if (lastLoginElement) {\n            const now = new Date();\n            lastLoginElement.textContent = `${now.toLocaleDateString()}, ${now.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}`;\n        }\n    }\n\n    bindEvents() {\n        // Profile form submission\n        const profileForm = document.getElementById('profileForm');\n        if (profileForm) {\n            profileForm.addEventListener('submit', (e) => this.handleProfileUpdate(e));\n        }\n\n        // Password form submission\n        const passwordForm = document.getElementById('changePasswordForm');\n        if (passwordForm) {\n            passwordForm.addEventListener('submit', (e) => this.handlePasswordChange(e));\n        }\n\n        // Real-time validation\n        this.setupFormValidation();\n    }\n\n    setupFormValidation() {\n        // First name validation\n        const firstNameInput = document.getElementById('firstName');\n        if (firstNameInput) {\n            firstNameInput.addEventListener('input', (e) => {\n                this.validateName(e.target);\n            });\n        }\n\n        // Last name validation\n        const lastNameInput = document.getElementById('lastName');\n        if (lastNameInput) {\n            lastNameInput.addEventListener('input', (e) => {\n                this.validateName(e.target);\n            });\n        }\n\n        // Password confirmation validation\n        const confirmPasswordInput = document.getElementById('confirmPassword');\n        const newPasswordInput = document.getElementById('newPassword');\n        \n        if (confirmPasswordInput && newPasswordInput) {\n            [confirmPasswordInput, newPasswordInput].forEach(input => {\n                input.addEventListener('input', () => {\n                    this.validatePasswordMatch();\n                });\n            });\n        }\n    }\n\n    validateName(input) {\n        const name = input.value.trim();\n        const isValid = name.length >= 2 && /^[a-zA-Z\\s'-]+$/.test(name);\n        \n        if (isValid) {\n            input.classList.remove('is-invalid');\n            input.classList.add('is-valid');\n        } else {\n            input.classList.remove('is-valid');\n            input.classList.add('is-invalid');\n        }\n\n        return isValid;\n    }\n\n    validatePasswordMatch() {\n        const newPassword = document.getElementById('newPassword').value;\n        const confirmPassword = document.getElementById('confirmPassword').value;\n        const confirmPasswordInput = document.getElementById('confirmPassword');\n\n        if (confirmPassword && newPassword !== confirmPassword) {\n            confirmPasswordInput.classList.add('is-invalid');\n            confirmPasswordInput.classList.remove('is-valid');\n            return false;\n        } else if (confirmPassword) {\n            confirmPasswordInput.classList.remove('is-invalid');\n            confirmPasswordInput.classList.add('is-valid');\n            return true;\n        }\n        return false;\n    }\n\n    setupPasswordStrengthChecker() {\n        const newPasswordInput = document.getElementById('newPassword');\n        if (newPasswordInput) {\n            newPasswordInput.addEventListener('input', (e) => {\n                this.updatePasswordStrength(e.target.value);\n            });\n        }\n    }\n\n    updatePasswordStrength(password) {\n        const strengthBar = document.getElementById('strengthBar');\n        const strengthText = document.getElementById('strengthText');\n        \n        if (!strengthBar || !strengthText) return;\n\n        const strength = this.calculatePasswordStrength(password);\n        \n        // Update progress bar\n        strengthBar.style.width = `${strength.percentage}%`;\n        strengthBar.className = `progress-bar bg-${strength.color}`;\n        \n        // Update text\n        strengthText.textContent = strength.text;\n        strengthText.className = `text-sm text-${strength.color}`;\n    }\n\n    calculatePasswordStrength(password) {\n        if (!password) return { percentage: 0, color: 'secondary', text: 'Enter password' };\n        \n        let score = 0;\n        const checks = [\n            { test: /.{8,}/, points: 25 }, // Length >= 8\n            { test: /[a-z]/, points: 15 }, // Lowercase\n            { test: /[A-Z]/, points: 15 }, // Uppercase\n            { test: /[0-9]/, points: 20 }, // Numbers\n            { test: /[^A-Za-z0-9]/, points: 25 } // Special characters\n        ];\n\n        checks.forEach(check => {\n            if (check.test.test(password)) {\n                score += check.points;\n            }\n        });\n\n        if (score < 40) return { percentage: score, color: 'danger', text: 'Weak' };\n        if (score < 70) return { percentage: score, color: 'warning', text: 'Fair' };\n        if (score < 90) return { percentage: score, color: 'info', text: 'Good' };\n        return { percentage: score, color: 'success', text: 'Strong' };\n    }\n\n    async handleProfileUpdate(e) {\n        e.preventDefault();\n        \n        const form = e.target;\n        const formData = new FormData(form);\n        const profileData = {\n            firstName: formData.get('firstName').trim(),\n            lastName: formData.get('lastName').trim()\n        };\n\n        // Validate form\n        const isValid = this.validateProfileForm(form);\n        if (!isValid) {\n            return;\n        }\n\n        // Show loading state\n        const submitBtn = form.querySelector('button[type=\"submit\"]');\n        const originalText = submitBtn.innerHTML;\n        submitBtn.innerHTML = '<i class=\"fas fa-spinner fa-spin me-1\"></i> Saving...';\n        submitBtn.disabled = true;\n\n        try {\n            const result = await window.apiService.updateUserProfile(profileData);\n            \n            if (result.success) {\n                // Update local data\n                this.currentUser.firstName = profileData.firstName;\n                this.currentUser.lastName = profileData.lastName;\n                \n                // Add success class to form\n                form.classList.add('was-validated');\n                \n                window.apiService.showSuccessMessage('Profile updated successfully');\n            } else {\n                window.apiService.handleApiError(result, 'Failed to update profile');\n            }\n        } catch (error) {\n            // Demo mode\n            this.currentUser.firstName = profileData.firstName;\n            this.currentUser.lastName = profileData.lastName;\n            window.apiService.showSuccessMessage('Profile updated successfully (demo mode)');\n        } finally {\n            // Reset button\n            submitBtn.innerHTML = originalText;\n            submitBtn.disabled = false;\n        }\n    }\n\n    validateProfileForm(form) {\n        const firstName = form.querySelector('#firstName');\n        const lastName = form.querySelector('#lastName');\n        \n        let isValid = true;\n        \n        if (!this.validateName(firstName)) {\n            isValid = false;\n        }\n        \n        if (!this.validateName(lastName)) {\n            isValid = false;\n        }\n\n        form.classList.add('was-validated');\n        return isValid;\n    }\n\n    async handlePasswordChange(e) {\n        e.preventDefault();\n        \n        const form = e.target;\n        const formData = new FormData(form);\n        const passwordData = {\n            currentPassword: formData.get('currentPassword'),\n            newPassword: formData.get('newPassword'),\n            confirmPassword: formData.get('confirmPassword')\n        };\n\n        // Validate form\n        const isValid = this.validatePasswordForm(form, passwordData);\n        if (!isValid) {\n            return;\n        }\n\n        // Show loading state\n        const submitBtn = form.querySelector('button[type=\"submit\"]');\n        const originalText = submitBtn.innerHTML;\n        submitBtn.innerHTML = '<i class=\"fas fa-spinner fa-spin me-1\"></i> Updating...';\n        submitBtn.disabled = true;\n\n        try {\n            const result = await window.apiService.put('/users/change-password', {\n                currentPassword: passwordData.currentPassword,\n                newPassword: passwordData.newPassword\n            });\n            \n            if (result.success) {\n                // Close modal\n                const modal = bootstrap.Modal.getInstance(document.getElementById('changePasswordModal'));\n                modal.hide();\n                \n                // Reset form\n                form.reset();\n                form.classList.remove('was-validated');\n                \n                // Reset password strength indicator\n                this.updatePasswordStrength('');\n                \n                window.apiService.showSuccessMessage('Password updated successfully');\n            } else {\n                window.apiService.handleApiError(result, 'Failed to update password');\n            }\n        } catch (error) {\n            // Demo mode\n            const modal = bootstrap.Modal.getInstance(document.getElementById('changePasswordModal'));\n            modal.hide();\n            form.reset();\n            form.classList.remove('was-validated');\n            this.updatePasswordStrength('');\n            window.apiService.showSuccessMessage('Password updated successfully (demo mode)');\n        } finally {\n            // Reset button\n            submitBtn.innerHTML = originalText;\n            submitBtn.disabled = false;\n        }\n    }\n\n    validatePasswordForm(form, data) {\n        let isValid = true;\n        \n        // Current password validation\n        const currentPasswordInput = form.querySelector('#currentPassword');\n        if (!data.currentPassword || data.currentPassword.length < 6) {\n            currentPasswordInput.classList.add('is-invalid');\n            isValid = false;\n        } else {\n            currentPasswordInput.classList.remove('is-invalid');\n            currentPasswordInput.classList.add('is-valid');\n        }\n        \n        // New password validation\n        const newPasswordInput = form.querySelector('#newPassword');\n        const strength = this.calculatePasswordStrength(data.newPassword);\n        if (strength.percentage < 40) {\n            newPasswordInput.classList.add('is-invalid');\n            isValid = false;\n        } else {\n            newPasswordInput.classList.remove('is-invalid');\n            newPasswordInput.classList.add('is-valid');\n        }\n        \n        // Confirm password validation\n        if (data.newPassword !== data.confirmPassword) {\n            form.querySelector('#confirmPassword').classList.add('is-invalid');\n            isValid = false;\n        }\n\n        form.classList.add('was-validated');\n        return isValid;\n    }\n}\n\n// Global functions\nwindow.resetProfileForm = function() {\n    const form = document.getElementById('profileForm');\n    if (form) {\n        form.reset();\n        form.classList.remove('was-validated');\n        \n        // Remove validation classes\n        form.querySelectorAll('.form-control').forEach(input => {\n            input.classList.remove('is-valid', 'is-invalid');\n        });\n        \n        // Reload original data\n        window.profileManager.populateProfileForm();\n    }\n};\n\nwindow.togglePasswordVisibility = function(inputId, button) {\n    const input = document.getElementById(inputId);\n    const icon = button.querySelector('i');\n    \n    if (input.type === 'password') {\n        input.type = 'text';\n        icon.classList.remove('fa-eye');\n        icon.classList.add('fa-eye-slash');\n    } else {\n        input.type = 'password';\n        icon.classList.remove('fa-eye-slash');\n        icon.classList.add('fa-eye');\n    }\n};\n\n// Initialize profile manager\ndocument.addEventListener('DOMContentLoaded', function() {\n    window.profileManager = new ProfileManager();\n});","size_bytes":13215},"assets/js/viewer.js":{"content":"/**\n * VideoHub Viewer Module\n * Handles viewer functionality including browsing, purchasing, and watching videos\n */\n\nclass ViewerManager {\n    constructor() {\n        this.videos = [];\n        this.purchases = [];\n        this.favorites = [];\n        this.currentVideo = null;\n        this.player = null;\n        this.filteredVideos = [];\n        this.currentViewerId = 2; // Demo viewer ID (Sarah Davis)\n        this.favorites = [1, 2]; // Demo favorites - videos 1 and 2\n        this.init();\n    }\n\n    async init() {\n        await this.loadDataFromAPI();\n        this.bindEvents();\n        this.loadPageSpecificHandlers();\n        this.initializePlayer();\n    }\n\n    async loadDataFromAPI() {\n        try {\n            // Wait for API service to be available and load data\n            let retries = 0;\n            const maxRetries = 50; // 5 seconds\n            \n            while (retries < maxRetries && !window.apiService) {\n                await new Promise(resolve => setTimeout(resolve, 100));\n                retries++;\n            }\n            \n            if (window.apiService) {\n                // Load data from API\n                const [videosResponse, purchasesResponse] = await Promise.all([\n                    window.apiService.get('/videos'),\n                    window.apiService.get('/purchases')\n                ]);\n                \n                // Handle API response format properly\n                this.videos = Array.isArray(videosResponse.videos) ? videosResponse.videos : \n                             Array.isArray(videosResponse.data?.videos) ? videosResponse.data.videos : \n                             Array.isArray(videosResponse.data) ? videosResponse.data : [];\n                             \n                this.purchases = Array.isArray(purchasesResponse.purchases) ? purchasesResponse.purchases : \n                                Array.isArray(purchasesResponse.data?.purchases) ? purchasesResponse.data.purchases : \n                                Array.isArray(purchasesResponse.data) ? purchasesResponse.data : [];\n                \n                console.log('Raw API responses:', {\n                    videosResponse: videosResponse,\n                    purchasesResponse: purchasesResponse,\n                    processedVideos: this.videos.length,\n                    processedPurchases: this.purchases.length\n                });\n            } else {\n                console.error('API service not available');\n                this.videos = [];\n                this.purchases = [];\n            }\n            \n            // Filter purchases for current viewer\n            this.purchases = this.purchases.filter(p => p.viewerId === this.currentViewerId);\n            \n            // Enrich purchases with video data\n            this.purchases = this.purchases.map(purchase => {\n                const video = this.videos.find(v => v.id === purchase.videoId);\n                return {\n                    ...purchase,\n                    video: video ? {\n                        ...video,\n                        creator: video.creatorName || 'Unknown Creator',\n                        thumbnail: video.thumbnail || 'https://via.placeholder.com/400x225/666/fff?text=Video',\n                        rating: 4.5 // Default rating\n                    } : null\n                };\n            }).filter(p => p.video); // Remove purchases without video data\n            \n            console.log('Viewer data loaded:', { videos: this.videos.length, purchases: this.purchases.length });\n        } catch (error) {\n            console.error('Error loading viewer data:', error);\n            this.videos = [];\n            this.purchases = [];\n        }\n    }\n\n    bindEvents() {\n        // Filter and search events\n        const categoryFilter = document.getElementById('categoryFilter');\n        const statusFilter = document.getElementById('statusFilter');\n        const searchInput = document.getElementById('searchInput');\n        const applyFilters = document.getElementById('applyFilters');\n        \n        if (categoryFilter) {\n            categoryFilter.addEventListener('change', () => this.applyFilters());\n        }\n        if (statusFilter) {\n            statusFilter.addEventListener('change', () => this.applyFilters());\n        }\n        if (searchInput) {\n            searchInput.addEventListener('input', () => this.applyFilters());\n        }\n        if (applyFilters) {\n            applyFilters.addEventListener('click', () => this.applyFilters());\n        }\n\n        // View mode toggle\n        const gridView = document.getElementById('gridView');\n        const listView = document.getElementById('listView');\n        \n        if (gridView) {\n            gridView.addEventListener('click', () => this.switchViewMode('grid'));\n        }\n        if (listView) {\n            listView.addEventListener('click', () => this.switchViewMode('list'));\n        }\n\n        // Purchase modal events\n        const purchaseFromPreviewBtn = document.getElementById('purchaseFromPreview');\n        const confirmPurchaseBtn = document.getElementById('confirmPurchase');\n        if (purchaseFromPreviewBtn) {\n            purchaseFromPreviewBtn.addEventListener('click', this.handlePurchaseFromPreview.bind(this));\n        }\n        if (confirmPurchaseBtn) {\n            confirmPurchaseBtn.addEventListener('click', this.handleConfirmPurchase.bind(this));\n        }\n\n        // Profile form events\n        const profileForm = document.getElementById('profileForm');\n        if (profileForm) {\n            profileForm.addEventListener('submit', this.handleProfileUpdate.bind(this));\n        }\n\n        const passwordForm = document.getElementById('passwordForm');\n        if (passwordForm) {\n            passwordForm.addEventListener('submit', this.handlePasswordChange.bind(this));\n        }\n    }\n\n    loadPageSpecificHandlers() {\n        const currentPage = window.location.pathname.split('/').pop();\n        \n        switch (currentPage) {\n            case 'dashboard.html':\n                this.loadDashboardPage();\n                break;\n            case 'purchases.html':\n                this.loadPurchasesPage();\n                break;\n            case 'profile.html':\n                this.loadProfilePage();\n                break;\n        }\n    }\n\n    loadDashboardPage() {\n        this.renderPurchaseStats();\n        this.renderAllVideos();\n        this.bindAllVideosEvents();\n    }\n\n    loadPurchasesPage() {\n        this.renderPurchasedVideos();\n    }\n\n    loadProfilePage() {\n        this.loadProfileData();\n    }\n\n    renderAllVideos() {\n        const container = document.getElementById('allVideos');\n        if (!container) return;\n\n        this.filteredVideos = this.videos;\n        this.displayVideos();\n    }\n\n    displayVideos() {\n        const container = document.getElementById('allVideos');\n        if (!container) return;\n\n        container.innerHTML = '';\n\n        this.filteredVideos.forEach(video => {\n            const col = document.createElement('div');\n            col.className = 'col-lg-3 col-md-4 col-sm-6 mb-4';\n            col.innerHTML = this.createVideoCard(video);\n            container.appendChild(col);\n        });\n    }\n\n    bindAllVideosEvents() {\n        // Search functionality\n        const searchInput = document.getElementById('videoSearch');\n        if (searchInput) {\n            searchInput.addEventListener('input', () => {\n                this.filterVideos();\n            });\n        }\n\n        // Category filter\n        const categoryFilter = document.getElementById('categoryFilter');\n        if (categoryFilter) {\n            categoryFilter.addEventListener('change', () => {\n                this.filterVideos();\n            });\n        }\n\n        // Sort functionality\n        const sortBy = document.getElementById('sortBy');\n        if (sortBy) {\n            sortBy.addEventListener('change', () => {\n                this.sortVideos();\n            });\n        }\n\n        // View mode toggle\n        const gridView = document.getElementById('gridView');\n        const listView = document.getElementById('listView');\n        \n        if (gridView) {\n            gridView.addEventListener('change', () => {\n                if (gridView.checked) {\n                    this.switchViewMode('grid');\n                }\n            });\n        }\n        \n        if (listView) {\n            listView.addEventListener('change', () => {\n                if (listView.checked) {\n                    this.switchViewMode('list');\n                }\n            });\n        }\n    }\n\n    filterVideos() {\n        const searchTerm = document.getElementById('videoSearch')?.value.toLowerCase() || '';\n        const selectedCategory = document.getElementById('categoryFilter')?.value || '';\n\n        this.filteredVideos = this.videos.filter(video => {\n            const matchesSearch = video.title.toLowerCase().includes(searchTerm) ||\n                                video.description.toLowerCase().includes(searchTerm) ||\n                                video.creatorName.toLowerCase().includes(searchTerm);\n            \n            const matchesCategory = !selectedCategory || video.category === selectedCategory;\n\n            return matchesSearch && matchesCategory;\n        });\n\n        this.sortVideos();\n    }\n\n    sortVideos() {\n        const sortBy = document.getElementById('sortBy')?.value || 'newest';\n\n        switch (sortBy) {\n            case 'newest':\n                this.filteredVideos.sort((a, b) => new Date(b.uploadDate) - new Date(a.uploadDate));\n                break;\n            case 'oldest':\n                this.filteredVideos.sort((a, b) => new Date(a.uploadDate) - new Date(b.uploadDate));\n                break;\n            case 'price-low':\n                this.filteredVideos.sort((a, b) => a.price - b.price);\n                break;\n            case 'price-high':\n                this.filteredVideos.sort((a, b) => b.price - a.price);\n                break;\n            case 'rating':\n                this.filteredVideos.sort((a, b) => (b.rating || 4.5) - (a.rating || 4.5));\n                break;\n        }\n\n        this.displayVideos();\n    }\n\n    switchViewMode(mode) {\n        const container = document.getElementById('allVideos');\n        if (!container) return;\n\n        if (mode === 'list') {\n            // Create table view\n            container.innerHTML = `\n                <div class=\"table-responsive\">\n                    <table class=\"table table-hover\">\n                        <thead>\n                            <tr>\n                                <th>Video</th>\n                                <th>Creator</th>\n                                <th>Duration</th>\n                                <th>Price</th>\n                                <th>Category</th>\n                                <th>Actions</th>\n                            </tr>\n                        </thead>\n                        <tbody id=\"videosTableBody\">\n                        </tbody>\n                    </table>\n                </div>\n            `;\n            \n            const tbody = document.getElementById('videosTableBody');\n            this.filteredVideos.forEach(video => {\n                const isPurchased = this.purchases.some(p => p.videoId === video.id);\n                const row = document.createElement('tr');\n                row.innerHTML = `\n                    <td>\n                        <div class=\"d-flex align-items-center\">\n                            <img src=\"${video.thumbnail}\" width=\"60\" height=\"34\" class=\"rounded me-3\" alt=\"${video.title}\">\n                            <div>\n                                <strong>${video.title}</strong><br>\n                                <small class=\"text-muted\">${video.category}</small>\n                            </div>\n                        </div>\n                    </td>\n                    <td>${video.creatorName}</td>\n                    <td>${video.duration}</td>\n                    <td>${isPurchased ? 'Owned' : '$' + video.price.toFixed(2)}</td>\n                    <td><span class=\"badge bg-secondary\">${video.category}</span></td>\n                    <td>\n                        <div class=\"btn-group btn-group-sm\">\n                            <button class=\"btn btn-outline-primary\" onclick=\"viewerManager.${isPurchased ? 'playVideo' : 'showVideoPreview'}(${video.id})\">\n                                <i class=\"fas fa-${isPurchased ? 'play' : 'eye'}\"></i>\n                            </button>\n                            ${!isPurchased ? `\n                                <button class=\"btn btn-outline-success\" onclick=\"viewerManager.showPurchaseModal(${video.id})\">\n                                    <i class=\"fas fa-shopping-cart\"></i>\n                                </button>\n                            ` : ''}\n                        </div>\n                    </td>\n                `;\n                tbody.appendChild(row);\n            });\n        } else {\n            // Grid view is the default\n            this.displayVideos();\n        }\n    }\n\n    createVideoCard(video) {\n        const isPurchased = this.purchases.some(p => p.videoId === video.id);\n        const isFavorite = this.favorites.includes(video.id);\n\n        return `\n            <div class=\"card video-card h-100\">\n                <div class=\"video-thumbnail\">\n                    <img src=\"${video.thumbnail}\" class=\"card-img-top\" alt=\"${video.title}\">\n                    <div class=\"video-duration\">${video.duration}</div>\n                    <div class=\"video-price\">${isPurchased ? 'Owned' : '$' + video.price.toFixed(2)}</div>\n                    <div class=\"video-overlay\" onclick=\"viewerManager.${isPurchased ? 'playVideo' : 'showVideoPreview'}(${video.id})\">\n                        <i class=\"fas fa-${isPurchased ? 'play' : 'eye'} fa-2x\"></i>\n                    </div>\n                </div>\n                <div class=\"card-body\">\n                    <h6 class=\"video-title\">${video.title}</h6>\n                    <p class=\"video-creator\">By ${video.creatorName}</p>\n                    <div class=\"video-stats\">\n                        <small class=\"text-muted\">\n                            <i class=\"fas fa-eye me-1\"></i>${video.views ? video.views.toLocaleString() : '0'} views\n                            <i class=\"fas fa-star me-1 ms-2\"></i>${video.rating || '4.5'}\n                        </small>\n                        <div class=\"video-actions\">\n                            <button class=\"btn btn-sm ${isFavorite ? 'btn-warning' : 'btn-outline-warning'}\" \n                                    onclick=\"viewerManager.toggleFavorite(${video.id})\" title=\"Add to favorites\">\n                                <i class=\"fas fa-heart\"></i>\n                            </button>\n                            ${!isPurchased ? `\n                                <button class=\"btn btn-sm btn-success ms-1\" \n                                        onclick=\"viewerManager.showPurchaseModal(${video.id})\" title=\"Purchase\">\n                                    <i class=\"fas fa-shopping-cart\"></i>\n                                </button>\n                            ` : `\n                                <button class=\"btn btn-sm btn-primary ms-1\" \n                                        onclick=\"viewerManager.playVideo(${video.id})\" title=\"Watch\">\n                                    <i class=\"fas fa-play\"></i>\n                                </button>\n                            `}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        `;\n    }\n\n    renderPurchaseStats() {\n        const totalVideosCount = document.getElementById('totalVideosCount');\n        const purchasedVideosCount = document.getElementById('purchasedVideosCount');\n        const totalSpentAmount = document.getElementById('totalSpentAmount');\n        const favoritesCount = document.getElementById('favoritesCount');\n\n        // Total videos available in platform\n        if (totalVideosCount) totalVideosCount.textContent = this.videos.length;\n        \n        // Purchased videos count\n        if (purchasedVideosCount) purchasedVideosCount.textContent = this.purchases.length;\n        \n        // Total spent by current viewer\n        if (totalSpentAmount) {\n            const total = this.purchases.reduce((sum, p) => sum + p.price, 0);\n            totalSpentAmount.textContent = '$' + total.toFixed(2);\n        }\n        \n        // Favorites count\n        if (favoritesCount) {\n            favoritesCount.textContent = this.favorites.length;\n        }\n    }\n\n    renderPurchasedVideos() {\n        const gridContainer = document.getElementById('videosGrid');\n        const listContainer = document.getElementById('videosTableBody');\n\n        if (gridContainer) {\n            gridContainer.innerHTML = '';\n            this.purchases.forEach(purchase => {\n                const col = document.createElement('div');\n                col.className = 'col-lg-4 col-md-6 mb-4';\n                col.innerHTML = this.createPurchasedVideoCard(purchase);\n                gridContainer.appendChild(col);\n            });\n        }\n\n        if (listContainer) {\n            listContainer.innerHTML = '';\n            this.purchases.forEach(purchase => {\n                const row = document.createElement('tr');\n                row.innerHTML = `\n                    <td>\n                        <div class=\"d-flex align-items-center\">\n                            <img src=\"${purchase.video.thumbnail}\" width=\"60\" height=\"34\" class=\"rounded me-3\" alt=\"${purchase.video.title}\">\n                            <div>\n                                <strong>${purchase.video.title}</strong><br>\n                                <small class=\"text-muted\">${purchase.video.duration}</small>\n                            </div>\n                        </div>\n                    </td>\n                    <td>${purchase.video.creatorName}</td>\n                    <td>${purchase.video.duration}</td>\n                    <td>${new Date(purchase.purchaseDate).toLocaleDateString()}</td>\n                    <td>$${purchase.price.toFixed(2)}</td>\n                    <td>\n                        <span class=\"badge bg-${purchase.watchProgress > 0 ? 'success' : 'secondary'}\">\n                            ${purchase.watchProgress > 0 ? 'Watched' : 'Unwatched'}\n                        </span>\n                    </td>\n                    <td>\n                        <div class=\"btn-group btn-group-sm\">\n                            <button class=\"btn btn-outline-primary\" onclick=\"viewerManager.playVideo(${purchase.videoId})\">\n                                <i class=\"fas fa-play\"></i>\n                            </button>\n                            <button class=\"btn btn-outline-secondary\" onclick=\"viewerManager.showVideoOptions(${purchase.videoId})\">\n                                <i class=\"fas fa-ellipsis-v\"></i>\n                            </button>\n                        </div>\n                    </td>\n                `;\n                listContainer.appendChild(row);\n            });\n        }\n    }\n\n    createPurchasedVideoCard(purchase) {\n        const progress = purchase.watchProgress || 0;\n        const isFavorite = this.favorites.includes(purchase.videoId);\n\n        return `\n            <div class=\"card video-card h-100\">\n                <div class=\"video-thumbnail\">\n                    <img src=\"${purchase.video.thumbnail}\" class=\"card-img-top\" alt=\"${purchase.video.title}\">\n                    <div class=\"video-duration\">${purchase.video.duration}</div>\n                    <div class=\"video-progress\">\n                        <div class=\"progress\" style=\"height: 4px;\">\n                            <div class=\"progress-bar bg-primary\" style=\"width: ${progress}%\"></div>\n                        </div>\n                    </div>\n                    <div class=\"video-overlay\" onclick=\"viewerManager.playVideo(${purchase.videoId})\">\n                        <i class=\"fas fa-play fa-2x\"></i>\n                    </div>\n                </div>\n                <div class=\"card-body\">\n                    <h6 class=\"video-title\">${purchase.video.title}</h6>\n                    <p class=\"video-creator\">By ${purchase.video.creatorName}</p>\n                    <div class=\"video-stats\">\n                        <small class=\"text-muted\">\n                            Purchased: ${new Date(purchase.purchaseDate).toLocaleDateString()}\n                            <br>Progress: ${progress}%\n                        </small>\n                        <div class=\"video-actions mt-2\">\n                            <button class=\"btn btn-sm btn-primary\" onclick=\"viewerManager.playVideo(${purchase.videoId})\">\n                                <i class=\"fas fa-play me-1\"></i>Watch\n                            </button>\n                            <button class=\"btn btn-sm ${isFavorite ? 'btn-warning' : 'btn-outline-warning'} ms-1\" \n                                    onclick=\"viewerManager.toggleFavorite(${purchase.videoId})\">\n                                <i class=\"fas fa-heart\"></i>\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        `;\n    }\n\n    applyFilters() {\n        const category = document.getElementById('categoryFilter')?.value || '';\n        const status = document.getElementById('statusFilter')?.value || '';\n        const search = document.getElementById('searchInput')?.value.toLowerCase() || '';\n\n        let filtered = this.purchases;\n\n        if (category) {\n            filtered = filtered.filter(p => p.video.category === category);\n        }\n\n        if (status) {\n            if (status === 'watched') {\n                filtered = filtered.filter(p => p.watchProgress > 80);\n            } else if (status === 'unwatched') {\n                filtered = filtered.filter(p => p.watchProgress < 20);\n            } else if (status === 'favorite') {\n                filtered = filtered.filter(p => this.favorites.includes(p.videoId));\n            }\n        }\n\n        if (search) {\n            filtered = filtered.filter(p => \n                p.video.title.toLowerCase().includes(search) ||\n                p.video.creatorName.toLowerCase().includes(search)\n            );\n        }\n\n        // Update display with filtered results\n        this.renderFilteredPurchases(filtered);\n    }\n\n    renderFilteredPurchases(purchases) {\n        const gridContainer = document.getElementById('videosGrid');\n        if (gridContainer) {\n            gridContainer.innerHTML = '';\n            purchases.forEach(purchase => {\n                const col = document.createElement('div');\n                col.className = 'col-lg-4 col-md-6 mb-4';\n                col.innerHTML = this.createPurchasedVideoCard(purchase);\n                gridContainer.appendChild(col);\n            });\n        }\n    }\n\n    // Utility methods\n    parseDuration(duration) {\n        const parts = duration.split(':');\n        return parseInt(parts[0]) * 60 + parseInt(parts[1]);\n    }\n\n    initializePlayer() {\n        // Player initialization code\n    }\n\n    // Event handlers\n    showVideoPreview(videoId) {\n        console.log('Showing preview for video:', videoId);\n    }\n\n    showPurchaseModal(videoId) {\n        console.log('Showing purchase modal for video:', videoId);\n    }\n\n    playVideo(videoId) {\n        console.log('Playing video:', videoId);\n    }\n\n    toggleFavorite(videoId) {\n        const index = this.favorites.indexOf(videoId);\n        if (index > -1) {\n            this.favorites.splice(index, 1);\n        } else {\n            this.favorites.push(videoId);\n        }\n        // Refresh display\n        this.loadPageSpecificHandlers();\n    }\n\n    showVideoOptions(videoId) {\n        console.log('Showing options for video:', videoId);\n    }\n\n    handlePurchaseFromPreview() {\n        console.log('Handling purchase from preview');\n    }\n\n    handleConfirmPurchase() {\n        console.log('Handling confirm purchase');\n    }\n\n    handleProfileUpdate(event) {\n        event.preventDefault();\n        console.log('Handling profile update');\n    }\n\n    handlePasswordChange(event) {\n        event.preventDefault();\n        console.log('Handling password change');\n    }\n\n    loadProfileData() {\n        console.log('Loading profile data');\n    }\n}","size_bytes":24366}}}