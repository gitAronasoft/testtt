<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Video Platform</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="assets/css/style.css" rel="stylesheet">
</head>
<body class="bg-light">
    <!-- Enhanced Navigation -->
    <nav class="navbar global-navbar">
        <div class="container-fluid">
            <a class="navbar-brand d-flex align-items-center" href="#" onclick="event.preventDefault(); showPanel('overview'); return false;">
                <i class="fas fa-video me-2"></i>
                <span class="fw-bold">Video Platform</span>
            </a>
            <div class="d-flex align-items-center gap-3">
                <!-- Desktop User Info -->
                <div class="d-none d-lg-flex align-items-center me-3">
                    <div class="user-avatar me-3" id="userAvatar">A</div>
                    <div class="text-start">
                        <div class="user-name text-gray-800 fw-semibold" id="userName">Admin User</div>
                        <div class="user-role text-muted small" id="userRole" style="color: var(--gray-500) !important;">Admin</div>
                    </div>
                </div>
                
                <!-- Mobile User Avatar -->
                <div class="d-lg-none">
                    <div class="user-avatar" id="mobileUserAvatar" onclick="showUserSettings()">A</div>
                </div>
                
                <!-- Logout Button -->
                <button class="btn btn-outline-primary btn-sm d-flex align-items-center" onclick="logout()">
                    <i class="fas fa-sign-out-alt me-2"></i>
                    <span class="d-none d-sm-inline">Logout</span>
                </button>
            </div>
        </div>
    </nav>

    <!-- Loading Spinner -->
    <div id="loadingSpinner" class="d-none position-fixed w-100 h-100" style="top: 0; left: 0; background: rgba(0,0,0,0.5); z-index: 9999;">
        <div class="d-flex justify-content-center align-items-center h-100">
            <div class="spinner-border text-light" role="status" style="width: 3rem; height: 3rem;">
                <span class="visually-hidden">Loading...</span>
            </div>
        </div>
    </div>

    <!-- Enhanced Mobile Sidebar Toggle -->
    <button class="sidebar-toggle d-lg-none" onclick="toggleSidebar()" aria-label="Toggle sidebar navigation" aria-expanded="false">
        <i class="fas fa-bars" aria-hidden="true"></i>
    </button>

    <!-- Sidebar Backdrop -->
    <div class="sidebar-backdrop" onclick="closeSidebar()" aria-hidden="true"></div>

    <div class="container-fluid">
        <div class="dashboard-grid">
            <!-- Enhanced Sidebar -->
            <div class="sidebar-container" id="sidebar" role="navigation" aria-label="Main navigation">
                <!-- Enhanced User Profile Section -->
                <div class="user-profile-section">
                    <div class="text-center mb-3">
                        <div class="user-profile-avatar" id="userProfileAvatar">A</div>
                        <h6 class="fw-bold mb-1 text-gray-900" id="userProfileName">Admin User</h6>
                        <div class="user-profile-role badge" id="userProfileRole">Admin</div>
                    </div>
                    
                    <!-- Enhanced User Stats -->
                    <div class="user-profile-stats" id="userProfileStats">
                        <div class="user-stat text-center">
                            <span class="user-stat-value d-block" id="userStatVideos">0</span>
                            <span class="user-stat-label">Videos</span>
                        </div>
                        <div class="user-stat text-center">
                            <span class="user-stat-value d-block" id="userStatViews">0</span>
                            <span class="user-stat-label">Views</span>
                        </div>
                    </div>

                    <!-- Enhanced Action Buttons -->
                    <div class="d-flex gap-2 justify-content-center mt-3">
                        <button class="btn btn-outline-primary btn-sm flex-1" onclick="showEditProfileModal()" title="Edit Profile">
                            <i class="fas fa-edit me-1"></i>
                            <span class="d-none d-xl-inline">Edit</span>
                        </button>
                        <button class="btn btn-outline-secondary btn-sm flex-1" onclick="showUserSettings()" title="Settings">
                            <i class="fas fa-cog me-1"></i>
                            <span class="d-none d-xl-inline">Settings</span>
                        </button>
                    </div>
                </div>



                        <nav class="nav flex-column">
                    <a class="nav-link active" href="#" onclick="event.preventDefault(); showPanel('overview'); return false;">
                        <i class="fas fa-chart-bar me-2"></i>Overview
                    </a>

                    <!-- Viewer Sidebar -->
                    <div id="viewerSidebar" style="display: none;">
                        <a class="nav-link" href="#" onclick="event.preventDefault(); showPanel('videos'); return false;">
                            <i class="fas fa-video me-2"></i>Browse Videos
                        </a>
                        <a class="nav-link" href="#" onclick="event.preventDefault(); showPanel('purchases'); return false;">
                            <i class="fas fa-shopping-cart me-2"></i>My Purchases
                        </a>
                    </div>

                    <!-- Creator Sidebar -->
                    <div id="creatorSidebar" style="display: none;">
                        <a class="nav-link" href="#" onclick="event.preventDefault(); showPanel('myVideos'); return false;">
                            <i class="fas fa-film me-2"></i>My Videos
                        </a>
                        <a class="nav-link" href="#" onclick="event.preventDefault(); showPanel('upload'); return false;">
                            <i class="fas fa-upload me-2"></i>Upload Video
                        </a>
                        <a class="nav-link" href="#" onclick="event.preventDefault(); showPanel('earnings'); return false;">
                            <i class="fas fa-dollar-sign me-2"></i>Earnings
                        </a>
                    </div>

                    <!-- Admin Sidebar -->
                    <div id="adminSidebar" style="display: none;">
                        <a class="nav-link" href="#" onclick="event.preventDefault(); showPanel('videos'); return false;">
                            <i class="fas fa-video me-2"></i>All Videos
                        </a>
                        <a class="nav-link" href="#" onclick="event.preventDefault(); showPanel('users'); return false;">
                            <i class="fas fa-users me-2"></i>User Management
                        </a>
                        <a class="nav-link" href="#" onclick="event.preventDefault(); showPanel('analytics'); return false;">
                            <i class="fas fa-chart-line me-2"></i>Analytics
                        </a>
                    </div>
                </nav>
            </div>

            <!-- Enhanced Main Content -->
            <div class="main-content" role="main">
                <!-- Enhanced Loading Spinner -->
                <div id="loadingSpinner" class="d-flex flex-column align-items-center justify-content-center py-5" style="display: none;" role="status" aria-live="polite">
                    <div class="spinner-border text-primary mb-3" role="status">
                        <span class="visually-hidden">Loading...</span>
                    </div>
                    <p class="text-muted mb-0">Loading content...</p>
                </div>

                    <!-- Overview Panel -->
                    <div id="overviewPanel" class="panel">
                        <div class="d-flex justify-content-between align-items-center mb-4">
                            <h2>Dashboard Overview</h2>
                        </div>

                        <!-- Enhanced Statistics Cards -->
                        <div class="row g-3 g-md-4 mb-4">
                            <div class="col-6 col-lg-3">
                                <div class="card bg-primary text-white border-0 h-100">
                                    <div class="card-body p-3 p-md-4">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <div class="flex-grow-1">
                                                <h6 class="card-title mb-1 text-white-75" id="totalVideosLabel">Total Videos</h6>
                                                <h4 class="mb-0 fw-bold" id="totalVideos">0</h4>
                                            </div>
                                            <div class="ms-3 opacity-75">
                                                <i class="fas fa-video fa-2x"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-6 col-lg-3">
                                <div class="card bg-success text-white border-0 h-100">
                                    <div class="card-body p-3 p-md-4">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <div class="flex-grow-1">
                                                <h6 class="card-title mb-1 text-white-75" id="activeUsersLabel">Active Users</h6>
                                                <h4 class="mb-0 fw-bold" id="activeUsers">0</h4>
                                            </div>
                                            <div class="ms-3 opacity-75">
                                                <i class="fas fa-users fa-2x"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-6 col-lg-3">
                                <div class="card bg-warning text-white border-0 h-100">
                                    <div class="card-body p-3 p-md-4">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <div class="flex-grow-1">
                                                <h6 class="card-title mb-1 text-white-75" id="totalRevenueLabel">Total Revenue</h6>
                                                <h4 class="mb-0 fw-bold" id="totalRevenue">0</h4>
                                            </div>
                                            <div class="ms-3 opacity-75">
                                                <i class="fas fa-dollar-sign fa-2x"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-6 col-lg-3">
                                <div class="card bg-info text-white border-0 h-100">
                                    <div class="card-body p-3 p-md-4">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <div class="flex-grow-1">
                                                <h6 class="card-title mb-1 text-white-75" id="totalViewsLabel">Total Views</h6>
                                                <h4 class="mb-0 fw-bold" id="totalViews">0</h4>
                                            </div>
                                            <div class="ms-3 opacity-75">
                                                <i class="fas fa-eye fa-2x"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6">
                                <div class="card">
                                    <div class="card-header">
                                        <h5>Recent Activity</h5>
                                    </div>
                                    <div class="card-body">
                                        <div id="recentActivityContainer">
                                            <div class="list-group-item text-center text-muted">
                                                <div class="d-flex align-items-center justify-content-center">
                                                    <div class="spinner-border spinner-border-sm text-primary me-2" role="status">
                                                        <span class="visually-hidden">Loading...</span>
                                                    </div>
                                                    <span>Loading recent activity...</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card">
                                    <div class="card-header">
                                        <h5>Popular Videos</h5>
                                    </div>
                                    <div class="card-body">
                                        <div id="popularVideosContainer">
                                            <div class="list-group-item text-center text-muted">
                                                <i class="fas fa-spinner fa-spin me-2"></i>Loading...
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Videos Panel -->
                    <div id="videosPanel" class="panel" style="display: none;">
                        <div class="mb-4">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <div>
                                    <h2 class="mb-1">All Videos</h2>
                                    <p class="text-muted mb-0" id="videosCount">Loading videos...</p>
                                </div>
                            </div>
                            
                            <!-- Enhanced Filter Controls -->
                            <div class="row g-3 mb-4">
                                <div class="col-12 col-lg-8">
                                    <div class="btn-group w-100 d-flex flex-wrap flex-sm-nowrap" role="group" aria-label="Video filters">
                                        <button class="btn btn-outline-primary active flex-fill" onclick="filterVideos('all')" data-filter="all">
                                            <i class="fas fa-th me-1 d-none d-sm-inline" aria-hidden="true"></i>All
                                        </button>
                                        <button class="btn btn-outline-success flex-fill" onclick="filterVideos('free')" data-filter="free">
                                            <i class="fas fa-gift me-1 d-none d-sm-inline" aria-hidden="true"></i>Free
                                        </button>
                                        <button class="btn btn-outline-warning flex-fill" onclick="filterVideos('paid')" data-filter="paid">
                                            <i class="fas fa-dollar-sign me-1 d-none d-sm-inline" aria-hidden="true"></i>Paid
                                        </button>
                                        <button class="btn btn-outline-info flex-fill" onclick="filterVideos('purchased')" data-filter="purchased">
                                            <i class="fas fa-check me-1 d-none d-sm-inline" aria-hidden="true"></i>Purchased
                                        </button>
                                    </div>
                                </div>
                                <div class="col-12 col-lg-4">
                                    <div class="btn-group w-100" role="group" aria-label="View options">
                                        <button class="btn btn-outline-secondary flex-fill" onclick="toggleViewMode('grid')" id="gridViewBtn" title="Grid View">
                                            <i class="fas fa-th-large me-1" aria-hidden="true"></i>
                                            <span class="d-none d-sm-inline">Grid</span>
                                        </button>
                                        <button class="btn btn-outline-secondary flex-fill" onclick="toggleViewMode('list')" id="listViewBtn" title="List View">
                                            <i class="fas fa-list me-1" aria-hidden="true"></i>
                                            <span class="d-none d-sm-inline">List</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Enhanced Search and Sort -->
                        <div class="row g-3 mb-4">
                            <div class="col-12 col-md-8">
                                <div class="input-group shadow-sm">
                                    <span class="input-group-text bg-white border-end-0">
                                        <i class="fas fa-search text-muted" aria-hidden="true"></i>
                                    </span>
                                    <input type="text" class="form-control border-start-0" placeholder="Search videos..." id="videoSearchInput" onkeyup="searchVideos()" aria-label="Search videos">
                                </div>
                            </div>
                            <div class="col-12 col-md-4">
                                <select class="form-select shadow-sm" id="videoSortSelect" onchange="sortVideos()" aria-label="Sort videos">
                                    <option value="newest">üìÖ Newest First</option>
                                    <option value="oldest">üìÖ Oldest First</option>
                                    <option value="price-low">üí∞ Price: Low to High</option>
                                    <option value="price-high">üí∞ Price: High to Low</option>
                                    <option value="title">üî§ Title A-Z</option>
                                    <option value="views">üëÅÔ∏è Most Viewed</option>
                                </select>
                            </div>
                        </div>

                        <div class="row g-3" id="videosContainer">
                            <!-- Videos will be populated by JavaScript -->
                        </div>

                        <!-- Load More Button -->
                        <div class="text-center mt-4" id="loadMoreContainer" style="display: none;">
                            <button class="btn btn-outline-primary" id="loadMoreBtn" onclick="loadMoreVideos()">
                                <i class="fas fa-plus me-1"></i>Load More Videos
                            </button>
                        </div>
                    </div>

                    <!-- My Videos Panel -->
                    <div id="myVideosPanel" class="panel" style="display: none;">
                        <div class="mb-4">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <div>
                                    <h2 class="mb-1">My Videos</h2>
                                    <p class="text-muted mb-0" id="myVideosCount">Loading videos...</p>
                                </div>
                                <button class="btn btn-primary" onclick="event.preventDefault(); showPanel('upload'); return false;">
                                    <i class="fas fa-plus me-1 d-none d-sm-inline"></i>Upload
                                </button>
                            </div>
                            
                            <div class="btn-group w-100 mb-3" role="group" aria-label="My video filters">
                                <button class="btn btn-outline-primary active" onclick="filterMyVideos('all')" data-filter="all">
                                    <i class="fas fa-th me-1 d-none d-sm-inline"></i>All
                                </button>
                                <button class="btn btn-outline-success" onclick="filterMyVideos('free')" data-filter="free">
                                    <i class="fas fa-gift me-1 d-none d-sm-inline"></i>Free
                                </button>
                                <button class="btn btn-outline-warning" onclick="filterMyVideos('paid')" data-filter="paid">
                                    <i class="fas fa-dollar-sign me-1 d-none d-sm-inline"></i>Paid
                                </button>
                                <button class="btn btn-outline-danger" onclick="filterMyVideos('youtube')" data-filter="youtube">
                                    <i class="fab fa-youtube me-1 d-none d-sm-inline"></i>YouTube
                                </button>
                            </div>
                        </div>

                        <!-- Search and Sort -->
                        <div class="row mb-4">
                            <div class="col-md-8">
                                <div class="input-group">
                                    <span class="input-group-text">
                                        <i class="fas fa-search"></i>
                                    </span>
                                    <input type="text" class="form-control" placeholder="Search my videos..." id="myVideoSearchInput" onkeyup="searchMyVideos()">
                                </div>
                            </div>
                            <div class="col-md-4">
                                <select class="form-select" id="myVideoSortSelect" onchange="sortMyVideos()">
                                    <option value="newest">Newest First</option>
                                    <option value="oldest">Oldest First</option>
                                    <option value="price-low">Price: Low to High</option>
                                    <option value="price-high">Price: High to Low</option>
                                    <option value="title">Title A-Z</option>
                                    <option value="views">Most Viewed</option>
                                </select>
                            </div>
                        </div>

                        <div class="row g-3" id="myVideosContainer">
                            <!-- My videos will be populated by JavaScript -->
                        </div>
                    </div>

                    <!-- Upload Panel -->
                    <div id="uploadPanel" class="panel" style="display: none;">
                        <div class="d-flex justify-content-between align-items-center mb-4">
                            <h2>Upload Video</h2>
                        </div>

                        <div class="row justify-content-center">
                            <div class="col-md-8">
                                <div class="card">
                                    <div class="card-body">
                                        <form id="uploadForm">
                                            <div class="mb-3">
                                                <label for="videoTitle" class="form-label">Title</label>
                                                <input type="text" class="form-control" id="videoTitle" required>
                                            </div>
                                            <div class="mb-3">
                                                <label for="videoDescription" class="form-label">Description</label>
                                                <textarea class="form-control" id="videoDescription" rows="3" required></textarea>
                                            </div>
                                            <div class="mb-3">
                                                <label for="videoPrice" class="form-label">Price ($)</label>
                                                <input type="number" class="form-control" id="videoPrice" min="0" step="0.01" value="0">
                                            </div>
                                            <div class="mb-3">
                                                <label for="videoCategory" class="form-label">Category</label>
                                                <select class="form-select" id="videoCategory">
                                                    <option value="education">Education</option>
                                                    <option value="entertainment">Entertainment</option>
                                                    <option value="technology">Technology</option>
                                                    <option value="business">Business</option>
                                                    <option value="other">Other</option>
                                                </select>
                                            </div>
                                            <div class="mb-3">
                                                <label for="videoFile" class="form-label">Video File</label>
                                                <input type="file" class="form-control" id="videoFile" accept="video/*" required>
                                                <div class="form-text">
                                    <i class="fab fa-youtube text-danger me-1"></i>
                                    Video will be uploaded to YouTube and synced to the platform database. 
                                    <strong>YouTube connection is managed in Settings ‚Üí YouTube tab.</strong>
                                </div>
                                            </div>
                                            <button type="submit" class="btn btn-primary">
                                                <i class="fas fa-upload me-2"></i>Upload Video
                                            </button>
                                        </form>

                                        <!-- Upload Progress -->
                                        <div id="uploadProgress" style="display: none;" class="mt-3">
                                            <div class="progress">
                                                <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width: 0%">0%</div>
                                            </div>
                                            <small class="text-muted mt-2 d-block" id="uploadProgressText">Preparing upload...</small>
                                        </div>

                                        <!-- Loader -->
                                        <div id="loader" style="display: none;" class="mt-3">
                                            <div class="d-flex align-items-center">
                                                <div class="spinner-border spinner-border-sm text-primary me-2" role="status">
                                                    <span class="visually-hidden">Loading...</span>
                                                </div>
                                                <span>Uploading video to YouTube...</span>
                                            </div>
                                        </div>

                                        <!-- Success Message -->
                                        <div id="success-message" style="display: none;" class="alert alert-success mt-3">
                                            <i class="fas fa-check-circle me-2"></i>
                                            <span id="success-message-text">Video uploaded successfully to YouTube and synced to database!</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Users Panel -->
                    <div id="usersPanel" class="panel" style="display: none;">
                        <div class="d-flex justify-content-between align-items-center mb-4">
                            <h2>Manage Users</h2>
                            <button class="btn btn-primary" onclick="showAddUserModal()">
                                <i class="fas fa-plus me-2"></i>Add User
                            </button>
                        </div>

                        <div class="card">
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-hover">
                                        <thead>
                                            <tr>
                                                <th>Name</th>
                                                <th>Email</th>
                                                <th>Role</th>
                                                <th>Joined</th>
                                                <th>Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody id="usersTableBody">
                                            <!-- Users will be populated by JavaScript -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Purchases Panel -->
                    <div id="purchasesPanel" class="panel" style="display: none;">
                        <div class="d-flex justify-content-between align-items-center mb-4">
                            <h2>My Purchases</h2>
                        </div>

                        <div class="row g-3" id="purchasesContainer">
                            <!-- Purchased videos will be populated by JavaScript -->
                        </div>
                    </div>



                    <!-- Earnings Panel -->
                    <div id="earningsPanel" class="panel" style="display: none;">
                        <div class="d-flex justify-content-between align-items-center mb-4">
                            <h2>Earnings Dashboard</h2>
                        </div>

                        <div class="row mb-4">
                            <div class="col-md-4">
                                <div class="card bg-success text-white">
                                    <div class="card-body">
                                        <h5>Total Earnings</h5>
                                        <h3 id="totalEarnings">$1,250.00</h3>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card bg-primary text-white">
                                    <div class="card-body">
                                        <h5>This Month</h5>
                                        <h3 id="monthlyEarnings">$350.00</h3>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card bg-warning text-white">
                                    <div class="card-body">
                                        <h5>Pending</h5>
                                        <h3 id="pendingEarnings">$125.00</h3>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row mb-4">
                            <div class="col-md-6">
                                <div class="card">
                                    <div class="card-header">
                                        <h5>Recent Transactions</h5>
                                    </div>
                                    <div class="card-body">
                                        <div class="table-responsive">
                                            <table class="table">
                                                <thead>
                                                    <tr>
                                                        <th>Date</th>
                                                        <th>Video</th>
                                                        <th>Buyer</th>
                                                        <th>Amount</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="transactionsTableBody">
                                                    <tr><td colspan="4" class="text-center text-muted">Loading...</td></tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card">
                                    <div class="card-header">
                                        <h5>Paid Users</h5>
                                    </div>
                                    <div class="card-body">
                                        <div id="paidUsersContainer" style="max-height: 400px; overflow-y: auto;">
                                            <!-- Paid users will be populated by JavaScript -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>



                    <!-- Analytics Panel -->
                    <div id="analyticsPanel" class="panel" style="display: none;">
                        <div class="d-flex justify-content-between align-items-center mb-4">
                            <h2>Analytics</h2>
                        </div>

                        <div class="alert alert-info">
                            <i class="fas fa-chart-line me-2"></i>
                            Analytics charts will be implemented with Chart.js
                        </div>
                    </div>


                </div>
            </div>
        </div>
    </div>

    <!-- Video Modal -->
    <div class="modal fade" id="videoModal" tabindex="-1">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="videoModalTitle">Video Title</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body p-0">
                    <div id="videoPlayer" style="min-height: 400px;">
                        <!-- Video content will be loaded here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Purchase Modal -->
    <div class="modal fade" id="purchaseModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Confirm Purchase</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <p>Are you sure you want to purchase this video for $<span id="purchasePrice">0.00</span>?</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="confirmPurchase()">Confirm Purchase</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Profile Modal -->
    <div class="modal fade" id="editProfileModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="fas fa-user-edit me-2"></i>Edit Profile
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="editProfileForm">
                        <div class="text-center mb-4">
                            <div class="user-profile-avatar mx-auto mb-3" id="editProfileAvatar">A</div>
                            <button type="button" class="btn btn-outline-primary btn-sm" onclick="changeProfilePicture()">
                                <i class="fas fa-camera me-1"></i>Change Picture
                            </button>
                        </div>

                        <div class="mb-3">
                            <label for="editProfileName" class="form-label">Full Name</label>
                            <input type="text" class="form-control" id="editProfileName" required>
                        </div>

                        <div class="mb-3">
                            <label for="editProfileEmail" class="form-label">Email</label>
                            <input type="email" class="form-control" id="editProfileEmail" readonly>
                            <div class="form-text">Email cannot be changed</div>
                        </div>

                        <div class="mb-3">
                            <label for="editProfileBio" class="form-label">Bio</label>
                            <textarea class="form-control" id="editProfileBio" rows="3" placeholder="Tell us about yourself..."></textarea>
                        </div>

                        <div class="mb-3">
                            <label for="editProfileWebsite" class="form-label">Website</label>
                            <input type="url" class="form-control" id="editProfileWebsite" placeholder="https://example.com">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="saveProfile()">
                        <i class="fas fa-save me-1"></i>Save Changes
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- User Settings Modal -->
    <div class="modal fade" id="userSettingsModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="fas fa-cog me-2"></i>User Settings
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-3">
                            <div class="nav flex-column nav-pills" role="tablist">
                                <button class="nav-link active" data-bs-toggle="pill" data-bs-target="#account-settings" type="button">
                                    <i class="fas fa-user me-2"></i>Account
                                </button>
                                <button class="nav-link" data-bs-toggle="pill" data-bs-target="#security-settings" type="button">
                                    <i class="fas fa-shield-alt me-2"></i>Security
                                </button>
                                <button class="nav-link" data-bs-toggle="pill" data-bs-target="#notification-settings" type="button">
                                    <i class="fas fa-bell me-2"></i>Notifications
                                </button>
                                <button class="nav-link" data-bs-toggle="pill" data-bs-target="#privacy-settings" type="button">
                                    <i class="fas fa-lock me-2"></i>Privacy
                                </button>
                                <button class="nav-link" data-bs-toggle="pill" data-bs-target="#youtube-settings" type="button" id="youtubeSettingsTab" style="display: none;">
                                    <i class="fab fa-youtube me-2"></i>YouTube
                                </button>
                            </div>
                        </div>
                        <div class="col-md-9">
                            <div class="tab-content">
                                <div class="tab-pane fade show active" id="account-settings">
                                    <h6 class="mb-3">Account Settings</h6>
                                    <div class="form-check form-switch mb-3">
                                        <input class="form-check-input" type="checkbox" id="profilePublic" checked>
                                        <label class="form-check-label" for="profilePublic">
                                            Make profile public
                                        </label>
                                    </div>
                                    <div class="form-check form-switch mb-3">
                                        <input class="form-check-input" type="checkbox" id="showOnlineStatus" checked>
                                        <label class="form-check-label" for="showOnlineStatus">
                                            Show online status
                                        </label>
                                    </div>
                                    <div class="mb-3">
                                        <label for="timezone" class="form-label">Timezone</label>
                                        <select class="form-select" id="timezone">
                                            <option value="UTC">UTC</option>
                                            <option value="America/New_York">Eastern Time</option>
                                            <option value="America/Chicago">Central Time</option>
                                            <option value="America/Denver">Mountain Time</option>
                                            <option value="America/Los_Angeles">Pacific Time</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="security-settings">
                                    <h6 class="mb-3">Security Settings</h6>
                                    <button class="btn btn-outline-primary mb-3" onclick="changePassword()">
                                        <i class="fas fa-key me-1"></i>Change Password
                                    </button>
                                    <div class="form-check form-switch mb-3">
                                        <input class="form-check-input" type="checkbox" id="twoFactorAuth">
                                        <label class="form-check-label" for="twoFactorAuth">
                                            Enable Two-Factor Authentication
                                        </label>
                                    </div>
                                    <div class="alert alert-info">
                                        <i class="fas fa-info-circle me-2"></i>
                                        Last login: <span id="lastLogin">Loading...</span>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="notification-settings">
                                    <h6 class="mb-3">Notification Preferences</h6>
                                    <div class="form-check form-switch mb-3">
                                        <input class="form-check-input" type="checkbox" id="emailNotifications" checked>
                                        <label class="form-check-label" for="emailNotifications">
                                            Email notifications
                                        </label>
                                    </div>
                                    <div class="form-check form-switch mb-3">
                                        <input class="form-check-input" type="checkbox" id="pushNotifications" checked>
                                        <label class="form-check-label" for="pushNotifications">
                                            Push notifications
                                        </label>
                                    </div>
                                    <div class="form-check form-switch mb-3">
                                        <input class="form-check-input" type="checkbox" id="marketingEmails">
                                        <label class="form-check-label" for="marketingEmails">
                                            Marketing emails
                                        </label>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="privacy-settings">
                                    <h6 class="mb-3">Privacy Settings</h6>
                                    <div class="form-check form-switch mb-3">
                                        <input class="form-check-input" type="checkbox" id="analyticsOptIn" checked>
                                        <label class="form-check-label" for="analyticsOptIn">
                                            Allow analytics data collection
                                        </label>
                                    </div>
                                    <div class="form-check form-switch mb-3">
                                        <input class="form-check-input" type="checkbox" id="thirdPartySharing">
                                        <label class="form-check-label" for="thirdPartySharing">
                                            Allow third-party data sharing
                                        </label>
                                    </div>
                                    <button class="btn btn-outline-danger" onclick="downloadUserData()">
                                        <i class="fas fa-download me-1"></i>Download My Data
                                    </button>
                                </div>
                                <div class="tab-pane fade" id="youtube-settings">
                                    <h6 class="mb-4">
                                        <i class="fab fa-youtube text-danger me-2"></i>YouTube Integration Settings
                                    </h6>

                                    <!-- Connection Status Card -->
                                    <div class="card mb-4 border-0 shadow-sm">
                                        <div class="card-header bg-gradient-danger text-white">
                                            <h6 class="mb-0">
                                                <i class="fab fa-youtube me-2"></i>Connection Status
                                            </h6>
                                        </div>
                                        <div class="card-body">
                                            <div class="row align-items-center">
                                                <div class="col-md-8">
                                                    <div id="adminYouTubeStatus">
                                                        <div class="d-flex align-items-center">
                                                            <div class="spinner-border spinner-border-sm text-primary me-2" role="status">
                                                                <span class="visually-hidden">Loading...</span>
                                                            </div>
                                                            <span class="text-muted">Checking YouTube connection...</span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-4 text-end">
                                                    <div id="adminYoutubeConnectionStatus" class="badge bg-secondary fs-6 px-3 py-2">
                                                        <i class="fab fa-youtube me-1"></i>Checking...
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- YouTube Actions Card -->
                                    <div class="card mb-4 border-0 shadow-sm">
                                        <div class="card-header bg-light">
                                            <h6 class="mb-0">
                                                <i class="fas fa-cogs me-2"></i>YouTube Actions
                                            </h6>
                                        </div>
                                        <div class="card-body">
                                            <div class="row g-3">
                                                <div class="col-md-6">
                                                    <button class="btn btn-success w-100" onclick="connectYouTube()">
                                                        <i class="fab fa-youtube me-2"></i>Connect to YouTube
                                                    </button>
                                                    <small class="text-muted d-block mt-1">Establish new connection</small>
                                                </div>
                                                <div class="col-md-6">
                                                    <button class="btn btn-primary w-100" id="refreshYoutubeTokenBtn" onclick="refreshYouTubeConnection()">
                                                        <i class="fas fa-sync me-2"></i>Refresh Token
                                                    </button>
                                                    <small class="text-muted d-block mt-1">Update access token</small>
                                                </div>
                                                <div class="col-md-6">
                                                    <button class="btn btn-info w-100" onclick="testYouTubeConnection()">
                                                        <i class="fas fa-vial me-2"></i>Test Connection
                                                    </button>
                                                    <small class="text-muted d-block mt-1">Verify API access</small>
                                                </div>
                                                <div class="col-md-6">
                                                    <button class="btn btn-danger w-100" onclick="disconnectYouTube()">
                                                        <i class="fas fa-unlink me-2"></i>Disconnect
                                                    </button>
                                                    <small class="text-muted d-block mt-1">Remove connection</small>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- API Information Card -->
                                    <div class="card border-0 shadow-sm">
                                        <div class="card-header bg-light">
                                            <h6 class="mb-0">
                                                <i class="fas fa-info-circle me-2"></i>API Information
                                            </h6>
                                        </div>
                                        <div class="card-body">
                                            <div class="alert alert-info mb-3">
                                                <i class="fas fa-lightbulb me-2"></i>
                                                <strong>Important:</strong> YouTube connection is required for video uploads and sync functionality. 
                                                The system uses OAuth 2.0 for secure authentication.
                                            </div>

                                            <div class="row">
                                                <div class="col-md-6">
                                                    <h6 class="text-muted mb-2">Features Enabled:</h6>
                                                    <ul class="list-unstyled">
                                                        <li><i class="fas fa-check text-success me-2"></i>Video Upload</li>
                                                        <li><i class="fas fa-check text-success me-2"></i>Channel Management</li>
                                                        <li><i class="fas fa-check text-success me-2"></i>Video Metadata Sync</li>
                                                        <li><i class="fas fa-check text-success me-2"></i>Analytics Access</li>
                                                    </ul>
                                                </div>
                                                <div class="col-md-6">
                                                    <h6 class="text-muted mb-2">Security Notes:</h6>
                                                    <ul class="list-unstyled">
                                                        <li><i class="fas fa-shield-alt text-primary me-2"></i>Secure OAuth 2.0</li>
                                                        <li><i class="fas fa-clock text-warning me-2"></i>Auto token refresh</li>
                                                        <li><i class="fas fa-user-lock text-info me-2"></i>Admin-only access</li>
                                                        <li><i class="fas fa-key text-secondary me-2"></i>Encrypted storage</li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" onclick="saveUserSettings()">
                        <i class="fas fa-save me-1"></i>Save Settings
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast-container position-fixed bottom-0 end-0 p-3">
        <div id="notificationToast" class="toast" role="alert">
            <div class="toast-header">
                <strong class="me-auto">Notification</strong>
                <button type="button" class="btn-close" data-bs-dismiss="toast"></button>
            </div>
            <div class="toast-body" id="toastMessage"></div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/youtube-api-client.js"></script>
    <script src="assets/js/dashboard.js"></script>


</body>
</html>